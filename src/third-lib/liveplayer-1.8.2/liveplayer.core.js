!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.liveplayer=t():e.liveplayer=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="/dist",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r(98),a=n(i),o=r(212),s=n(o),u=r(85),l=n(u),d=r(86),f=n(d),c=r(87),h=n(c),g=r(84),p=n(g);r(214),r(88);var v="1.8.2",m={html5:r(56),hls:r(96),flash:r(37),"flash-hls":r(94),"flash-rtmp":r(95),dash:r(93)},y=(0,s.default)(function(e,t){return t}),_=function(e){if(e.nodeType)return e;if(document.getElementById(e))return document.getElementById(e);throw new Error("No valid DOM element or element ID specified.")},E={autoplay:!1,bufferTime:4.5,useSuggestedPresentationDelay:!0,edgeServerIpDetection:!1,group:null,hardwareAcceleration:!0,loadTimeout:!1,loglevel:0,loop:!1,mute:!1,scaleMode:!1,simpleBitrate:!1,smoothTransition:!0,swf:"./srplayer.swf",trackLiveEdge:!1,ui:{enabled:!0,videoControls:!0,fullscreen:!0,controlBarHideDelay:3},videoHandlers:["html5","hls","flash","dash"],vod:null},T=function e(t,r,n){r=r||{};var i=new h.default(r.loglevel||0),o=i.getLogger("liveplayer()");o.debug("Running bootstrap function");var s=new a.default,u=_(t),d=document.createElement("div");u.appendChild(d);var c=y(E,r);s.constant("appContainer",s),s.constant("containerElement",u),s.constant("playerElement",d),s.constant("livePlayerOptions",c),s.constant("loggerFactory",i),s.constant("livePlayerPlugins",e.plugins),o.debug("Discovering supported video handlers for platform");var g=c.videoHandlers.filter(function(e){return!!m[e]&&m[e].isSupportedByPlatform()});o.debug("Found "+g.length+" supported video handlers"),g=g.map(function(e){return m[e]}),s.constant("videoHandlers",g),s.factory("liveEdgeTracker",function(e){var t=e.loggerFactory.getLogger("LiveEdgeTracker");return new p.default(t)}),s.factory("livePlayer",function(e){var t=e.videoHandlers,r=e.playerElement,n=e.livePlayerOptions,i=e.loggerFactory,a=null;return n.trackLiveEdge&&(a=e.liveEdgeTracker),new l.default(t,r,i,a,n,v)}),s.factory("pluginLoader",function(e){return new f.default(e.appContainer)}),s.container.pluginLoader.loadMultiple(e.plugins);var T=s.container.livePlayer,b=s.container.livePlayerUI;return b&&c.ui.enabled&&T.bind("video-handler-loaded",function(){T.addLayer("ui",b)}),T};T.plugins={},e.exports=T},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,n){var i=o(n);!i[e]&&t&&(i[e]={instance:t,override:r})}function t(e,t){for(var r in l){var n=l[r];if(n.context===e&&n.name===t)return n.instance}return null}function r(e,t,r){for(var n in l){var i=l[n];if(i.context===e&&i.name===t)return void(l[n].instance=r)}l.push({name:t,context:e,instance:r})}function n(e){return function(t){return void 0===t&&(t={}),{create:function(){return a(e.__dashjs_factory_name,e.apply({context:t},arguments),t,arguments)}}}}function i(e){return function(r){var n=void 0;return void 0===r&&(r={}),{getInstance:function(){return n||(n=t(r,e.__dashjs_factory_name)),n||(n=a(e.__dashjs_factory_name,e.apply({context:r},arguments),r,arguments),l.push({name:e.__dashjs_factory_name,context:r,instance:n})),n}}}}function a(e,t,r,n){var i=o(r),a=i[e];if(a){var u=a.instance;if(!a.override)return u.apply({context:r,factory:s},n);u=u.apply({context:r,factory:s,parent:t},n);for(var l in u)t.hasOwnProperty(l)&&(t[l]=u[l])}return t}function o(e){var t=void 0;return u.forEach(function(r){r===e&&(t=r)}),t||(t=u.push(e)),t}var s=void 0,u=[],l=[];return s={extend:e,getSingletonInstance:t,setSingletonInstance:r,getSingletonFactory:i,getClassFactory:n}}();t.default=r,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(101),u=n(s),l=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),t}(u.default),d=new l;t.default=d,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t,r){var i=arguments.length<=3||void 0===arguments[3]?s:arguments[3];if(!e)throw new Error("event type cannot be null or undefined");if(!t||"function"!=typeof t)throw new Error("listener must be a function: "+t);if(!(n(e,t,r)>=0)){a[e]=a[e]||[];var o={callback:t,scope:r,priority:i},u=a[e].some(function(t,r){if(i>t.priority)return a[e].splice(r,0,o),!0});u||a[e].push(o)}}function t(e,t,r){if(e&&t&&a[e]){var i=n(e,t,r);i<0||a[e].splice(i,1)}}function r(e,t){if(e&&a[e]){if(t=t||{},t.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,a[e].forEach(function(e){return e.callback.call(e.scope,t)})}}function n(e,t,r){var n=-1;return a[e]?(a[e].some(function(e,i){if(e.callback===t&&(!r||r===e.scope))return n=i,!0}),n):n}function i(){a={}}var a={},o={on:e,off:t,trigger:r,reset:i};return o}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=0,u=5e3;i.__dashjs_factory_name="EventBus";var l=o.default.getSingletonFactory(i);l.EVENT_PRIORITY_LOW=s,l.EVENT_PRIORITY_HIGH=u,t.default=l,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){d=!0,f=!0,c=(new Date).getTime()}function t(e){f=e}function r(e){d=e}function n(){return d}function i(){var e="",t=null;f&&(t=(new Date).getTime(),e+="["+(t-c)+"]"),e.length>0&&(e+=" "),Array.apply(null,arguments).forEach(function(t){e+=t+" "}),d&&console.log(e),s.trigger(u.default.LOG,{message:e})}var a=this.context,s=(0,o.default)(a).getInstance(),l=void 0,d=void 0,f=void 0,c=void 0;return l={log:i,setLogTimestampVisible:t,setLogToBrowserConsole:r,getLogToBrowserConsole:n},e(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=n(a),s=r(2),u=n(s),l=r(1),d=n(l);i.__dashjs_factory_name="Debug",t.default=d.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){function e(){var e,t;Re=[],Se=!1,be=!0,Ie=!0,He=!1,Ke=!1,Pe={enabled:!0,ttl:f},Ce={enabled:!0,ttl:c},Ae=d,we=void 0,Oe=p,De=v,Me=NaN,Le=_,ke=E,xe=T,Ne=b,Fe=h,Ue=g,Ge=D,Ve={default:P},e={},i(e,u.HTTPRequest.MPD_TYPE,A),i(e,u.HTTPRequest.XLINK_EXPANSION_TYPE,I),i(e,u.HTTPRequest.MEDIA_SEGMENT_TYPE,S),i(e,u.HTTPRequest.INIT_SEGMENT_TYPE,S),i(e,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,S),i(e,u.HTTPRequest.INDEX_SEGMENT_TYPE,S),i(e,u.HTTPRequest.OTHER_TYPE,S),Be=e,t={},i(t,u.HTTPRequest.MPD_TYPE,w),i(t,u.HTTPRequest.XLINK_EXPANSION_TYPE,O),i(t,u.HTTPRequest.MEDIA_SEGMENT_TYPE,R),i(t,u.HTTPRequest.INIT_SEGMENT_TYPE,R),i(t,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,R),i(t,u.HTTPRequest.INDEX_SEGMENT_TYPE,R),i(t,u.HTTPRequest.OTHER_TYPE,R),je=t}function t(e){He=e}function r(){return He}function n(e){Fe=e}function a(){return Fe}function o(e){Ue=e}function s(){return Ue}function l(e){Me=e}function C(){return isNaN(Me)?Ke?y:m:Me}function M(e){Le=e}function L(){return Le}function k(e){ke=e}function x(){return ke}function N(e){xe=e}function F(){return xe}function U(e){Ne=e}function B(){return Ne}function j(e){Oe=e}function G(){return Oe}function H(e,t){Pe.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Pe.ttl=t)}function V(){return Pe}function K(e,t){Ce.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Ce.ttl=t)}function q(){return Ce}function Y(e){De=e}function z(){return De}function W(e){Be[u.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function Q(e,t){Be[e]=t}function X(){return Be[u.HTTPRequest.MEDIA_SEGMENT_TYPE]}function $(e){return Be[e]}function J(e){je[u.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function Z(e,t){je[e]=t}function ee(){return je[u.HTTPRequest.MEDIA_SEGMENT_TYPE]}function te(e){return je[e]}function re(e){Ge=e}function ne(){return Ge}function ie(e){Ie=e}function ae(){return Ie}function oe(e){Ae=e}function se(e){we=e}function ue(){return Ae}function le(){return we}function de(e){be=e}function fe(){return be}function ce(e){Se=e}function he(){return Se}function ge(e){Re=e}function pe(){return Re}function ve(e,t){e?Ve[e]=!!t:Object.keys(Ve).forEach(function(e){ve(e,t)})}function me(e){var t=Ve[e];return void 0===t?Ve.default:t}function ye(){return Ke}function _e(e){Ke=e}function Ee(){}var Te=void 0,be=void 0,Se=void 0,Re=void 0,Ae=void 0,we=void 0,Ie=void 0,Oe=void 0,De=void 0,Pe=void 0,Ce=void 0,Me=void 0,Le=void 0,ke=void 0,xe=void 0,Ne=void 0,Fe=void 0,Ue=void 0,Be=void 0,je=void 0,Ge=void 0,He=void 0,Ve=void 0,Ke=void 0;return Te={setBufferOccupancyABREnabled:t,getBufferOccupancyABREnabled:r,setBandwidthSafetyFactor:n,getBandwidthSafetyFactor:a,setAbandonLoadTimeout:o,getAbandonLoadTimeout:s,setLastBitrateCachingInfo:H,getLastBitrateCachingInfo:V,setLastMediaSettingsCachingInfo:K,getLastMediaSettingsCachingInfo:q,setStableBufferTime:l,getStableBufferTime:C,setBufferTimeAtTopQuality:M,getBufferTimeAtTopQuality:L,setBufferTimeAtTopQualityLongForm:k,getBufferTimeAtTopQualityLongForm:x,setLongFormContentDurationThreshold:N,getLongFormContentDurationThreshold:F,setRichBufferThreshold:U,getRichBufferThreshold:B,setBufferToKeep:j,getBufferToKeep:G,setBufferPruningInterval:Y,getBufferPruningInterval:z,setFragmentRetryAttempts:W,getFragmentRetryAttempts:X,setRetryAttemptsForType:Q,getRetryAttemptsForType:$,setFragmentRetryInterval:J,getFragmentRetryInterval:ee,setRetryIntervalForType:Z,getRetryIntervalForType:te,setWallclockTimeUpdateInterval:re,getWallclockTimeUpdateInterval:ne,setScheduleWhilePaused:ie,getScheduleWhilePaused:ae,getUseSuggestedPresentationDelay:he,setUseSuggestedPresentationDelay:ce,setLiveDelayFragmentCount:oe,getLiveDelayFragmentCount:ue,getLiveDelay:le,setLiveDelay:se,setUseManifestDateHeaderTimeSource:de,getUseManifestDateHeaderTimeSource:fe,setUTCTimingSources:ge,getUTCTimingSources:pe,setXHRWithCredentialsForType:ve,getXHRWithCredentialsForType:me,setFastSwitchEnabled:_e,getFastSwitchEnabled:ye,reset:Ee},e(),Te}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),s=n(o),u=r(6),l={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},d=4,f=36e4,c=36e4,h=.9,g=1e4,p=30,v=30,m=12,y=20,_=30,E=60,T=600,b=20,S=3,R=1e3,A=3,w=500,I=1,O=500,D=50,P=!1;a.__dashjs_factory_name="MediaPlayerModel";var C=s.default.getSingletonFactory(a);C.DEFAULT_UTC_TIMING_SOURCE=l,t.default=C,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},i=function e(){r(this,e),this.s=null,this.d=null,this.b=[]};n.MPD_TYPE="MPD",n.XLINK_EXPANSION_TYPE="XLinkExpansion",n.INIT_SEGMENT_TYPE="InitializationSegment",n.INDEX_SEGMENT_TYPE="IndexSegment",n.MEDIA_SEGMENT_TYPE="MediaSegment",n.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",n.OTHER_TYPE="other",t.HTTPRequest=n,t.HTTPRequestTrace=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=void 0===e?s:e,n=void 0===t?null:t,i={value:r,reason:n};return i}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=-1;i.__dashjs_factory_name="SwitchRequest";var u=o.default.getClassFactory(i);u.NO_CHANGE=s,t.default=u,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,n,i){r(this,e),this.code=t||null,this.message=n||null,this.data=i||null};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){de=0,fe=NaN,ce=null,pe=null,me=!1,he={},ve=(0,d.default)($).getInstance()}function t(e){ge=e,te=le.getElement(),Q(),pe=ge.manifestInfo.isDynamic,fe=ge.start,Z.on(g.default.DATA_UPDATE_COMPLETED,L,this),Z.on(g.default.BYTES_APPENDED,z,this),Z.on(g.default.BUFFER_LEVEL_STATE_CHANGED,W,this),Z.on(g.default.PERIOD_SWITCH_STARTED,r,this),me&&(me=!1,s())}function r(e){!pe&&e.fromStreamInfo&&he[e.fromStreamInfo.id]&&delete he[e.fromStreamInfo.id]}function n(){var e=I(!0),t=pe?e-ge.start:0;return e+(ge.duration-t)-v()}function i(){return v()>0}function a(){return ge.id}function s(){if(te){te.autoplay=!0;var e=te.play();e&&"undefined"!=typeof Promise&&e instanceof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&Z.trigger(g.default.PLAYBACK_NOT_ALLOWED),J("Caught pending play exception - continuing ("+e+")")})}else me=!0}function l(){if(te)return te.paused}function f(){te&&(te.pause(),te.autoplay=!1)}function h(){if(te)return te.seeking}function p(e){le&&(J("Requesting seek to time: "+e),le.setCurrentTime(e))}function v(){if(te)return te.currentTime}function m(){if(te)return te.playbackRate}function _(){if(te)return te.played}function E(){if(te)return te.ended}function T(){return pe}function b(e){fe=e}function S(){return fe}function R(e,t){var r=se.getMpd(oe.getValue()),n=void 0,i=10;n=ve.getUseSuggestedPresentationDelay()&&r.hasOwnProperty("suggestedPresentationDelay")?r.suggestedPresentationDelay:ve.getLiveDelay()?ve.getLiveDelay():isNaN(e)?2*ge.manifestInfo.minBufferTime:e*ve.getLiveDelayFragmentCount();var a=Math.max(t-i,t/2);return Math.min(n,a)}function A(){le&&te&&(Z.off(g.default.DATA_UPDATE_COMPLETED,L,this),Z.off(g.default.BUFFER_LEVEL_STATE_CHANGED,W,this),Z.off(g.default.BYTES_APPENDED,z,this),P(),X()),le=null,ge=null,te=null,pe=null,e()}function w(e){e&&(e.streamController&&(re=e.streamController),e.timelineConverter&&(ne=e.timelineConverter),e.metricsModel&&(ie=e.metricsModel),e.dashMetrics&&(ae=e.dashMetrics),e.manifestModel&&(oe=e.manifestModel),e.dashManifestModel&&(se=e.dashManifestModel),e.adapter&&(ue=e.adapter),e.videoModel&&(le=e.videoModel))}function I(e){var t=void 0,r=(0,u.default)($).getInstance().getURIFragmentData(),n=parseInt(r.s,10),i=parseInt(r.t,10),a=NaN;if(e||(a=isNaN(n)?i:n),pe)!isNaN(a)&&a>1262304e3&&(t=a-ge.manifestInfo.availableFrom.getTime()/1e3,(t>fe||t<fe-ge.manifestInfo.DVRWindowSize)&&(t=null)),t=t||fe;else if(!isNaN(a)&&a<Math.max(ge.manifestInfo.duration,ge.duration)&&a>=0)t=a;else{var o=he[ge.id];void 0===o&&(o=re.getActiveStreamCommonEarliestTime()),t=Math.max(o,ge.start)}return t}function O(e){var t,r=ie.getReadOnlyMetricsFor("video")||ie.getReadOnlyMetricsFor("audio"),n=ae.getCurrentDVRInfo(r),i=n?n.range:null;if(!i)return NaN;if(e>i.end)t=Math.max(i.end-2*ge.manifestInfo.minBufferTime,i.start);else{if(!(e<i.start))return e;t=i.start}return t}function D(){if(null===ce){var e=function(){Y()};ce=setInterval(e,ve.getWallclockTimeUpdateInterval())}}function P(){clearInterval(ce),ce=null}function C(){var e=I(!1);e>0&&(p(e),J("Starting playback at offset: "+e))}function M(){if(!l()&&pe&&0!==te.readyState){var e=v(),t=O(e),r=!isNaN(t)&&t!==e;r&&p(t)}}function L(e){if(!e.error){var t=ue.convertDataToTrack(oe.getValue(),e.currentRepresentation),r=t.mediaInfo.streamInfo;ge.id===r.id&&(ge=r,M())}}function k(){Z.trigger(g.default.CAN_PLAY)}function x(){J("Native video element event: play"),M(),D(),Z.trigger(g.default.PLAYBACK_STARTED,{startTime:v()})}function N(){J("Native video element event: playing"),Z.trigger(g.default.PLAYBACK_PLAYING,{playingTime:v()})}function F(){J("Native video element event: pause"),Z.trigger(g.default.PLAYBACK_PAUSED,{ended:E()})}function U(){var e=v();J("Seeking to: "+e),D(),Z.trigger(g.default.PLAYBACK_SEEKING,{seekTime:e})}function B(){J("Native video element event: seeked"),Z.trigger(g.default.PLAYBACK_SEEKED)}function j(){var e=v();e!==de&&(de=e,Z.trigger(g.default.PLAYBACK_TIME_UPDATED,{timeToEnd:n(),time:e}))}function G(){Z.trigger(g.default.PLAYBACK_PROGRESS)}function H(){var e=m();J("Native video element event: ratechange: ",e),Z.trigger(g.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function V(){J("Native video element event: loadedmetadata"),(!pe&&ge.isFirst||ne.isTimeSyncCompleted())&&C(),Z.trigger(g.default.PLAYBACK_METADATA_LOADED),D()}function K(){J("Native video element event: ended"),f(),P(),Z.trigger(g.default.PLAYBACK_ENDED)}function q(e){var t=e.target||e.srcElement;Z.trigger(g.default.PLAYBACK_ERROR,{error:t.error})}function Y(){Z.trigger(g.default.WALLCLOCK_TIME_UPDATED,{isDynamic:pe,time:new Date})}function z(e){var t=e.bufferedRanges;if(t&&t.length){var r=Math.max(t.start(0),ge.start),n=void 0===he[ge.id]?r:Math.max(he[ge.id],r);n!==he[ge.id]&&(!pe&&I(!0)<n&&v()<n&&p(n),he[ge.id]=n)}}function W(e){e.streamInfo.id===ge.id&&le.setStallState(e.mediaType,e.state===o.default.BUFFER_EMPTY)}function Q(){te.addEventListener("canplay",k),te.addEventListener("play",x),te.addEventListener("playing",N),te.addEventListener("pause",F),te.addEventListener("error",q),te.addEventListener("seeking",U),te.addEventListener("seeked",B),te.addEventListener("timeupdate",j),te.addEventListener("progress",G),te.addEventListener("ratechange",H),te.addEventListener("loadedmetadata",V),te.addEventListener("ended",K)}function X(){te.removeEventListener("canplay",k),te.removeEventListener("play",x),te.removeEventListener("playing",N),te.removeEventListener("pause",F),te.removeEventListener("error",q),te.removeEventListener("seeking",U),te.removeEventListener("seeked",B),te.removeEventListener("timeupdate",j),te.removeEventListener("progress",G),te.removeEventListener("ratechange",H),te.removeEventListener("loadedmetadata",V),te.removeEventListener("ended",K)}var $=this.context,J=(0,y.default)($).getInstance().log,Z=(0,c.default)($).getInstance(),ee=void 0,te=void 0,re=void 0,ne=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,ge=void 0,pe=void 0,ve=void 0,me=void 0;return ee={initialize:t,setConfig:w,getStreamStartTime:I,getTimeToStreamEnd:n,isPlaybackStarted:i,getStreamId:a,getTime:v,getPlaybackRate:m,getPlayedRanges:_,getEnded:E,getIsDynamic:T,setLiveStartTime:b,getLiveStartTime:S,computeLiveDelay:R,play:s,isPaused:l,pause:f,isSeeking:h,seek:p,reset:A},e(),ee}Object.defineProperty(t,"__esModule",{value:!0});var a=r(17),o=n(a),s=r(44),u=n(s),l=r(5),d=n(l),f=r(3),c=n(f),h=r(2),g=n(h),p=r(1),v=n(p),m=r(4),y=n(m);i.__dashjs_factory_name="PlaybackController",t.default=v.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){q={}}function t(e){e&&e.adapter&&(K=e.adapter)}function r(){H.trigger(O.default.METRICS_CHANGED)}function n(e){H.trigger(O.default.METRIC_CHANGED,{mediaType:e}),r()}function i(e,t,r){H.trigger(O.default.METRIC_UPDATED,{mediaType:e,metric:t,value:r}),n(e)}function a(e,t,r){H.trigger(O.default.METRIC_ADDED,{mediaType:e,metric:t,value:r}),n(e)}function s(e){delete q[e],n(e)}function d(){q={},r()}function c(e){return q.hasOwnProperty(e)?q[e]:null}function g(e){var t;return q.hasOwnProperty(e)?t=q[e]:(t=new o.default,q[e]=t),t}function v(e,t,r,n,i,o){var s=new u.default;return s.tcpid=t,s.dest=r,s.topen=n,s.tclose=i,s.tconnect=o,g(e).TcpList.push(s),a(e,K.metricsList.TCP_CONNECTION,s),s}function y(e,t,r,n){var i=new l.HTTPRequestTrace;return i.s=t,i.d=r,i.b=n,e.trace.push(i),e.interval||(e.interval=0),e.interval+=r,i}function T(e,t,r,n,i,o,s,u,d,f,c,h,p,v){var m=new l.HTTPRequest;return i&&i!==n&&(T(e,null,r,n,null,null,s,u,null,null,null,h,null,null),m.actualurl=i),m.tcpid=t,m.type=r,m.url=n,m.range=s,m.trequest=u,m.tresponse=d,m.responsecode=c,m._tfinish=f,m._stream=e,m._mediaduration=h,m._responseHeaders=p,m._serviceLocation=o,v?v.forEach(function(e){y(m,e.s,e.d,e.b)}):(delete m.interval,delete m.trace),g(e).HttpList.push(m),a(e,K.metricsList.HTTP_REQUEST,m),m}function S(e,t,r,n,i){var o=new f.default;return o.t=t,o.mt=r,o.to=n,i?o.lto=i:delete o.lto,g(e).RepSwitchList.push(o),a(e,K.metricsList.TRACK_SWITCH,o),o}function A(e,t,r){var n=new h.default;return n.t=t,n.level=r,g(e).BufferLevel.push(n),a(e,K.metricsList.BUFFER_LEVEL,n),n}function I(e,t,r){var n=new p.default;return n.target=r,n.state=t,g(e).BufferState.push(n),a(e,K.metricsList.BUFFER_STATE,n),n}function D(e,t,r,n){var i=new m.default;return i.time=t,i.range=n,i.manifestInfo=r,g(e).DVRInfo.push(i),a(e,K.metricsList.DVR_INFO,i),i}function P(e,t){var r=new _.default,n=g(e).DroppedFrames;return r.time=t.creationTime,r.droppedFrames=t.droppedVideoFrames,n.length>0&&n[n.length-1]==r?n[n.length-1]:(n.push(r),a(e,K.metricsList.DROPPED_FRAMES,r),r)}function C(e,t,r,n,i,o,s,u,l){var d=new b.default;return d.mediaType=e,d.t=t,d.type=r,d.startTime=n,d.availabilityStartTime=i,d.duration=o,d.quality=s,d.range=u,d.state=l,g(e).SchedulingInfo.push(d),a(e,K.metricsList.SCHEDULING_INFO,d),d}function L(e,t,r){var n=new w.default;n.loadingRequests=t,n.executedRequests=r,g(e).RequestsQueue=n,a(e,K.metricsList.REQUESTS_QUEUE,n)}function k(e,t,r,n,i,o,s,u,l,d){var f=new E.ManifestUpdate,c=g("stream");return f.mediaType=e,f.type=t,f.requestTime=r,f.fetchTime=n,f.availabilityStartTime=i,f.presentationStartTime=o,f.clientTimeOffset=s,f.currentTime=u,f.buffered=l,f.latency=d,c.ManifestUpdate.push(f),a(e,K.metricsList.MANIFEST_UPDATE,f),f}function x(e,t){if(e){for(var r in t)e[r]=t[r];i(e.mediaType,K.metricsList.MANIFEST_UPDATE,e)}}function N(e,t,r,n,a){if(e){var o=new E.ManifestUpdateStreamInfo;return o.id=t,o.index=r,o.start=n,o.duration=a,e.streamInfo.push(o),i(e.mediaType,K.metricsList.MANIFEST_UPDATE_STREAM_INFO,e),o}return null}function F(e,t,r,n,a,o,s,u){if(e){var l=new E.ManifestUpdateTrackInfo;return l.id=t,l.index=r,l.streamIndex=n,l.mediaType=a,l.startNumber=s,l.fragmentInfoType=u,l.presentationTimeOffset=o,e.trackInfo.push(l),i(e.mediaType,K.metricsList.MANIFEST_UPDATE_TRACK_INFO,e),l}return null}function U(e){var t="stream";return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,g(t).PlayList.push(e),a(t,K.metricsList.PLAY_LIST,e),e}function B(e){var t="stream";return g(t).DVBErrors.push(e),a(t,K.metricsList.DVB_ERRORS,e),e}function j(e,t){var r=new M.default;return r._s=t,g(e).BolaState=[r],a(e,"BolaState",r),r}var G=this.context,H=(0,R.default)(G).getInstance(),V=void 0,K=void 0,q=void 0;return V={metricsChanged:r,metricChanged:n,metricUpdated:i,metricAdded:a,clearCurrentMetricsForType:s,clearAllCurrentMetrics:d,getReadOnlyMetricsFor:c,getMetricsFor:g,addTcpConnection:v,addHttpRequest:T,addRepresentationSwitch:S,addBufferLevel:A,addBufferState:I,addDVRInfo:D,addDroppedFrames:P,addSchedulingInfo:C,addRequestsQueue:L,addManifestUpdate:k,updateManifestUpdateInfo:x,addManifestUpdateStreamInfo:N,addManifestUpdateRepresentationInfo:F,addPlayList:U,addDVBErrors:B,updateBolaState:j,setConfig:t},e(),V}Object.defineProperty(t,"__esModule",{value:!0});var a=r(197),o=n(a),s=r(211),u=n(s),l=r(6),d=r(208),f=n(d),c=r(203),h=n(c),g=r(204),p=n(g),v=r(205),m=n(v),y=r(206),_=n(y),E=r(207),T=r(210),b=n(T),S=r(3),R=n(S),A=r(209),w=n(A),I=r(2),O=n(I),D=r(1),P=n(D),C=r(202),M=n(C);i.__dashjs_factory_name="MetricsModel",t.default=P.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e,t){var r,n=O.getValue(),i=n.Period_asArray[t];return r=S(i,e),null===r?null:r.bandwidth}function t(e,t){var r,n=O.getValue(),i=n.Period_asArray[t];return r=b(i,e)}function r(e,t){var r,n=O.getValue(),i=n.Period_asArray[t];return r=A(i,e)}function n(e){return c(e,g.TRACK_SWITCH)}function i(e){return c(e,g.BUFFER_LEVEL)}function a(e){var t=i(e);return t?(0,p.round10)(t.level/1e3,-3):0}function s(e){return e.RequestsQueue}function l(e){if(null===e)return null;var t,r,n=e.HttpList,i=null;if(null===n||n.length<=0)return null;for(t=n.length,r=t-1;r>=0;){if(n[r].responsecode){i=n[r];break}r--}return i}function f(e){return null===e?[]:e.HttpList?e.HttpList:[]}function c(e,t){if(null===e)return null;var r=e[t];if(null===r)return null;var n=r.length;return n<=0?null:r[n-1]}function h(e){return c(e,g.DROPPED_FRAMES)}function v(e){return c(e,g.SCHEDULING_INFO)}function m(e){return c(e,g.MANIFEST_UPDATE)}function y(e){return c(e,g.DVR_INFO)}function _(e,t){var r,n,i,a={};if(null===e)return null;for(r=f(e),i=r.length-1;i>=0;i--)if(n=r[i],n.type===o.HTTPRequest.MPD_TYPE){a=T(n._responseHeaders);break}return void 0===a[t]?null:a[t]}function E(e,t){if(null===e)return null;var r,n=l(e);return null===n||null===n._responseHeaders?null:(r=T(n._responseHeaders),void 0===r[t]?null:r[t])}function T(e){var t={};if(!e)return t;for(var r=e.trim().split("\r\n"),n=0,i=r.length;n<i;n++){var a=r[n],o=a.indexOf(": ");o>0&&(t[a.substring(0,o)]=a.substring(o+2))}return t}function b(e,t){var r=S(e,t,!0);return null!==r?r:-1}function S(e,t,r){var n,i,a,o,s,u;for(i=e.AdaptationSet_asArray,s=0;s<i.length;s+=1)for(n=i[s],o=n.Representation_asArray,u=0;u<o.length;u+=1)if(a=o[u],t===a.id)return r?u:a;return null}function R(e,t){return(0,d.default)(I).getInstance().getIsTypeOf(e,t)}function A(e,t){var r,n,i,a;if(!e||!t)return-1;for(n=e.AdaptationSet_asArray,a=0;a<n.length;a+=1)if(r=n[a],i=r.Representation_asArray,R(r,t))return i.length;return-1}var w=void 0,I=this.context,O=(0,u.default)(I).getInstance();return w={getBandwidthForRepresentation:e,getIndexForRepresentation:t,getMaxIndexForBufferType:r,getCurrentRepresentationSwitch:n,getLatestBufferLevelVO:i,getCurrentBufferLevel:a,getCurrentHttpRequest:l,getHttpRequests:f,getCurrentDroppedFrames:h,getCurrentSchedulingInfo:v,getCurrentDVRInfo:y,getCurrentManifestUpdate:m,getLatestFragmentRequestHeaderValueByID:E,getLatestMPDRequestHeaderValueByID:_,getRequestsQueue:s}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),s=r(33),u=i(s),l=r(13),d=i(l),f=r(1),c=i(f),h=r(59),g=n(h),p=r(226);a.__dashjs_factory_name="DashMetrics",t.default=c.default.getSingletonFactory(a),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){f.trigger(u.default.ERROR,{error:"capability",event:e})}function t(e,t,r){f.trigger(u.default.ERROR,{error:"download",event:{id:e,url:t,request:r}})}function r(e,t,r,n){f.trigger(u.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:r,event:n}})}function n(e,t,r){f.trigger(u.default.ERROR,{error:"cc",event:{message:e,id:t,cc:r}})}function i(e){f.trigger(u.default.ERROR,{error:"mediasource",event:e})}function a(e){f.trigger(u.default.ERROR,{error:"key_session",event:e})}function s(e){f.trigger(u.default.ERROR,{error:"key_message",event:e})}var l=void 0,d=this.context,f=(0,o.default)(d).getInstance();return l={capabilityError:e,downloadError:t,manifestError:r,timedTextError:n,mediaSourceError:i,mediaKeySessionError:a,mediaKeyMessageError:s}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=n(a),s=r(2),u=n(s),l=r(1),d=n(l),f="mediasource",c="mediakeys",h="manifest",g="SIDX",p="content",v="initialization",m="xlink",y="codec",_="parse",E="nostreams",T="parse";i.__dashjs_factory_name="ErrorHandler";var b=d.default.getSingletonFactory(i);b.CAPABILITY_ERROR_MEDIASOURCE=f,b.CAPABILITY_ERROR_MEDIAKEYS=c,b.DOWNLOAD_ERROR_ID_MANIFEST=h,b.DOWNLOAD_ERROR_ID_SIDX=g,b.DOWNLOAD_ERROR_ID_CONTENT=p,b.DOWNLOAD_ERROR_ID_INITIALIZATION=v,b.DOWNLOAD_ERROR_ID_XLINK=m,b.MANIFEST_ERROR_ID_CODEC=y,b.MANIFEST_ERROR_ID_PARSE=_,b.MANIFEST_ERROR_ID_NOSTREAMS=E,b.TIMED_TEXT_ERROR_ID_PARSE=T,t.default=b,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var r,n,i,a=!1,o=!1,s=e.ContentComponent_asArray,u="text"!==t?new RegExp(t):new RegExp("(vtt|ttml)");if(e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty("codecs")){var l=e.Representation_asArray[0].codecs;if(0===l.search("stpp")||0===l.search("wvtt"))return"fragmentedText"===t}if(s){if(s.length>1)return"muxed"===t;s[0]&&s[0].contentType===t&&(a=!0,o=!0)}if(e.hasOwnProperty("mimeType")&&(a=u.test(e.mimeType),o=!0),!o)for(r=0,n=e.Representation_asArray.length;!o&&r<n;)i=e.Representation_asArray[r],i.hasOwnProperty("mimeType")&&(a=u.test(i.mimeType),o=!0),r++;return a}function t(t){return e(t,"audio")}function r(t){return e(t,"video")}function n(t){return e(t,"fragmentedText")}function i(t){return e(t,"text")}function a(t){return e(t,"muxed")}function s(e){return"text/vtt"===e||"application/ttml+xml"===e}function l(e){var t="";return e.hasOwnProperty("lang")&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t}function f(e){return e.hasOwnProperty("Viewpoint")?e.Viewpoint:null}function h(e){return e.hasOwnProperty("Role_asArray")?e.Role_asArray:[]}function p(e){return e.hasOwnProperty("Accessibility_asArray")?e.Accessibility_asArray:[]}function m(e){return e.hasOwnProperty("AudioChannelConfiguration_asArray")?e.AudioChannelConfiguration_asArray:[]}function _(e){return h(e).filter(function(e){return"main"===e.value})[0]}function T(){return function(e,t){return e.bandwidth-t.bandwidth}}function S(e){return void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(T()),e}function A(e,t,r){var n,i,a=t.Period_asArray[r].AdaptationSet_asArray;for(n=0,i=a.length;n<i;n++)if(a[n].hasOwnProperty("id")&&a[n].id===e)return a[n];return null}function I(e,t,r){var n=t.Period_asArray[r].AdaptationSet_asArray;return n[e]}function D(e,t,r){var n,i,a=t.Period_asArray[r].AdaptationSet_asArray;for(n=0,i=a.length;n<i;n++)if(a[n]===e)return n;return-1}function P(t,r,n){var i,a,o=t.Period_asArray[r].AdaptationSet_asArray,s=[];for(i=0,a=o.length;i<a;i++)e(o[i],n)&&s.push(S(o[i]));return s}function C(e,t,r,n){var i=P(e,t,r);if(!i||0===i.length)return null;if(i.length>1&&n)for(var a=le.getCurrentTrackFor(r,n),o=de.getAllMediaInfoForType(e,n,r),s=0,u=i.length;s<u;s++){if(a&&le.isTracksEqual(a,o[s]))return i[s];if(_(i[s]))return i[s]}return i[0]}function M(e){var t=e.Representation_asArray[0];return t.mimeType+';codecs="'+t.codecs+'"'}function L(e){return e.Representation_asArray[0].mimeType}function k(e){return e&&e.hasOwnProperty("cenc:default_KID")?e["cenc:default_KID"]:null}function x(e){return e&&e.hasOwnProperty("ContentProtection_asArray")&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null}function N(e){var t=!1;return e.hasOwnProperty("type")&&(t="dynamic"===e.type),t}function F(e){var t,r,n=N(e);return t=!isNaN(e.timeShiftBufferDepth),r=n&&t}function U(e,t){var r=!1;return e.profiles&&e.profiles.length>0&&(r=e.profiles.indexOf(t)!==-1),r}function B(e){return U(e,"urn:mpeg:dash:profile:isoff-on-demand:2011");
}function j(e){return U(e,"urn:dvb:dash:profile:dvb-dash:2014")}function G(e){var t;return t=e.hasOwnProperty("mediaPresentationDuration")?e.mediaPresentationDuration:Number.MAX_VALUE}function H(e){return e.bandwidth}function V(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=NaN;return e.hasOwnProperty("minimumUpdatePeriod")&&(r=e.minimumUpdatePeriod),isNaN(r)?r:Math.max(r-t,1)}function K(e){return e.Representation_asArray.length}function q(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;for(var t=S(e),r=t.Representation_asArray,n=r.length,i=[],a=0;a<n;a++)i.push({bandwidth:r[a].bandwidth,width:r[a].width||0,height:r[a].height||0});return i}function Y(e,t){return t.Representation_asArray[e]}function z(e,t){for(var r,n,i,a,u,l=S(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index]),d=[],f=0;f<l.Representation_asArray.length;f++)a=l.Representation_asArray[f],r=new o.default,r.index=f,r.adaptation=t,a.hasOwnProperty("id")&&(r.id=a.id),a.hasOwnProperty("bandwidth")&&(r.bandwidth=a.bandwidth),a.hasOwnProperty("maxPlayoutRate")&&(r.maxPlayoutRate=a.maxPlayoutRate),a.hasOwnProperty("SegmentBase")?(i=a.SegmentBase,r.segmentInfoType="SegmentBase"):a.hasOwnProperty("SegmentList")?(i=a.SegmentList,i.hasOwnProperty("SegmentTimeline")?(r.segmentInfoType="SegmentTimeline",u=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(r.useCalculatedLiveEdgeTime=!0)):(r.segmentInfoType="SegmentList",r.useCalculatedLiveEdgeTime=!0)):a.hasOwnProperty("SegmentTemplate")?(i=a.SegmentTemplate,i.hasOwnProperty("SegmentTimeline")?(r.segmentInfoType="SegmentTimeline",u=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(r.useCalculatedLiveEdgeTime=!0)):r.segmentInfoType="SegmentTemplate",i.hasOwnProperty("initialization")&&(r.initialization=i.initialization.split("$Bandwidth$").join(a.bandwidth).split("$RepresentationID$").join(a.id))):r.segmentInfoType="BaseURL",i&&(i.hasOwnProperty("Initialization")?(n=i.Initialization,n.hasOwnProperty("sourceURL")?r.initialization=n.sourceURL:n.hasOwnProperty("range")&&(r.range=n.range)):a.hasOwnProperty("mimeType")&&s(a.mimeType)&&(r.range=0),i.hasOwnProperty("timescale")&&(r.timescale=i.timescale),i.hasOwnProperty("duration")&&(r.segmentDuration=i.duration/r.timescale),i.hasOwnProperty("startNumber")&&(r.startNumber=i.startNumber),i.hasOwnProperty("indexRange")&&(r.indexRange=i.indexRange),i.hasOwnProperty("presentationTimeOffset")&&(r.presentationTimeOffset=i.presentationTimeOffset/r.timescale)),r.MSETimeOffset=ue.calcMSETimeOffset(r),r.path=[t.period.index,t.index,f],d.push(r);return d}function W(e,i){for(var o,s,l=e.Period_asArray[i.index],d=[],f=0;f<l.AdaptationSet_asArray.length;f++)s=l.AdaptationSet_asArray[f],o=new u.default,s.hasOwnProperty("id")&&(o.id=s.id),o.index=f,o.period=i,a(s)?o.type="muxed":t(s)?o.type="audio":r(s)?o.type="video":n(s)?o.type="fragmentedText":o.type="text",d.push(o);return d}function Q(e,t){var r,n,i=N(e),a=[],o=null,s=null,u=null,l=null;for(n=0,r=e.Period_asArray.length;n<r;n++)s=e.Period_asArray[n],s.hasOwnProperty("start")?(l=new d.default,l.start=s.start):null!==o&&s.hasOwnProperty("duration")&&null!==u?(l=new d.default,l.start=u.start+u.duration,l.duration=s.duration):0!==n||i||(l=new d.default,l.start=0),null!==u&&isNaN(u.duration)&&(u.duration=l.start-u.start),null!==l&&(l.id=X(s,n)),null!==l&&s.hasOwnProperty("duration")&&(l.duration=s.duration),null!==l&&(l.index=n,l.mpd=t,a.push(l),o=s,u=l),s=null,l=null;return 0===a.length?a:(null!==u&&isNaN(u.duration)&&(u.duration=J(e,u)-u.start),a)}function X(e,t){if(!e)throw new Error("Period cannot be null or undefined");var r=d.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty("id")&&"__proto__"!==e.id&&(r=e.id),r}function $(e){var t=new c.default;return t.manifest=e,e.hasOwnProperty("availabilityStartTime")?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty("availabilityEndTime")&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty("minimumUpdatePeriod")&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty("mediaPresentationDuration")&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty("suggestedPresentationDelay")&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty("timeShiftBufferDepth")&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty("maxSegmentDuration")&&(t.maxSegmentDuration=e.maxSegmentDuration),t}function J(e,t){var r=N(e),n=void 0;if(e.mediaPresentationDuration)n=e.mediaPresentationDuration;else if(t.duration)n=t.duration;else{if(!r)throw new Error("Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.");n=Number.POSITIVE_INFINITY}return n}function Z(e,t){var r=e.Period_asArray,n=r[t.index].EventStream_asArray,i=[];if(n)for(var a=0;a<n.length;a++){var o=new w.default;if(o.period=t,o.timescale=1,!n[a].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");o.schemeIdUri=n[a].schemeIdUri,n[a].hasOwnProperty("timescale")&&(o.timescale=n[a].timescale),n[a].hasOwnProperty("value")&&(o.value=n[a].value);for(var s=0;s<n[a].Event_asArray.length;s++){var u=new b.default;u.presentationTime=0,u.eventStream=o,n[a].Event_asArray[s].hasOwnProperty("presentationTime")&&(u.presentationTime=n[a].Event_asArray[s].presentationTime),n[a].Event_asArray[s].hasOwnProperty("duration")&&(u.duration=n[a].Event_asArray[s].duration),n[a].Event_asArray[s].hasOwnProperty("id")&&(u.id=n[a].Event_asArray[s].id),i.push(u)}}return i}function ee(e,t){var r=[];if(!e)return r;for(var n=0;n<e.length;n++){var i=new w.default;if(i.timescale=1,i.representation=t,!e[n].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[n].schemeIdUri,e[n].hasOwnProperty("timescale")&&(i.timescale=e[n].timescale),e[n].hasOwnProperty("value")&&(i.value=e[n].value),r.push(i)}return r}function te(e,t){var r=e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index].InbandEventStream_asArray;return ee(r,null)}function re(e,t){var r=e.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].InbandEventStream_asArray;return ee(r,t)}function ne(e){var t=N(e),r=e.hasOwnProperty("availabilityStartTime"),n=e.UTCTiming_asArray,i=[];return(t||r)&&n&&n.forEach(function(e){var t=new g.default;e.hasOwnProperty("schemeIdUri")&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value.toString(),i.push(t)))}),i}function ie(e){var t=[],r=e.BaseURL_asArray||[e.baseUri],n=!1;return r.some(function(r){if(r){var i=new R.default,a=r.__text||r;return fe.isRelative(a)&&(n=!0,e.baseUri&&(a=e.baseUri+a)),i.url=a,r.hasOwnProperty("serviceLocation")&&r.serviceLocation.length?i.serviceLocation=r.serviceLocation:i.serviceLocation=a,r.hasOwnProperty("dvb:priority")&&(i.dvb_priority=r["dvb:priority"]),r.hasOwnProperty("dvb:weight")&&(i.dvb_weight=r["dvb:weight"]),t.push(i),n}}),t}function ae(e){return e.hasOwnProperty("Location")&&(e.Location=e.Location_asArray[0]),e.Location}var oe=void 0,se=this.context,ue=(0,v.default)(se).getInstance(),le=(0,y.default)(se).getInstance(),de=(0,E.default)(se).getInstance(),fe=(0,O.default)(se).getInstance();return oe={getIsTypeOf:e,getIsAudio:t,getIsVideo:r,getIsText:i,getIsMuxed:a,getIsTextTrack:s,getIsFragmentedText:n,getIsMain:_,getLanguageForAdaptation:l,getViewpointForAdaptation:f,getRolesForAdaptation:h,getAccessibilityForAdaptation:p,getAudioChannelConfigurationForAdaptation:m,processAdaptation:S,getAdaptationForIndex:I,getIndexForAdaptation:D,getAdaptationForId:A,getAdaptationsForType:P,getAdaptationForType:C,getCodec:M,getMimeType:L,getKID:k,getContentProtectionData:x,getIsDynamic:N,getIsDVR:F,getIsOnDemand:B,getIsDVB:j,getDuration:G,getBandwidth:H,getManifestUpdatePeriod:V,getRepresentationCount:K,getBitrateListForAdaptation:q,getRepresentationFor:Y,getRepresentationsForAdaptation:z,getAdaptationsForPeriod:W,getRegularPeriods:Q,getMpd:$,getEventsForPeriod:Z,getEventStreams:ee,getEventStreamForAdaptationSet:te,getEventStreamForRepresentation:re,getUTCTimingSources:ne,getBaseURLsFromElement:ie,getRepresentationSortFunction:T,getLocation:ae}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(41),o=n(a),s=r(119),u=n(s),l=r(122),d=n(l),f=r(121),c=n(f),h=r(63),g=n(h),p=r(40),v=n(p),m=r(15),y=n(m),_=r(21),E=n(_),T=r(62),b=n(T),S=r(61),R=n(S),A=r(120),w=n(A),I=r(26),O=n(I),D=r(1),P=n(D);i.__dashjs_factory_name="DashManifestModel",t.default=P.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){ve={video:!0,audio:!0},me={},ye={},_e={},Ee={},Te={},Se={},be={},Ne={},Ae=!1,we=!1,void 0===Ie&&(Ie=!1),ke=(0,u.default)(le).getInstance(),Le=(0,d.default)(le).getInstance(),Pe=(0,b.default)(le).getInstance(),Ce=(0,R.default)(le).getInstance(),Me=(0,w.default)(le).getInstance(),Ue=(0,N.default)(le).getInstance(),Be=(0,U.default)(le).getInstance(),je=(new Date).getTime()/1e3}function t(e,t){Ne[e]=(0,M.default)(le).create(),be[e]=t,Se[e]=Se[e]||{},Se[e].state=H,ce.on(v.default.LOADING_PROGRESS,ue,this),"video"==e&&(ce.on(y.default.QUALITY_CHANGE_RENDERED,i,this),Fe=(0,k.default)(le).create(),oe())}function r(){ce.off(v.default.LOADING_PROGRESS,ue,this),ce.off(y.default.QUALITY_CHANGE_RENDERED,i,this),xe=void 0,Fe=void 0,clearTimeout(Re),Re=null,e()}function n(e){e&&(e.abrRulesCollection&&(ge=e.abrRulesCollection),e.streamController&&(pe=e.streamController))}function i(e){"video"===e.mediaType&&(xe=e.newQuality,Fe.push(xe,Me.getPlaybackQuality()))}function a(e,t){var r;return me[t]=me[t]||{},me[t].hasOwnProperty(e)||(me[t][e]=0),r=ne(me[t][e],e),r=ie(r,e,me[t][e]),r=se(r,e)}function s(e){var t=ke.getSavedBitrateSettings(e);if(!_e.hasOwnProperty(e))if(Ee.hasOwnProperty(e)){var r=Pe.getValue(),n=Ce.getAdaptationForType(r,0,e).Representation;if(Array.isArray(n)){var i=Math.max(Math.round(n.length*Ee[e])-1,0);_e[e]=n[i].bandwidth}else _e[e]=0}else isNaN(t)?_e[e]="video"===e?V:K:_e[e]=t;return _e[e]}function l(e,t){_e[e]=t}function f(e){return Ee.hasOwnProperty(e)?Ee[e]:null}function h(e,t){Ee[e]=t}function p(e){return _e.hasOwnProperty("max")&&_e.max.hasOwnProperty(e)?_e.max[e]:NaN}function m(e,t){_e.max=_e.max||{},_e.max[e]=t}function _(e){return Ee.hasOwnProperty("max")&&Ee.max.hasOwnProperty(e)?Ee.max[e]:1}function E(e,t){Ee.max=Ee.max||{},Ee.max[e]=t}function T(e){return ve[e]}function S(e,t){ve[e]=t}function A(){return Ae}function I(e){Ae=e}function D(){return we}function C(e){we=e}function L(e){var t=e.getType(),r=e.getStreamInfo(),n=r.id,i=ee(t,r),o=(0,O.default)(le).create({streamProcessor:e,currentValue:i,playbackIndex:xe,switchHistory:Ne[t],droppedFramesHistory:Fe,hasRichBuffer:Q(t)});if(Fe&&Fe.push(xe,Me.getPlaybackQuality()),T(t)){var s=a(t,n),u=ge.getMaxQuality(o),l=u.value;if(l>s&&(l=s),Ne[t].push({oldValue:i,newValue:l}),l>P.default.NO_CHANGE&&l!=i)(Se[t].state===H||l>i)&&F(t,r,i,l,s,u.reason);else if(de.getLogToBrowserConsole()){var d=Be.getCurrentBufferLevel(Ue.getReadOnlyMetricsFor(t));fe("AbrController ("+t+") stay on "+i+"/"+s+" (buffer: "+d+")")}}}function x(e,t,r,n){var i=t.id,o=ee(e,t),s=null!==r&&!isNaN(r)&&r%1===0;if(!s)throw new Error("argument is not an integer");var u=a(e,i);r!==o&&r>=0&&r<=u&&F(e,t,o,r,u,n)}function F(e,t,r,n,i,a){if(de.getLogToBrowserConsole()){var o=Be.getCurrentBufferLevel(Ue.getReadOnlyMetricsFor(e));fe("AbrController ("+e+") switch from "+r+" to "+n+"/"+i+" (buffer: "+o+")\n"+JSON.stringify(a))}te(e,t.id,n),ce.trigger(v.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:t,oldQuality:r,newQuality:n,reason:a})}function B(e,t){Se[e].state=t}function Y(e){return Se[e].state}function z(e,t,r){if(r&&be[e.type].getCurrentRepresentationInfo()&&be[e.type].getCurrentRepresentationInfo().fragmentDuration){r/=1e3;var n=be[e.type].getCurrentRepresentationInfo().fragmentDuration;if(r>n)return 0;var i=r/n;t*=1-i}var a=W(e);if(!a||0===a.length)return q;for(var o=a.length-1;o>=0;o--){var s=a[o];if(1e3*t>=s.bitrate)return o}return 0}function W(e){if(!e||!e.bitrateList)return null;for(var t,r=e.bitrateList,n=e.type,i=[],a=0,s=r.length;a<s;a++)t=new o.default,t.mediaType=n,t.qualityIndex=a,t.bitrate=r[a].bandwidth,t.width=r[a].width,t.height=r[a].height,i.push(t);return i}function Q(e){var t=Ue.getReadOnlyMetricsFor(e),r=Be.getCurrentBufferLevel(t),n=t.BufferState.length>0?t.BufferState[t.BufferState.length-1]:null,i=!1;return n&&r>n.target&&(i=r>n.target+Le.getRichBufferThreshold()),i}function X(e,t){Te[e]=t}function $(e){return Te[e]}function J(e){var t=e.type,r=e.streamInfo.id,n=e.representationCount-1;return re(t,r,n),n}function Z(e){var t,r=e.id,n=ee("audio",e),i=ee("video",e);return t=n===a("audio",r)&&i===a("video",r)}function ee(e,t){var r,n=t.id;return ye[n]=ye[n]||{},ye[n].hasOwnProperty(e)||(ye[n][e]=q),r=ye[n][e]}function te(e,t,r){ye[t]=ye[t]||{},ye[t][e]=r}function re(e,t,r){me[t]=me[t]||{},me[t][e]=r}function ne(e,t){var r=p(t);if(isNaN(r)||!be[t])return e;var n=z(be[t].getMediaInfo(),r);return Math.min(e,n)}function ie(e,t,r){var n=_(t);return isNaN(n)||n>=1||n<0?e:Math.min(e,Math.round(r*n))}function ae(e){Ie=e}function oe(){var e=Me.getElement();if(void 0!==e){var t=we&&window.hasOwnProperty("devicePixelRatio"),r=t?window.devicePixelRatio:1;Oe=e.clientWidth*r,De=e.clientHeight*r}}function se(e,t){if("video"!==t||!Ae||!be[t])return e;Ie||oe();var r=Pe.getValue(),n=Ce.getAdaptationForType(r,0,t).Representation,i=e;if(Oe>0&&De>0){for(;i>0&&n[i]&&Oe<n[i].width&&Oe-n[i-1].width<n[i].width-Oe;)i-=1;n.length-2>=i&&n[i].width===n[i+1].width&&(i=Math.min(e,i+1))}return i}function ue(e){var t=e.request.mediaType;if(T(t)){var r=be[t].getScheduleController();if(!r)return;var n=(0,O.default)(le).create({streamProcessor:be[t],currentRequest:e.request,currentValue:ee(t,pe.getActiveStreamInfo()),hasRichBuffer:Q(t)}),i=ge.shouldAbandonFragment(n);if(i.value>P.default.NO_CHANGE){var a=r.getFragmentModel(),o=a.getRequests({state:c.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0];o&&(a.abortRequests(),B(t,G),Ne[t].reset(),Ne[t].push({oldValue:ee(t,pe.getActiveStreamInfo()),newValue:i.value,confidence:1,reason:i.reason}),x(t,pe.getActiveStreamInfo(),i.value,i.reason),ce.trigger(v.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:be[t],request:o,mediaType:t}),clearTimeout(Re),Re=setTimeout(function(){B(t,H),Re=null},Le.getAbandonLoadTimeout()))}}}var le=this.context,de=(0,j.default)(le).getInstance(),fe=de.log,ce=(0,g.default)(le).getInstance(),he=void 0,ge=void 0,pe=void 0,ve=void 0,me=void 0,ye=void 0,_e=void 0,Ee=void 0,Te=void 0,be=void 0,Se=void 0,Re=void 0,Ae=void 0,we=void 0,Ie=void 0,Oe=void 0,De=void 0,Pe=void 0,Ce=void 0,Me=void 0,Le=void 0,ke=void 0,xe=void 0,Ne=void 0,Fe=void 0,Ue=void 0,Be=void 0,je=void 0;return he={isPlayingAtTopQuality:Z,updateTopQualityIndex:J,getAverageThroughput:$,getBitrateList:W,getQualityForBitrate:z,getMaxAllowedBitrateFor:p,setMaxAllowedBitrateFor:m,getMaxAllowedRepresentationRatioFor:_,setMaxAllowedRepresentationRatioFor:E,getInitialBitrateFor:s,setInitialBitrateFor:l,getInitialRepresentationRatioFor:f,setInitialRepresentationRatioFor:h,setAutoSwitchBitrateFor:S,getAutoSwitchBitrateFor:T,setLimitBitrateByPortal:I,getLimitBitrateByPortal:A,getUsePixelRatioInLimitBitrateByPortal:D,setUsePixelRatioInLimitBitrateByPortal:C,getQualityFor:ee,getAbandonmentStateFor:Y,setAbandonmentStateFor:B,setPlaybackQuality:x,getPlaybackQuality:L,setAverageThroughput:X,getTopQualityIndexFor:a,setElementSize:oe,setWindowResizeEventCalled:ae,initialize:t,setConfig:n,reset:r},e(),he}Object.defineProperty(t,"__esModule",{value:!0});var a=r(191),o=n(a),s=r(51),u=n(s),l=r(5),d=n(l),f=r(32),c=n(f),h=r(3),g=n(h),p=r(2),v=n(p),m=r(22),y=n(m),_=r(1),E=n(_),T=r(33),b=n(T),S=r(13),R=n(S),A=r(18),w=n(A),I=r(71),O=n(I),D=r(7),P=n(D),C=r(173),M=n(C),L=r(172),k=n(L),x=r(10),N=n(x),F=r(11),U=n(F),B=r(4),j=n(B),G="abandonload",H="allowload",V=1e3,K=100,q=0;i.__dashjs_factory_name="AbrController";var Y=E.default.getSingletonFactory(i);Y.ABANDON_LOAD=G,Y.QUALITY_DEFAULT=q,t.default=Y,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){B={},P(),D()}function t(e,t){var r=d(e),i=n(e,t),a=[];return"fragmentedText"===e?void s(i[0]):(r||(r=F.getSavedMediaSettings(e),l(e,r)),void(i&&0!==i.length&&(r&&i.forEach(function(e){O(r,e)&&a.push(e)}),s(0===a.length?C(i):a.length>1?C(a):a[0]))))}function r(e){var t=e?e.type:null,r=e?e.streamInfo.id:null,n=d(t);return!(!e||!S(t))&&(B[r]=B[r]||M(),!(B[r][t].list.indexOf(e)>=0)&&(B[r][t].list.push(e),n&&O(n,e)&&!i(t,e.streamInfo)&&s(e),!0))}function n(e,t){if(!e||!t)return[];var r=t.id;return B[r]&&B[r][e]?B[r][e].list:[]}function i(e,t){return!e||!t||t&&!B[t.id]?null:B[t.id][e].current}function a(e){var t=e.type,r=e.streamInfo.id;return B[r]&&B[r][t]&&R(B[r][t].current,e)}function s(e){if(e){var t=e.type,r=e.streamInfo,n=r.id,a=i(t,r);if(B[n]&&B[n][t]&&(!a||!R(e,a))){B[n][t].current=e,a&&x.trigger(o.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:e,switchMode:H[t]});var s=I(e);s&&B[n][t].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),F.setSavedMediaSettings(t,s))}}}function l(e,t){e&&t&&(j[e]=t)}function d(e){return e?j[e]:null}function f(e,t){var r=K.indexOf(t)!==-1;return r?void(H[e]=t):void k("track switch mode is not supported: "+t)}function h(e){return H[e]}function p(e){var t=q.indexOf(e)!==-1;return t?void(G=e):void k("track selection mode is not supported: "+e)}function b(){return G||T}function S(e){return"audio"===e||"video"===e||"text"===e||"fragmentedText"===e}function R(e,t){var r=e.id===t.id,n=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return r&&n&&i&&a&&o&&s}function A(e){e&&e.errHandler&&(V=e.errHandler)}function w(){e(),N.resetEmbedded()}function I(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration},r=t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0;return r?t:null}function O(e,t){var r=!e.lang||e.lang===t.lang,n=!e.viewpoint||e.viewpoint===t.viewpoint,i=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],a=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],o=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return r&&n&&i&&a&&o}function D(){H={audio:y,video:m}}function P(){j={audio:null,video:null}}function C(e){var t=b(),r=[],n=function(e){var t,r=0,n=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t>r?(r=t,n=[e]):t===r&&n.push(e)}),n},i=function(e){var t,r=0,n=[];return e.forEach(function(e){t=e.representationCount,t>r?(r=t,n=[e]):t===r&&n.push(e)}),n};switch(t){case _:r=n(e),r.length>1&&(r=i(r));break;case E:r=i(e),r.length>1&&(r=n(e));break;default:k("track selection mode is not supported: "+t)}return r[0]}function M(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null}}}var L=this.context,k=(0,c.default)(L).getInstance().log,x=(0,u.default)(L).getInstance(),N=(0,g.default)(L).getInstance(),F=(0,v.default)(L).getInstance(),U=void 0,B=void 0,j=void 0,G=void 0,H=void 0,V=void 0,K=[y,m],q=[_,E];return U={initialize:e,checkInitialMediaSettingsForType:t,addTrack:r,getTracksFor:n,getCurrentTrackFor:i,isCurrentTrack:a,setTrack:s,setInitialSettings:l,getInitialSettings:d,setSwitchMode:f,getSwitchMode:h,setSelectionModeForInitialTrack:p,getSelectionModeForInitialTrack:b,isMultiTrackSupportedByType:S,isTracksEqual:R,setConfig:A,reset:w}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a),s=r(3),u=n(s),l=r(1),d=n(l),f=r(4),c=n(f),h=r(16),g=n(h),p=r(51),v=n(p),m="neverReplace",y="alwaysReplace",_="highestBitrate",E="widestRange",T=_;i.__dashjs_factory_name="MediaController";var b=d.default.getSingletonFactory(i);b.TRACK_SWITCH_MODE_NEVER_REPLACE=m,b.TRACK_SWITCH_MODE_ALWAYS_REPLACE=y,b.TRACK_SELECTION_MODE_HIGHEST_BITRATE=_,b.TRACK_SELECTION_MODE_WIDEST_RANGE=E,b.DEFAULT_INIT_TRACK_SELECTION_MODE=T,t.default=b,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,r){U=!1,B=null,Y=null,z=!1,W=NaN,Q=[],J=null,C||t();var n=r.getStreamProcessor();if(V=n.getMediaInfoArr(),K.setConfig({videoModel:X}),K.initialize(),q=!N.getIsTextTrack(e),k=(0,d.default)(D).getInstance(),H=(0,u.default)(D).getInstance(),H.setConfig({boxParser:k}),q){Y=n.getFragmentModel(),this.buffered=(0,c.default)(D).create(),Q=F.getTracksFor("fragmentedText",$.getActiveStreamInfo());for(var i=F.getCurrentTrackFor("fragmentedText",$.getActiveStreamInfo()),a=0;a<Q.length;a++)if(Q[a]===i){Z=a;break}}}function t(){ee=[],V=[],X=(0,y.default)(D).getInstance(),K=(0,E.default)(D).getInstance(),K.setConfig({videoModel:X}),K.initialize(),k=(0,d.default)(D).getInstance(),H=(0,u.default)(D).getInstance(),H.setConfig({boxParser:k}),q=!1,Z=null,te=!1,re=0,ae=[],ie=[],ne=null,C=!0}function r(e,t){function r(e,t){var r=new o.default,n={subtitle:"subtitles",caption:"captions"},i=function(){var e=t.roles.length>0?n[t.roles[0]]:n.caption;return e=e===n.caption||e===n.subtitle?e:n.caption},a=function(){var e=!1;return t.codec&&t.codec.search("stpp")>=0&&(e=!0),t.mimeType&&t.mimeType.search("ttml")>=0&&(e=!0),e};r.captionData=e,r.lang=t.lang,r.label=t.id,r.index=t.index,r.isTTML=a(),r.video=X.getElement(),r.defaultTrack=w(t),r.isFragmented=q,r.isEmbedded=!!t.isEmbedded,r.kind=i();var s=(V?V.length:0)+ee.length;K.addTextTrack(r,s)}var i,a,s,u,l,d,f,c=t.mediaInfo,h=c.type,p=c.mimeType,v=c.codec||p;if(!v)return void P("No text type defined");if("fragmentedText"===h)if(z)if(d=H.getSamplesInfo(e),a=d.sampleList,!J&&a.length>0&&(J=a[0].cts-t.start*W),v.search("stpp")>=0)for(B=null!==B?B:I(v),s=0;s<a.length;s++){var m=a[s],y=m.cts,_=y-J;this.buffered.add(_/W,(_+m.duration)/W);var E=new DataView(e,m.offset,m.subSizes[0]);f=b.default.Utils.dataViewToString(E,"utf-8");var T=[],S=m.offset+m.subSizes[0];for(u=1;u<m.subSizes.length;u++){var A=new Uint8Array(e,S,m.subSizes[u]),O=String.fromCharCode.apply(null,A);T.push(O),S+=m.subSizes[u]}try{i=B.parse(f,y/W,(y+m.duration)/W,T),K.addCaptions(Z,J/W,i)}catch(e){P("TTML parser error: "+e.message)}}else{var D=[];for(s=0;s<a.length;s++){var C=a[s];C.cts-=J,this.buffered.add(C.cts/W,(C.cts+C.duration)/W);var M=e.slice(C.offset,C.offset+C.size),L=b.default.parseBuffer(M);for(u=0;u<L.boxes.length;u++){var k=L.boxes[u];if(P("VTT box1: "+k.type),"vtte"!==k.type&&"vttc"===k.type)for(P("VTT vttc boxes.length = "+k.boxes.length),l=0;l<k.boxes.length;l++){var N=k.boxes[l];if(P("VTT box2: "+N.type),"payl"===N.type){var F=N.cue_text;P("VTT cue_text = "+F);var U=C.cts/W,j=(C.cts+C.duration)/W;D.push({start:U,end:j,data:F,styles:{}}),P("VTT "+U+"-"+j+" : "+F)}}}}D.length>0&&K.addCaptions(Z,0,D)}else{for(z=!0,s=0;s<V.length;s++)r(null,V[s]);W=H.getMediaTimescaleFromMoov(e)}else if("text"===h){var E=new DataView(e,0,e.byteLength);f=b.default.Utils.dataViewToString(E,"utf-8");try{i=I(v).parse(f),r(i,c)}catch(e){x.timedTextError(e,"parse",f)}}else if("video"===h)if("InitializationSegment"===t.segmentType){if(0===re)for(re=H.getMediaTimescaleFromMoov(e),s=0;s<ee.length;s++)r(null,ee[s])}else{if(0===re)return void P("CEA-608: No timescale for embeddedTextTrack yet");var G=function(e,t){function r(e,r,n){var i=null;if(X.getTTMLRenderingDiv())i=g(X.getElement(),e,r,n);else{var a=n.getDisplayText();i=[{start:e,end:r,data:a,styles:{}}]}i&&K.addCaptions(t,0,i)}return r};d=H.getSamplesInfo(e);var Y=d.sequenceNumber;if(!ae[0]&&!ae[1]){var Q=void 0,$=void 0,te=void 0;for(s=0;s<ee.length;s++){if("CC1"===ee[s].id?(Q=0,te=K.getTrackIdxForId("CC1")):"CC3"===ee[s].id&&(Q=1,te=K.getTrackIdxForId("CC3")),te===-1)return void P("CEA-608: data before track is ready.");$=G(this,te),ae[s]=new R.default.Cea608Parser(s,{newCue:$},null)}}if(re&&ie.indexOf(Y)==-1){if(null!==ne&&Y!==ne+1)for(s=0;s<ae.length;s++)ae[s]&&ae[s].reset();for(var oe=n(e),se=0;se<ae.length;se++){var ue=oe.fields[se],le=ae[se];if(le){for(s=0;s<ue.length;s++)le.addData(ue[s][0]/re,ue[s][1]);oe.endTime&&le.cueSplitAtTime(oe.endTime/re)}}ne=Y,ie.push(Y)}}}function n(e){var t=function(e,t,r){var n=e.length;if(n>0){if(t>=e[n-1][0])e.push([t,r]);else for(var i=n-1;i>=0;i--)if(t<e[i][0]){e.splice(i,0,[t,r]);break}}else e.push([t,r])},r=k.parse(e),n=r.getBox("moof"),i=r.getBox("tfdt"),a=r.getBox("tfhd"),o=r.getBoxes("trun"),s=null;if(0===o.length)return null;s=o[0],o.length>1&&P("Warning: Too many truns");for(var u=n.offset+s.data_offset,l=s.sample_count,d=u,f=i.baseMediaDecodeTime,c=new DataView(e),h={startTime:null,endTime:null,fields:[[],[]]},g=0,p=0;p<l;p++){var v=s.samples[p];void 0===v.sample_duration&&(v.sample_duration=a.default_sample_duration),void 0===v.sample_size&&(v.sample_size=a.default_sample_size),void 0===v.sample_composition_time_offset&&(v.sample_composition_time_offset=0);for(var m=f+g+v.sample_composition_time_offset,y=R.default.findCea608Nalus(c,d,v.sample_size),_=0;_<y.length;_++)for(var E=R.default.extractCea608DataFromRange(c,y[_]),T=0;T<2;T++)E[T].length>0&&t(h.fields[T],m,E[T]);g+=v.sample_duration,d+=v.sample_size}var b=f+g;return h.startTime=f,h.endTime=b,h}function i(e){for(var t="",r=0;r<e.length;++r){var n=e[r];t+=n.uchar}var i=t.length,a=t.replace(/^\s+/,"").length;return i-a}function a(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function s(e){return"red"==e?"rgb(255, 0, 0)":"green"==e?"rgb(0, 255, 0)":"blue"==e?"rgb(0, 0, 255)":"cyan"==e?"rgb(0, 255, 255)":"magenta"==e?"rgb(255, 0, 255)":"yellow"==e?"rgb(255, 255, 0)":"white"==e?"rgb(255, 255, 255)":"black"==e?"rgb(0, 0, 0)":e}function l(e,t){var r=e.videoHeight/15;return t?"font-size: "+r+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?s(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?s(t.background):"transparent")+";":"font-size: "+r+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function f(e){var t=e.replace(/^\s+/g,"");return t}function h(e){var t=e.replace(/\s+$/g,"");return t}function g(e,t,r,n){var o=null,s=null,u=!1,d=-1,c={start:t,end:r,spans:[]},g="style_cea608_white_black",p={},v={},m=[],y=void 0,_=void 0;for(y=0;y<15;++y){var E=n.rows[y],T="",b=null;if(!1===E.isEmpty()){var S=i(E.chars);null===o&&(o={x:S,y1:y,y2:y+1,p:[]}),S!==d&&u&&(o.p.push(c),c={start:t,end:r,spans:[]},o.y2=y,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===p.hasOwnProperty(o.name)?(m.push(o),p[o.name]=o):(s=p[o.name],s.p.contat(o.p)),o={x:S,y1:y,y2:y+1,p:[]});for(var R=0;R<E.chars.length;++R){var A=E.chars[R],w=A.penState;if(null===b||!w.equals(b)){T.trim().length>0&&(c.spans.push({name:g,line:T,row:y}),T="");var I="style_cea608_"+w.foreground+"_"+w.background;w.underline&&(I+="_underline"),w.italics&&(I+="_italics"),v.hasOwnProperty(I)||(v[I]=JSON.parse(JSON.stringify(w))),b=w,g=I}T+=A.uchar}T.trim().length>0&&c.spans.push({name:g,line:T,row:y}),u=!0,d=S}else u=!1,d=-1,o&&(o.p.push(c),c={start:t,end:r,spans:[]},o.y2=y,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===p.hasOwnProperty(o.name)?(m.push(o),p[o.name]=o):(s=p[o.name],s.p.contat(o.p)),o=null)}o&&(o.p.push(c),o.y2=y+1,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===p.hasOwnProperty(o.name)?(m.push(o),p[o.name]=o):(s=p[o.name],s.p.contat(o.p)),o=null);var O=[];for(y=0;y<m.length;++y){var D=m[y],P="sub_cea608_"+M++,C=document.createElement("div");C.id=P;var L=a(D);C.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+L;var k=document.createElement("div");k.className="paragraph bodyStyle",k.style.cssText=l(e);var x=document.createElement("div");x.className="cueUniWrapper",x.style.cssText="unicode-bidi: normal; direction: ltr;";for(var N=0;N<D.p.length;++N){var F=D.p[N],U=0;for(_=0;_<F.spans.length;++_){var B=F.spans[_];if(B.line.length>0){if(0!==_&&U!=B.row){var j=document.createElement("br");j.className="lineBreak",x.appendChild(j)}var G=!1;U===B.row&&(G=!0),U=B.row;var H=v[B.name],V=document.createElement("span");V.className="spanPadding "+B.name+" customSpanColor",V.style.cssText=l(e,H),0!==_&&G?_===F.spans.length-1?V.textContent=h(B.line):V.textContent=B.line:0===_&&F.spans.length>1&&B.row===F.spans[1].row?V.textContent=f(B.line):V.textContent=B.line.trim(),x.appendChild(V)}}}k.appendChild(x),C.appendChild(k);var K={bodyStyle:["%",90]};for(_ in v)v.hasOwnProperty(_)&&(K[_]=["%",90]);O.push({type:"html",start:t,end:r,cueHTMLElement:C,cueID:P,cellResolution:[32,15],isFromCEA608:!0,regions:m,regionID:D.name,videoHeight:e.videoHeight,videoWidth:e.videoWidth,fontSize:K,lineHeight:{},linePadding:{}})}return O}function p(){K.deleteAllTextTracks(),U=!1,B=null,H=null,V=null,K=null,q=!1,Y=null,z=!1,W=NaN,Q=[],X=null,$=null,C=!1,ee=null}function m(e){C||t(),"CC1"===e.id||"CC3"===e.id?ee.push(e):P("Warning: Embedded track "+e.id+" not supported!")}function _(){C=!1,ee=[],ae=[null,null],ie=[],ne=null}function T(){return U}function S(e){e&&(e.errHandler&&(x=e.errHandler),e.dashManifestModel&&(N=e.dashManifestModel),e.mediaController&&(F=e.mediaController),e.videoModel&&(X=e.videoModel),e.streamController&&($=e.streamController),e.textTracks&&(K=e.textTracks),e.VTTParser&&(j=e.VTTParser),e.TTMLParser&&(G=e.TTMLParser))}function A(){for(var e=X.getElement(),t=e.textTracks,r=t.length,n=r-ee.length,i=K.getCurrentTrackIdx(),a=0;a<r;a++){var o=t[a];if(U="showing"!==o.mode,"showing"===o.mode){if(i!==a&&(K.setCurrentTrackIdx(a),K.addCaptions(a,0,null),q&&a<n)){var s=F.getCurrentTrackFor("fragmentedText",$.getActiveStreamInfo()),u=Q[a];u!==s&&(Y.abortRequests(),K.deleteTrackCues(s),F.setTrack(u),Z=a)}break}}U&&K.setCurrentTrackIdx(-1)}function w(e){var t=!1;return ee.length>1&&e.isEmbedded?t=e.id&&"CC1"===e.id:1===ee.length?e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===ee.length&&(t=e.index===V[0].index),t}function I(e){var t;return e.search("vtt")>=0?t=j:(e.search("ttml")>=0||e.search("stpp")>=0)&&(t=G,t.setConfig({videoModel:X})),t}function O(){return K.getCurrentTrackIdx()}var D=this.context,P=(0,v.default)(D).getInstance().log,C=!1,M=0,L=void 0,k=void 0,x=void 0,N=void 0,F=void 0,U=void 0,B=void 0,j=void 0,G=void 0,H=void 0,V=void 0,K=void 0,q=void 0,Y=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,$=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,re=void 0,ne=void 0,ie=void 0,ae=void 0;return L={initialize:e,append:r,abort:p,getCurrentTrackIdx:O,getAllTracksAreDisabled:T,setTextTrack:A,setConfig:S,addEmbeddedTrack:m,resetEmbedded:_}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(199),o=n(a),s=r(114),u=n(s),l=r(50),d=n(l),f=r(75),c=n(f),h=r(1),g=n(h),p=r(4),v=n(p),m=r(18),y=n(m),_=r(43),E=n(_),T=r(79),b=n(T),S=r(57),R=n(S);
i.__dashjs_factory_name="TextSourceBuffer",t.default=g.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){ge=c.default.QUALITY_DEFAULT,pe=!1,ve=0,me=Number.POSITIVE_INFINITY,_e=0,Ee=Number.POSITIVE_INFINITY,be=null,Se=P,Ae=0,we=!1,Ie=!1,Oe=!1,De=!1}function r(e,t,r){Te=e,J(t),Ce=r,ke=(0,u.default)(re).getInstance(),Pe=(0,g.default)(re).getInstance(),Me=(0,c.default)(re).getInstance(),xe=(0,O.default)(re).getInstance(),Le=Ce.getScheduleController(),ge=Me.getQualityFor(Te,Ce.getStreamInfo()),ie.on(E.default.DATA_UPDATE_COMPLETED,j,this),ie.on(E.default.INIT_FRAGMENT_LOADED,a,this),ie.on(E.default.MEDIA_FRAGMENT_LOADED,l,this),ie.on(E.default.QUALITY_CHANGE_REQUESTED,p,this),ie.on(E.default.STREAM_COMPLETED,G,this),ie.on(E.default.PLAYBACK_PROGRESS,_,this),ie.on(E.default.PLAYBACK_TIME_UPDATED,_,this),ie.on(E.default.PLAYBACK_RATE_CHANGED,K,this),ie.on(E.default.PLAYBACK_SEEKING,m,this),ie.on(E.default.WALLCLOCK_TIME_UPDATED,V,this),ie.on(E.default.CURRENT_TRACK_CHANGED,H,this,y.default.EVENT_PRIORITY_HIGH),ie.on(E.default.SOURCEBUFFER_APPEND_COMPLETED,h,this),ie.on(E.default.SOURCEBUFFER_REMOVE_COMPLETED,U,this)}function n(e){if(!e||!ye||!Ce)return null;var t=null;try{t=se.createSourceBuffer(ye,e),t&&t.hasOwnProperty("initialize")&&t.initialize(Te,this)}catch(e){ue.mediaSourceError("Error creating "+Te+" source buffer.")}return Q(t),B(Ce.getRepresentationInfoForQuality(ge).MSETimeOffset),t}function i(){return Ce.getStreamInfo().id===le.getActiveStreamInfo().id}function a(e){e.fragmentModel===Ce.getFragmentModel()&&(ne("Init fragment finished loading saving to",Te+"'s init cache"),xe.save(e.chunk),f(e.chunk))}function s(e,t){var r=xe.extract(e,Te,t);r?f(r):ie.trigger(E.default.INIT_REQUESTED,{sender:he})}function l(e){if(e.fragmentModel===Ce.getFragmentModel()){var t=e.chunk,r=t.bytes,n=t.quality,i=Ce.getRepresentationInfoForQuality(n),a=oe.getValue(),s=fe.getEventsFor(a,i.mediaInfo,Ce),u=fe.getEventsFor(a,i,Ce);if(s&&s.length>0||u&&u.length>0){var l=Ce.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,quality:n,index:t.index})[0],d=M(r,l,s,u);Ce.getEventController().addInbandEvents(d)}t.bytes=L(r),f(t)}}function f(e){Ie=!0,Re=e,se.append(be,e),"video"===e.mediaInfo.type&&e.mediaInfo.embeddedCaptions&&ce.append(e.bytes,e)}function h(e){if(be===e.buffer){if(e.error||!k())return e.error.code===d.default.QUOTA_EXCEEDED_ERROR_CODE&&(me=.8*se.getTotalBufferedTime(be)),void(e.error.code!==d.default.QUOTA_EXCEEDED_ERROR_CODE&&k()||(ie.trigger(E.default.QUOTA_EXCEEDED,{sender:he,criticalBufferLevel:me}),F(N())));isNaN(Re.index)||(_e=Math.max(Re.index,_e),R());var t=se.getAllRanges(be);if(t&&t.length>0)for(var r=0,n=t.length;r<n;r++)ne("Buffered Range for type:",Te,":",t.start(r)," - ",t.end(r));_(),Ie=!1,ie.trigger(E.default.BYTES_APPENDED,{sender:he,quality:Re.quality,startTime:Re.start,index:Re.index,bufferedRanges:t})}}function p(e){ge!==e.newQuality&&Te===e.mediaType&&Ce.getStreamInfo().id===e.streamInfo.id&&(B(Ce.getRepresentationInfoForQuality(e.newQuality).MSETimeOffset),ge=e.newQuality)}function m(){Ee=Number.POSITIVE_INFINITY,pe=!1,_()}function _(){T(),S()}function T(){ve=se.getBufferLength(be,Pe.getTime()),ie.trigger(E.default.BUFFER_LEVEL_UPDATED,{sender:he,bufferLevel:ve}),A()}function S(){i()&&(ae.addBufferState(Te,Se,Le.getBufferTarget()),ae.addBufferLevel(Te,new Date,1e3*ve))}function R(){var e=_e>=Ee-1;e&&!pe&&(pe=!0,ie.trigger(E.default.BUFFERING_COMPLETED,{sender:he,streamInfo:Ce.getStreamInfo()}))}function A(){I(ve<C&&!pe?P:D)}function I(e){Se===e||"fragmentedText"===Te&&ce.getAllTracksAreDisabled()||(Se=e,S(),ie.trigger(E.default.BUFFER_LEVEL_STATE_CHANGED,{sender:he,state:e,mediaType:Te,streamInfo:Ce.getStreamInfo()}),ie.trigger(e===D?E.default.BUFFER_LOADED:E.default.BUFFER_EMPTY,{mediaType:Te}),ne(e===D?"Got enough buffer to start.":"Waiting for more buffer before starting playback."))}function M(e,t,r,n){var i=Math.max(isNaN(t.startTime)?0:t.startTime,0),a=[],o=[];De=!1;for(var s=r.concat(n),u=0,l=s.length;u<l;u++)a[s[u].schemeIdUri]=s[u];for(var d=(0,b.default)(re).getInstance().parse(e),f=d.getBoxes("emsg"),u=0,l=f.length;u<l;u++){var c=fe.getEvent(f[u],a,i);c&&o.push(c)}return o}function L(e){if(!De)return e;for(var t=e.length,r=Math.pow(256,2),n=Math.pow(256,3),i=new Uint8Array(e.length),a=0,o=0;a<t;){var s=String.fromCharCode(e[a+4],e[a+5],e[a+6],e[a+7]),u=e[a]*n+e[a+1]*r+256*e[a+2]+1*e[a+3];if("emsg"!=s)for(var l=a;l<a+u;l++)i[o]=e[l],o++;a+=u}return i.subarray(0,o)}function k(){var e=se.getTotalBufferedTime(be);return e<me}function x(){if(be&&"fragmentedText"!==Te){var e=be.buffered.length?be.buffered.start(0):0,t=Pe.getTime()-e-ke.getBufferToKeep();t>0&&(ne("pruning buffer: "+t+" seconds."),Oe=!0,se.remove(be,0,Math.round(e+t),ye))}}function N(){if(!be)return null;var e=Pe.getTime(),t=Ce.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:e})[0],r=se.getBufferRange(be,e),n=t&&!isNaN(t.startTime)?t.startTime:Math.floor(e);return null===r&&be.buffered.length>0&&(n=be.buffered.end(be.buffered.length-1)),{start:be.buffered.start(0),end:n}}function F(e){e&&be&&se.remove(be,e.start,e.end,ye)}function U(e){be===e.buffer&&(Oe&&(Oe=!1),T(),ie.trigger(E.default.BUFFER_CLEARED,{sender:he,from:e.from,to:e.to,hasEnoughSpaceToAppend:k()}))}function B(e){be&&be.timestampOffset!==e&&!isNaN(e)&&(be.timestampOffset=e)}function j(e){e.sender.getStreamProcessor()!==Ce||e.error||B(e.currentRepresentation.MSETimeOffset)}function G(e){e.fragmentModel===Ce.getFragmentModel()&&(Ee=e.request.index,R())}function H(e){be&&e.newMediaInfo.type===Te&&e.newMediaInfo.streamInfo.id===Ce.getStreamInfo().id&&de.getSwitchMode(Te)===v.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&F(N())}function V(){Ae++;var e=Ae*(ke.getWallclockTimeUpdateInterval()/1e3);e>=ke.getBufferPruningInterval()&&!Ie&&(Ae=0,x())}function K(){A()}function q(){return Te}function Y(){return Ce}function z(e){Ce=e}function W(){return be}function Q(e){be=e}function X(){return ve}function $(){return me}function J(e){ye=e}function Z(){return ye}function ee(){return pe}function te(e){ie.off(E.default.DATA_UPDATE_COMPLETED,j,this),ie.off(E.default.QUALITY_CHANGE_REQUESTED,p,this),ie.off(E.default.INIT_FRAGMENT_LOADED,a,this),ie.off(E.default.MEDIA_FRAGMENT_LOADED,l,this),ie.off(E.default.STREAM_COMPLETED,G,this),ie.off(E.default.CURRENT_TRACK_CHANGED,H,this),ie.off(E.default.PLAYBACK_PROGRESS,_,this),ie.off(E.default.PLAYBACK_TIME_UPDATED,_,this),ie.off(E.default.PLAYBACK_RATE_CHANGED,K,this),ie.off(E.default.PLAYBACK_SEEKING,m,this),ie.off(E.default.WALLCLOCK_TIME_UPDATED,V,this),ie.off(E.default.SOURCEBUFFER_APPEND_COMPLETED,h,this),ie.off(E.default.SOURCEBUFFER_REMOVE_COMPLETED,U,this),me=Number.POSITIVE_INFINITY,Se=P,ge=c.default.QUALITY_DEFAULT,Ee=Number.POSITIVE_INFINITY,_e=0,Re=null,we=!1,pe=!1,Ie=!1,Oe=!1,Pe=null,Ce=null,Me=null,Le=null,e||(se.abort(ye,be),se.removeSourceBuffer(ye,be)),be=null}var re=this.context,ne=(0,w.default)(re).getInstance().log,ie=(0,y.default)(re).getInstance(),ae=e.metricsModel,oe=e.manifestModel,se=e.sourceBufferController,ue=e.errHandler,le=e.streamController,de=e.mediaController,fe=e.adapter,ce=e.textSourceBuffer,he=void 0,ge=void 0,pe=void 0,ve=void 0,me=void 0,ye=void 0,_e=void 0,Ee=void 0,Te=void 0,be=void 0,Se=void 0,Re=void 0,Ae=void 0,we=void 0,Ie=void 0,Oe=void 0,De=void 0,Pe=void 0,Ce=void 0,Me=void 0,Le=void 0,ke=void 0,xe=void 0;return he={initialize:r,createBuffer:n,getType:q,getStreamProcessor:Y,setStreamProcessor:z,getBuffer:W,setBuffer:Q,getBufferLevel:X,getCriticalBufferLevel:$,setMediaSource:J,getMediaSource:Z,getIsBufferingCompleted:ee,switchInitData:s,reset:te},t(),he}Object.defineProperty(t,"__esModule",{value:!0});var a=r(32),o=n(a),s=r(5),u=n(s),l=r(30),d=n(l),f=r(14),c=n(f),h=r(9),g=n(h),p=r(15),v=n(p),m=r(3),y=n(m),_=r(2),E=n(_),T=r(50),b=n(T),S=r(1),R=n(S),A=r(4),w=n(A),I=r(76),O=n(I),D="bufferLoaded",P="bufferStalled",C=.5;i.__dashjs_factory_name="BufferController";var M=R.default.getClassFactory(i);M.BUFFER_LOADED=D,M.BUFFER_EMPTY=P,t.default=M,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){b=[]}function t(){_.playbackRate=S||1,_.removeEventListener("canplay",t)}function r(e){_&&(_.readyState<=2&&e>0?_.addEventListener("canplay",t):_.playbackRate=e)}function n(e){if(_.currentTime!=e)try{_.currentTime=e}catch(t){0===_.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout(function(){_.currentTime=e},400)}}function i(){return _}function a(e){_=e,_.preload="auto"}function o(e){e?_.src=e:(_.removeAttribute("src"),_.load())}function s(){return _.src}function u(){return T}function l(e){T=e}function d(){return E}function f(e){E=e,E.style.position="absolute",E.style.display="flex",E.style.overflow="hidden",E.style.pointerEvents="none",E.style.top=0,E.style.left=0}function c(e,t){v(e,t)}function h(){return b.length>0}function g(e){var t=void 0;null===e||_.seeking||b.indexOf(e)!==-1||(b.push(e),1===b.length&&(t=document.createEvent("Event"),t.initEvent("waiting",!0,!1),S=_.playbackRate,r(0),_.dispatchEvent(t)))}function p(e){var t=b.indexOf(e),n=void 0;null!==e&&(t!==-1&&b.splice(t,1),h()===!1&&0===_.playbackRate&&(r(S||1),_.paused||(n=document.createEvent("Event"),n.initEvent("playing",!0,!1),_.dispatchEvent(n))))}function v(e,t){t?g(e):p(e)}function m(){var e="webkitDroppedFrameCount"in _&&"webkitDecodedFrameCount"in _,t="getVideoPlaybackQuality"in _,r=null;return t?r=_.getVideoPlaybackQuality():e&&(r={droppedVideoFrames:_.webkitDroppedFrameCount,totalVideoFrames:_.webkitDroppedFrameCount+_.webkitDecodedFrameCount,creationTime:new Date}),r}var y=void 0,_=void 0,E=void 0,T=void 0,b=void 0,S=void 0;return y={initialize:e,setCurrentTime:n,setStallState:c,getElement:i,setElement:a,setSource:o,getSource:s,getVideoContainer:u,setVideoContainer:l,getTTMLRenderingDiv:d,setTTMLRenderingDiv:f,getPlaybackQuality:m}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="VideoModel",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer"};n.ACTION_DOWNLOAD="download",n.ACTION_COMPLETE="complete",t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(){}function i(e){try{return e.then}catch(e){return m=e,y}}function a(e,t){try{return e(t)}catch(e){return m=e,y}}function o(e,t,r){try{e(t,r)}catch(e){return m=e,y}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==n&&p(e,this)}function u(e,t,r){return new e.constructor(function(i,a){var o=new s(n);o.then(i,a),l(e,new g(t,r,o))})}function l(e,t){for(;3===e._65;)e=e._55;return s._37&&s._37(e),0===e._65?0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t):void d(e,t)}function d(e,t){v(function(){var r=1===e._65?t.onFulfilled:t.onRejected;if(null===r)return void(1===e._65?f(t.promise,e._55):c(t.promise,e._55));var n=a(r,e._55);n===y?c(t.promise,m):f(t.promise,n)})}function f(e,t){if(t===e)return c(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=i(t);if(r===y)return c(e,m);if(r===e.then&&t instanceof s)return e._65=3,e._55=t,void h(e);if("function"==typeof r)return void p(r.bind(t),e)}e._65=1,e._55=t,h(e)}function c(e,t){e._65=2,e._55=t,s._87&&s._87(e,t),h(e)}function h(e){if(1===e._40&&(l(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)l(e,e._72[t]);e._72=null}}function g(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function p(e,t){var r=!1,n=o(e,function(e){r||(r=!0,f(t,e))},function(e){r||(r=!0,c(t,e))});r||n!==y||(r=!0,c(t,m))}var v=r(53),m=null,y={};e.exports=s,s._37=null,s._87=null,s._61=n,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var r=new s(n);return l(this,new g(e,t,r)),r}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e){e&&e.dashManifestModel&&(k=e.dashManifestModel)}function t(){x=[],N={}}function r(e,t){return t.getRepresentationForQuality(e.quality)}function n(e){return N?N[e.streamInfo.id][e.index]:null}function i(e){for(var t=x.length,r=0;r<t;r++){var n=x[r];if(e.id===n.id)return n}return null}function a(e,t){var r=new s.default,n=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],i=k.getRepresentationFor(t.index,n);return r.id=t.id,r.quality=t.index,r.bandwidth=k.getBandwidth(i),r.DVRWindow=t.segmentAvailabilityRange,r.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),r.MSETimeOffset=t.MSETimeOffset,r.useCalculatedLiveEdgeTime=t.useCalculatedLiveEdgeTime,r.mediaInfo=o(e,t.adaptation),r}function o(e,t){var r,n=new l.default,i=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];return n.id=t.id,n.index=t.index,n.type=t.type,n.streamInfo=d(e,t.period),n.representationCount=k.getRepresentationCount(i),n.lang=k.getLanguageForAdaptation(i),r=k.getViewpointForAdaptation(i),n.viewpoint=r?r.value:void 0,n.accessibility=k.getAccessibilityForAdaptation(i).map(function(e){var t=e.value,r=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&"undefined"!=typeof _.default&&(r=t?"cea-608:"+t:"cea-608",n.embeddedCaptions=!0),r}),n.audioChannelConfiguration=k.getAudioChannelConfigurationForAdaptation(i).map(function(e){return e.value}),n.roles=k.getRolesForAdaptation(i).map(function(e){return e.value}),n.codec=k.getCodec(i),n.mimeType=k.getMimeType(i),n.contentProtection=k.getContentProtectionData(i),n.bitrateList=k.getBitrateListForAdaptation(i),n.contentProtection&&n.contentProtection.forEach(function(e){e.KID=k.getKID(e)}),n.isText=k.getIsTextTrack(n.mimeType),n}function u(e,t,r){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type="embeddedText",e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=t+" "+r,e.roles=["caption"]}function d(e,t){var r=new f.default,n=1;return r.id=t.id,r.index=t.index,r.start=t.start,r.duration=t.duration,r.manifestInfo=c(e,t.mpd),r.isLast=1===e.Period_asArray.length||Math.abs(r.start+r.duration-r.manifestInfo.duration)<n,r.isFirst=1===e.Period_asArray.length||k.getRegularPeriods(e,k.getMpd(e))[0].id===t.id,r}function c(e,t){var r=new h.default;return r.DVRWindowSize=t.timeShiftBufferDepth,r.loadedTime=t.manifest.loadedTime,r.availableFrom=t.availabilityStartTime,r.minBufferTime=t.manifest.minBufferTime,r.maxFragmentDuration=t.maxSegmentDuration,r.duration=k.getDuration(e),r.isDynamic=k.getIsDynamic(e),r}function g(e,t,r){var n=k.getAdaptationForType(e,t.index,r,t);if(!n)return null;var a=i(t),s=a.id,u=k.getIndexForAdaptation(n,e,t.index);return N[s]=N[s]||k.getAdaptationsForPeriod(e,a),o(e,N[s][u])}function v(e,t,r){var n,a,s,l,d,f,c=i(t),h=c.id,g=k.getAdaptationsForType(e,t.index,"embeddedText"!==r?r:"video"),p=[];if(!g)return p;for(N[h]=N[h]||k.getAdaptationsForPeriod(e,c),l=0,f=g.length;l<f;l++){if(n=g[l],s=k.getIndexForAdaptation(n,e,t.index),a=o(e,N[h][s]),"embeddedText"===r){var v=a.accessibility.length;for(d=0;d<v;d++)if(a){var m=a.accessibility[d];if(0===m.indexOf("cea-608:")){var y=m.substring(8),_=y.split(";");if("CC"===_[0].substring(0,2))for(d=0;d<_.length;d++)a||(a=o.call(this,e,N[h][s])),u(a,_[d].substring(0,3),_[d].substring(4)),p.push(a),a=null;else for(d=0;d<_.length;d++)a||(a=o.call(this,e,N[h][s])),u(a,"CC"+(d+1),_[d]),p.push(a),a=null}else 0===m.indexOf("cea-608")&&(u(a,"CC1","eng"),p.push(a),a=null)}}a&&"embeddedText"!==r&&p.push(a)}return p}function m(e){if(!e)return null;var t=[],r=k.getMpd(e);x=k.getRegularPeriods(e,r),N={};for(var n=0,i=x.length;n<i;n++)t.push(d(e,x[n]));return t}function y(e){var t=k.getMpd(e);return c(e,t)}function E(e,t){var r=e.getRepresentationController().getRepresentationForQuality(t);return e.getIndexHandler().getInitRequest(r)}function b(e,t){var n=r(t,e.getRepresentationController());return e.getIndexHandler().getNextSegmentRequest(n)}function S(e,t,n,i){var a=r(t,e.getRepresentationController());return e.getIndexHandler().getSegmentRequestForTime(a,n,i)}function R(e,t,n){var i=r(t,e.getRepresentationController());return e.getIndexHandler().generateSegmentRequestForTime(i,n)}function A(e){return e.getIndexHandler().getCurrentTime()}function w(e,t){return e.getIndexHandler().setCurrentTime(t)}function I(e,t){var r,a,o=i(t.getStreamInfo()),s=t.getMediaInfo(),u=n(s),l=t.getType();r=s.id,a=r?k.getAdaptationForId(r,e,o.index):k.getAdaptationForIndex(s.index,e,o.index),t.getRepresentationController().updateData(a,u,l)}function O(e,t,r){var n=t.getRepresentationForQuality(r);return n?a(e,n):null}function D(e,t){var r=t.getCurrentRepresentation();return r?a(e,r):null}function P(e,t,r){var n=new p.default,i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,d=e.message_data,f=r*o+s;return t[i]?(n.eventStream=t[i],n.eventStream.value=a,n.eventStream.timescale=o,n.duration=u,n.id=l,n.presentationTime=f,n.messageData=d,n.presentationTimeDelta=s,n):null}function C(e,t,a){var o=[];return t instanceof f.default?o=k.getEventsForPeriod(e,i(t)):t instanceof l.default?o=k.getEventStreamForAdaptationSet(e,n(t)):t instanceof s.default&&(o=k.getEventStreamForRepresentation(e,r(t,a.getRepresentationController()))),o}function M(){x=[],N={}}var L=void 0,k=void 0,x=void 0,N=void 0;return L={initialize:t,convertDataToTrack:a,convertDataToMedia:o,convertDataToStream:d,getDataForTrack:r,getDataForMedia:n,getDataForStream:i,getStreamsInfo:m,getManifestInfo:y,getMediaInfoForType:g,getAllMediaInfoForType:v,getCurrentRepresentationInfo:D,getRepresentationInfoForQuality:O,updateData:I,getInitRequest:E,getNextFragmentRequest:b,getFragmentRequestForTime:S,generateFragmentRequestForTime:R,getIndexHandlerTime:A,setIndexHandlerTime:w,getEventsFor:C,getEvent:P,setConfig:e,reset:M,metricsList:T}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(200),s=i(o),u=r(196),l=i(u),d=r(198),f=i(d),c=r(195),h=i(c),g=r(62),p=i(g),v=r(1),m=i(v),y=r(57),_=i(y),E=r(59),T=n(E);a.__dashjs_factory_name="DashAdapter",t.default=m.default.getSingletonFactory(a),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(27),u=n(s),l=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.STREAM_INITIALIZED="streamInitialized",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated"}return a(t,e),t}(u.default),d=new l;t.default=d,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){function t(){var e;p=[],v=[],m=[],e={},i(e,o.HTTPRequest.MPD_TYPE,c.default.DOWNLOAD_ERROR_ID_MANIFEST),i(e,o.HTTPRequest.XLINK_EXPANSION_TYPE,c.default.DOWNLOAD_ERROR_ID_XLINK),i(e,o.HTTPRequest.INIT_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_INITIALIZATION),i(e,o.HTTPRequest.MEDIA_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.INDEX_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.OTHER_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),y=e}function r(e,t){var n=e.request,i=new XMLHttpRequest,a=[],o=!0,s=!0,d=new Date,c=d,g=0,_=function(e){s=!1,n.requestStartDate=d,n.requestEndDate=new Date,n.firstByteDate=n.firstByteDate||d,n.checkExistenceOnly||f.addHttpRequest(n.mediaType,null,n.type,n.url,i.responseURL||null,n.serviceLocation||null,n.range||null,n.requestStartDate,n.firstByteDate,n.requestEndDate,i.status,n.duration,i.getAllResponseHeaders(),e?a:null)},E=function(){p.indexOf(i)!==-1&&(p.splice(p.indexOf(i),1),s&&(_(!1),t>0?(t--,m.push(setTimeout(function(){r(e,t)},u.getRetryIntervalForType(n.type)))):(l.downloadError(y[n.type],n.url,n),e.error&&e.error(n,"error",i.statusText),e.complete&&e.complete(n,i.statusText))))},T=function(t){var r=new Date;o&&(o=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(n.firstByteDate=r)),t.lengthComputable&&(n.bytesLoaded=t.loaded,n.bytesTotal=t.total),a.push({s:c,d:r.getTime()-c.getTime(),b:[t.loaded?t.loaded-g:0]}),c=r,g=t.loaded,e.progress&&e.progress()},b=function(){i.status>=200&&i.status<=299&&(_(!0),e.success&&e.success(i.response,i.statusText,i),e.complete&&e.complete(n,i.statusText))};try{var S=h.modifyRequestURL(n.url),R=n.checkExistenceOnly?"HEAD":"GET";i.open(R,S,!0),n.responseType&&(i.responseType=n.responseType),n.range&&i.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=d),i=h.modifyRequestHeader(i),i.withCredentials=u.getXHRWithCredentialsForType(n.type),i.onload=b,i.onloadend=E,i.onerror=E,i.onprogress=T;var A=(new Date).getTime();isNaN(n.delayLoadingTime)||A>=n.delayLoadingTime?(p.push(i),i.send()):!function(){var e={xhr:i};v.push(e),e.delayTimeout=setTimeout(function(){if(v.indexOf(e)!==-1){v.splice(v.indexOf(e),1);try{p.push(e.xhr),e.xhr.send()}catch(t){e.xhr.onerror()}}},n.delayLoadingTime-A)}()}catch(e){i.onerror()}}function n(e){e.request&&r(e,u.getRetryAttemptsForType(e.request.type))}function a(){m.forEach(function(e){return clearTimeout(e)}),m=[],v.forEach(function(e){return clearTimeout(e.delayTimeout)}),v=[],p.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}),p=[]}var s=this.context,u=(0,d.default)(s).getInstance(),l=e.errHandler,f=e.metricsModel,h=e.requestModifier,g=void 0,p=void 0,v=void 0,m=void 0,y=void 0;return g={load:n,abort:a},t(),g}Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),s=r(1),u=n(s),l=r(5),d=n(l),f=r(12),c=n(f);a.__dashjs_factory_name="XHRLoader";var h=u.default.getClassFactory(a);t.default=h,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){ce=null,de=[],be=(0,E.default)(q).getInstance(),ge=!0,pe=!1,ve=!1,Se=!1,Re=!0,Ae=null,me=!1,ye=!1}function t(e,t){ge=e,he=t,le.initialize(),se=(0,I.default)(q).getInstance(),X=(0,d.default)(q).getInstance(),X.setConfig({log:Y,manifestModel:J,dashManifestModel:Z}),X.initialize($),Ee=(0,y.default)(q).getInstance(),Te=(0,o.default)(q).getInstance(),Te.setConfig({streamController:W,timelineConverter:le,metricsModel:te,dashMetrics:re,manifestModel:J,dashManifestModel:Z,adapter:ee,videoModel:Ee}),z.on(g.default.TIME_SYNCHRONIZATION_COMPLETED,D,this),z.on(g.default.PLAYBACK_SEEKING,n,this),z.on(g.default.PLAYBACK_TIME_UPDATED,r,this),z.on(g.default.PLAYBACK_ENDED,p,this),z.on(g.default.PLAYBACK_ERROR,x,this),z.on(g.default.PLAYBACK_STARTED,i,this),z.on(g.default.PLAYBACK_PAUSED,a,this),z.on(g.default.MANIFEST_UPDATED,P,this),z.on(g.default.STREAM_BUFFERING_COMPLETED,s,this)}function r(e){if(C()){var t=Ee.getPlaybackQuality();t&&te.addDroppedFrames("video",t)}Te.isSeeking()||e.timeToEnd<=K&&p()}function n(e){var t=l(e.seekTime);t&&t!==fe?(L(S.PlayListTrace.END_OF_PERIOD_STOP_REASON),_(fe,t,e.seekTime)):L(S.PlayListTrace.USER_REQUEST_STOP_REASON),k(S.PlayList.SEEK_START_REASON)}function i(){Re?(Re=!1,k(S.PlayList.INITIAL_PLAYOUT_START_REASON)):Se&&(Se=!1,k(S.PlayList.RESUME_FROM_PAUSE_START_REASON))}function a(e){e.ended||(Se=!0,L(S.PlayListTrace.USER_REQUEST_STOP_REASON))}function s(){var e=F().isLast;_e&&e&&ie.signalEndOfStream(_e)}function l(e){var t=0,r=null,n=de.length;n>0&&(t+=de[0].getStartTime());for(var i=0;i<n;i++)if(r=de[i],t+=r.getDuration(),e<t)return r;return null}function f(e,t){for(var r=null,n=0,i=0,a=null,o=de.length,s=0;s<o;s++){if(r=de[s],i=r.getStartTime(),a=r.getDuration(),Number.isFinite(i)&&(n=i),r.getId()===t)return e-n;Number.isFinite(a)&&(n+=a)}return null}function h(){var e=[];return fe.getProcessors().forEach(function(t){e.push(t.getIndexHandler().getEarliestTime())}),Math.min.apply(Math,e)}function p(){var e=m();e&&_(fe,e,NaN),L(e?S.PlayListTrace.END_OF_PERIOD_STOP_REASON:S.PlayListTrace.END_OF_CONTENT_STOP_REASON)}function m(){if(fe){var e=function(){var e=fe.getStreamInfo().start,t=fe.getStreamInfo().duration;return{v:de.filter(function(r){return r.getStreamInfo().start===e+t})[0]}}();if("object"==typeof e)return e.v}}function _(e,t,r){!pe&&t&&e!==t&&(pe=!0,z.trigger(g.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),e&&e.deactivate(),fe=t,Te.initialize(fe.getStreamInfo()),we=M(),T(r))}function T(e){function t(){Y("MediaSource is open!"),window.URL.revokeObjectURL(r),_e.removeEventListener("sourceopen",t),_e.removeEventListener("webkitsourceopen",t),R(),b(e)}var r=void 0;_e?ie.detachMediaSource(Ee):_e=ie.createMediaSource(),_e.addEventListener("sourceopen",t,!1),_e.addEventListener("webkitsourceopen",t,!1),r=ie.attachMediaSource(_e,Ee),Y("MediaSource attached to element.  Waiting on open...")}function b(e){fe.activate(_e),Re||(isNaN(e)?!function(){var e=Te.getStreamStartTime(!0);fe.getProcessors().forEach(function(t){ee.setIndexHandlerTime(t,e)}),Te.seek(e)}():Te.seek(e)),fe.startEventController(),!ge&&Re||Te.play(),pe=!1,z.trigger(g.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:fe.getStreamInfo()})}function R(){var e=fe.getStreamInfo().manifestInfo.duration,t=ie.setDuration(_e,e);Y("Duration successfully set to: "+t)}function w(e){for(var t=0,r=de.length;t<r;t++)if(de[t].getId()===e.id)return de[t];return null}function O(e){try{var t=ee.getStreamsInfo(e);if(0===t.length)throw new Error("There are no streams");var r=re.getCurrentManifestUpdate(te.getMetricsFor("stream"));te.updateManifestUpdateInfo(r,{currentTime:Te.getTime(),buffered:Ee.getElement().buffered,presentationStartTime:t[0].start,clientTimeOffset:le.getClientTimeOffset()});for(var n=0,i=t.length;n<i;n++){var a=t[n],o=w(a);o?o.updateData(a):(o=(0,u.default)(q).create({manifestModel:J,manifestUpdater:X,adapter:ee,timelineConverter:le,capabilities:Q,errHandler:ue,baseURLController:oe}),de.push(o),o.initialize(a,ce)),te.addManifestUpdateStreamInfo(r,a.id,a.index,a.start,a.duration)}fe||_(null,de[0],NaN),z.trigger(g.default.STREAMS_COMPOSED)}catch(t){ue.manifestError(t.message,"nostreamscomposed",e),ye=!0,V()}}function D(){var e=J.getValue();ce&&(z.trigger(g.default.PROTECTION_CREATED,{controller:ce,manifest:e}),ce.setMediaElement(Ee.getElement()),he&&ce.setProtectionData(he)),O(e)}function P(e){if(e.error)ye=!0,V();else{var t,r,n=e.manifest,i=ee.getStreamsInfo(n)[0],a=ee.getMediaInfoForType(n,i,"video")||ee.getMediaInfoForType(n,i,"audio");a&&(t=ee.getDataForMedia(a),r=Z.getRepresentationsForAdaptation(n,t)[0].useCalculatedLiveEdgeTime,r&&(Y("SegmentTimeline detected using calculated Live Edge Time"),be.setUseManifestDateHeaderTimeSource(!1)));var o=Z.getUTCTimingSources(e.manifest),s=!Z.getIsDynamic(n)||r?o:o.concat(be.getUTCTimingSources()),u=(0,v.default)(q).getInstance().isManifestHTTPS();s.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===E.default.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(u?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),u?"https://":"http://"),Y("Matching default timing source protocol to manifest protocol: ",e.value))}),oe.initialize(n),ae.setConfig({metricsModel:te,dashMetrics:re}),ae.initialize(s,be.getUseManifestDateHeaderTimeSource())}}function C(){return void 0===we&&(we=M()),we}function M(){var e=!1;return fe.getProcessors().forEach(function(t){"video"===t.getMediaInfo().type&&(e=!0)}),e}function L(e,t){t=t||new Date,Ae&&(fe&&fe.getProcessors().forEach(function(r){var n=r.getScheduleController();n&&n.finalisePlayList(t,e)}),te.addPlayList(Ae),Ae=null)}function k(e){Ae=new S.PlayList,Ae.start=new Date,Ae.mstart=1e3*Te.getTime(),Ae.starttype=e,fe&&fe.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(Ae)})}function x(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}me=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),Y("Video Element Error: "+t),e.error&&Y(e.error),ue.mediaSourceError(t),V()}}function N(){return ge}function F(){return fe?fe.getStreamInfo():null}function U(e){return fe.getId()===e.id}function B(e){return de.filter(function(t){return t.getId()===e})[0]}function j(e){$.load(e)}function G(e){X.setManifest(e)}function H(e){e&&(e.capabilities&&(Q=e.capabilities),e.manifestLoader&&($=e.manifestLoader),e.manifestModel&&(J=e.manifestModel),e.dashManifestModel&&(Z=e.dashManifestModel),e.protectionController&&(ce=e.protectionController),e.adapter&&(ee=e.adapter),e.metricsModel&&(te=e.metricsModel),e.dashMetrics&&(re=e.dashMetrics),
e.liveEdgeFinder&&(ne=e.liveEdgeFinder),e.mediaSourceController&&(ie=e.mediaSourceController),e.timeSyncController&&(ae=e.timeSyncController),e.baseURLController&&(oe=e.baseURLController),e.errHandler&&(ue=e.errHandler),e.timelineConverter&&(le=e.timelineConverter))}function V(){ae.reset(),L(me||ye?S.PlayListTrace.FAILURE_STOP_REASON:S.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=de.length;e<t;e++){var o=de[e];o.reset(me)}de=[],z.off(g.default.PLAYBACK_TIME_UPDATED,r,this),z.off(g.default.PLAYBACK_SEEKING,n,this),z.off(g.default.PLAYBACK_ERROR,x,this),z.off(g.default.PLAYBACK_STARTED,i,this),z.off(g.default.PLAYBACK_PAUSED,a,this),z.off(g.default.PLAYBACK_ENDED,p,this),z.off(g.default.MANIFEST_UPDATED,P,this),z.off(g.default.STREAM_BUFFERING_COMPLETED,s,this),oe.reset(),X.reset(),te.clearAllCurrentMetrics(),J.setValue(null),$.reset(),le.reset(),ne.reset(),ee.reset(),se.reset(),pe=!1,ve=!1,fe=null,me=!1,ye=!1,we=void 0,Re=!0,Se=!1,_e&&(ie.detachMediaSource(Ee),_e=null),Ee=null,ce&&(ce.setMediaElement(null),ce=null,he=null,J.getValue()&&z.trigger(g.default.PROTECTION_DESTROYED,{data:J.getValue().url})),z.trigger(g.default.STREAM_TEARDOWN_COMPLETE)}var K=.1,q=this.context,Y=(0,A.default)(q).getInstance().log,z=(0,c.default)(q).getInstance(),W=void 0,Q=void 0,X=void 0,$=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,re=void 0,ne=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,ge=void 0,pe=void 0,ve=void 0,me=void 0,ye=void 0,_e=void 0,Ee=void 0,Te=void 0,be=void 0,Se=void 0,Re=void 0,Ae=void 0,we=void 0;return W={initialize:t,getAutoPlay:N,getActiveStreamInfo:F,isStreamActive:U,isVideoTrackPresent:C,getStreamById:B,getTimeRelativeToStreamId:f,load:j,loadWithManifest:G,getActiveStreamCommonEarliestTime:h,setConfig:H,reset:V},e(),W}Object.defineProperty(t,"__esModule",{value:!0});var a=r(9),o=n(a),s=r(127),u=n(s),l=r(125),d=n(l),f=r(3),c=n(f),h=r(2),g=n(h),p=r(44),v=n(p),m=r(18),y=n(m),_=r(5),E=n(_),T=r(1),b=n(T),S=r(78),R=r(4),A=n(R),w=r(76),I=n(w);i.__dashjs_factory_name="StreamController",t.default=b.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(38),s=n(o),u=function(){function e(){i(this,e)}return a(e,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,r=0;r<e.length;++r){var n=e[r];"urn:mpeg:dash:mp4protection:2011"===n.schemeIdUri.toLowerCase()&&"cenc"===n.value.toLowerCase()&&(t=n)}return t}},{key:"getPSSHData",value:function(e){var t=8,r=new DataView(e),n=r.getUint8(t);return t+=20,n>0&&(t+=4+16*r.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,r){var n=e.parsePSSHList(r);return n.hasOwnProperty(t.uuid.toLowerCase())?n[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e){return"pssh"in e?s.default.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e),r=!1,n={},i=0;!r;){var a,o,s,u,l,d=i;if(i>=t.buffer.byteLength)break;if(a=t.getUint32(i),o=i+a,i+=4,1886614376===t.getUint32(i))if(i+=4,s=t.getUint8(i),0===s||1===s){i++,i+=3,u="";var f,c;for(f=0;f<4;f++)c=t.getUint8(i+f).toString(16),u+=1===c.length?"0"+c:c;for(i+=4,u+="-",f=0;f<2;f++)c=t.getUint8(i+f).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",f=0;f<2;f++)c=t.getUint8(i+f).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",f=0;f<2;f++)c=t.getUint8(i+f).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",f=0;f<6;f++)c=t.getUint8(i+f).toString(16),u+=1===c.length?"0"+c:c;i+=6,u=u.toLowerCase(),l=t.getUint32(i),i+=4,n[u]=t.buffer.slice(d,o),i=o}else i=o;else i=o}return n}}]),e}();t.default=u,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){try{new window.URL("x","http://y");s=f}catch(e){}finally{s=s||c}}function t(e){var t=e.indexOf("/"),r=e.lastIndexOf("/");return t!==-1?r===t+1?e:(e.indexOf("?")!==-1&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,r+1)):""}function r(e){var t=e.match(d);return t?t[1]:""}function n(e){return!u.test(e)}function i(e){return n(e)&&"/"===e.charAt(0)}function a(e){return l.test(e)}function o(e,t){return s(e,t)}var s=void 0,u=/^[a-z][a-z0-9+\-.]*:/i,l=/^https?:\/\//i,d=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,f=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},c=function(e,a){var o=t;if(!a)return e;if(!n(e))return e;i(e)&&(o=r);var s=o(a),u="/"!==s.charAt(s.length-1)&&"/"!==e.charAt(0)?"/":"";return[s,e].join(u)};e();var h={parseBaseUrl:t,parseOrigin:r,isRelative:n,isPathAbsolute:i,isHTTPURL:a,resolve:o};return h}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="URLUtils",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){r(this,e)}return n(e,[{key:"extend",value:function(e,t){if(e){var r=!!t&&t.override,n=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!r||n&&e[i].indexOf("public_")===-1||(this[i]=e[i])}}}]),e}();t.default=i,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n){r(this,e),this._test=t,this._converter=n}return n(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(;e.length<t;)e="0"+e;return e}function a(e,t){return e.representation.startNumber+t}function o(e,t,r){var n,a,o,s,u,l,d="%0",f=t.length,c=d.length;if(!e)return e;for(;;){if(n=e.indexOf("$"+t),n<0)return e;if(a=e.indexOf("$",n+f),a<0)return e;if(o=e.indexOf(d,n+f),o>n&&o<a)switch(s=e.charAt(a-1),u=parseInt(e.substring(o+c,a-1),10),s){case"d":case"i":case"u":l=i(r.toString(),u);break;case"x":l=i(r.toString(16),u);break;case"X":l=i(r.toString(16),u).toUpperCase();break;case"o":l=i(r.toString(8),u);break;default:return e}else l=r;e=e.substring(0,n)+l+e.substring(a+1)}}function s(e,t,r,n){var i,o,s,u;return o=r.segmentDuration,isNaN(o)&&(o=r.adaptation.period.duration),s=r.adaptation.period.start+n*o,u=s+o,i=new h.default,i.representation=r,i.duration=o,i.presentationStartTime=s,i.mediaStartTime=e.calcMediaTimeFromPresentationTime(i.presentationStartTime,r),i.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(i.presentationStartTime,r.adaptation.period.mpd,t),i.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(u,r.adaptation.period.mpd,t),i.wallStartTime=e.calcWallTimeForSegment(i,t),i.replacementNumber=a(i,n),i.availabilityIdx=n,i}function u(e,t,r,n,i,s,u,l,d){var f,c,g,p=n/s,v=Math.min(i/s,r.adaptation.period.mpd.maxSegmentDuration);return f=e.calcPresentationTimeFromMediaTime(p,r),c=f+v,g=new h.default,g.representation=r,g.duration=v,g.mediaStartTime=p,g.presentationStartTime=f,g.availabilityStartTime=r.adaptation.period.mpd.manifest.loadedTime,g.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(c,r.adaptation.period.mpd,t),g.wallStartTime=e.calcWallTimeForSegment(g,t),g.replacementTime=n,g.replacementNumber=a(g,d),u=o(u,"Number",g.replacementNumber),u=o(u,"Time",g.replacementTime),g.media=u,g.mediaRange=l,g.availabilityIdx=d,g}function l(e,t){if(!t||!t.segments)return null;var r,n,i=t.segments.length;if(e<i&&(r=t.segments[e],r&&r.availabilityIdx===e))return r;for(n=0;n<i;n++)if(r=t.segments[n],r&&r.availabilityIdx===e)return r;return null}function d(e,t,r,n,i){var a,o,s,u=2,l=i||10,d=0,f=Number.POSITIVE_INFINITY;return t&&!e.isTimeSyncCompleted()?s={start:d,end:f}:!t&&r||n<0?null:(a=Math.max(n-u,d),o=Math.min(n+l,f),s={start:a,end:o})}function f(e,t,r,n,i,a){var o,s,u,d=r.segmentDuration,f=r.adaptation.period.mpd.manifest.minBufferTime,c=r.segmentAvailabilityRange,h={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(r,c.start),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(r,c.end)},g=r.segments,p=2*d,v=a||Math.max(2*f,10*d),m=NaN,y=null;return h.start=Math.max(h.start,0),t&&!e.isTimeSyncCompleted()?(o=Math.floor(h.start/d),s=Math.floor(h.end/d),u={start:o,end:s}):(g&&g.length>0?(y=l(i,r),m=y?e.calcPeriodRelativeTimeFromMpdRelativeTime(r,y.presentationStartTime):i>0?i*d:e.calcPeriodRelativeTimeFromMpdRelativeTime(r,n)):m=i>0?i*d:t?h.end:h.start,o=Math.floor(Math.max(m-p,h.start)/d),s=Math.floor(Math.min(o+v/d,h.end/d)),u={start:o,end:s})}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceTokenForTemplate=o,t.getIndexBasedSegment=s,t.getTimeBasedSegment=u,t.getSegmentByIndex=l,t.decideSegmentListRangeForTimeline=d,t.decideSegmentListRangeForTemplate=f;var c=r(42),h=n(c)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var r=t.codec,n=null;try{if(r.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new R.default("not really supported");n=e.addSourceBuffer(r)}catch(e){if(!t.isText&&r.indexOf('codecs="stpp')===-1&&r.indexOf('codecs="wvtt')===-1)throw e;n=(0,o.default)(_).getInstance(),n.setConfig({errHandler:(0,c.default)(_).getInstance(),adapter:(0,d.default)(_).getInstance(),dashManifestModel:A,mediaController:(0,u.default)(_).getInstance(),videoModel:(0,b.default)(_).getInstance(),streamController:(0,g.default)(_).getInstance(),textTracks:(0,v.default)(_).getInstance(),VTTParser:(0,y.default)(_).getInstance(),TTMLParser:(0,E.default)(_).getInstance()})}return n}function t(e,t){try{e.removeSourceBuffer(t)}catch(e){}}function r(e,t,r){var n,i,a=null,o=0,s=0,u=null,l=null,d=0,f=r||.15;try{a=e.buffered}catch(e){return null}if(null!==a&&void 0!==a){for(i=0,n=a.length;i<n;i++)if(o=a.start(i),s=a.end(i),null===u)d=Math.abs(o-t),t>=o&&t<s?(u=o,l=s):d<=f&&(u=o,l=s);else{if(d=o-l,!(d<=f))break;l=s}if(null!==u)return{start:u,end:l}}return null}function n(e){var t=null;try{return t=e.buffered}catch(e){return null}}function i(e){var t,r,i=n(e),a=0;if(!i)return a;for(r=0,t=i.length;r<t;r++)a+=i.end(r)-i.start(r);return a}function a(e,t,n){var i,a;return i=r(e,t,n),a=null===i?0:i.end-t}function s(e,t){if(!t)return null;var r,i,a,o,s,u,l,d,f,c=n(t);if(!c)return null;for(var h=0,g=c.length;h<g;h++){if(d=e.length>h,s=d?{start:e.start(h),end:e.end(h)}:null,r=c.start(h),i=c.end(h),!s)return f={start:r,end:i};if(a=s.start===r,o=s.end===i,!a||!o){if(a)f={start:s.end,end:i};else{if(!o)return f={start:r,end:i};f={start:r,end:s.start}}return u=e.length>h+1?{start:e.start(h+1),end:e.end(h+1)}:null,l=h+1<g?{start:c.start(h+1),end:c.end(h+1)}:null,!u||l&&l.start===u.start&&l.end===u.end||(f.end=u.start),f}}return null}function l(e,t){var r=t.bytes,n="append"in e?"append":"appendBuffer"in e?"appendBuffer":null,i="Object"===Object.prototype.toString.call(e).slice(8,-1);if(n)try{m(e,function(){i?e[n](r,t):e[n](r),m(e,function(){T.trigger(O.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:r})})})}catch(t){T.trigger(O.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:r,error:new R.default(t.code,t.message,null)})}}function f(e,t,r,n){try{m(e,function(){t>=0&&r>t&&"ended"!==n.readyState&&e.remove(t,r),m(e,function(){T.trigger(O.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:r})})})}catch(n){T.trigger(O.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:r,error:new R.default(n.code,n.message,null)})}}function h(e,t){try{"open"===e.readyState?t.abort():t.setTextTrack&&"ended"===e.readyState&&t.abort()}catch(e){}}function p(e){e&&e.dashManifestModel&&(A=e.dashManifestModel)}function m(e,t){var r,n=50,i=function(){e.updating||(clearInterval(r),t())},a=function r(){e.updating||(e.removeEventListener("updateend",r,!1),t())};if(!e.updating)return void t();if("function"==typeof e.addEventListener)try{e.addEventListener("updateend",a,!1)}catch(e){r=setInterval(i,n)}else r=setInterval(i,n)}var _=this.context,T=(0,w.default)(_).getInstance(),S=void 0,A=void 0;return S={append:l,remove:f,abort:h,createSourceBuffer:e,removeSourceBuffer:t,getBufferRange:r,getAllRanges:n,getTotalBufferedTime:i,getBufferLength:a,getRangeDifference:s,setConfig:p}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(16),o=n(a),s=r(15),u=n(s),l=r(21),d=n(l),f=r(12),c=n(f),h=r(24),g=n(h),p=r(43),v=n(p),m=r(190),y=n(m),_=r(189),E=n(_),T=r(18),b=n(T),S=r(8),R=n(S),A=r(3),w=n(A),I=r(2),O=n(I),D=r(1),P=n(D),C=22;i.__dashjs_factory_name="SourceBufferController";var M=P.default.getSingletonFactory(i);M.QUOTA_EXCEEDED_ERROR_CODE=C,t.default=M,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(27),u=n(s),l=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return a(t,e),t}(u.default),d=new l;t.default=d,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){D=null,M=null,P=[],C=[],w.on(u.default.LOADING_COMPLETED,b,O)}function r(e){M=e}function n(e){D=e}function i(){return D}function a(e){var t=function(e,t){return e.action===c.default.ACTION_COMPLETE&&e.action===t.action},r=function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex},n=function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality},i=function(i){var a=!1;return i.some(function(i){if(r(e,i)||n(e,i)||t(e,i))return a=!0}),a};return i(P)}function s(e){var t=e.state instanceof Array?e.state:[e.state],r=[];return t.forEach(function(t){var n=E(t);r=r.concat(_(n,e))}),r}function l(e){P=P.filter(function(t){return isNaN(t.startTime)||t.startTime>=e})}function d(){M.abort(),C=[]}function f(e){switch(e.action){case c.default.ACTION_COMPLETE:P.push(e),T(e,v),w.trigger(u.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case c.default.ACTION_DOWNLOAD:T(e,p),C.push(e),h(e);break;default:A("Unknown request action.")}}function h(e){w.trigger(u.default.FRAGMENT_LOADING_STARTED,{sender:O,request:e}),M.load(e)}function m(e,t,r){for(var n=e.length-1,i=n;i>=0;i--){var a=e[i],o=a.startTime,s=o+a.duration;if(r=void 0!==r?r:a.duration/2,!isNaN(o)&&!isNaN(s)&&t+r>=o&&t-r<s||isNaN(o)&&isNaN(t))return a}return null}function _(e,t){return t.hasOwnProperty("time")?[m(e,t.time,t.threshold)]:e.filter(function(e){for(var r in t)if("state"!==r&&t.hasOwnProperty(r)&&e[r]!=t[r])return!1;return!0})}function E(e){var t=void 0;switch(e){case p:t=C;break;case v:t=P;break;default:t=[]}return t}function T(e,t){I.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),I.addRequestsQueue(e.mediaType,C,P)}function b(e){e.sender===M&&(C.splice(C.indexOf(e.request),1),e.response&&!e.error&&P.push(e.request),T(e.request,e.error?y:v),w.trigger(u.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function S(){w.off(u.default.LOADING_COMPLETED,b,this),M&&(M.reset(),M=null),P=[],C=[]}var R=this.context,A=(0,g.default)(R).getInstance().log,w=(0,o.default)(R).getInstance(),I=e.metricsModel,O=void 0,D=void 0,P=void 0,C=void 0,M=void 0;return O={setLoader:r,setScheduleController:n,getScheduleController:i,getRequests:s,isFragmentLoaded:a,removeExecutedRequestsBeforeTime:l,abortRequests:d,executeRequest:f,reset:S},t(),O}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=n(a),s=r(2),u=n(s),l=r(1),d=n(l),f=r(19),c=n(f),h=r(4),g=n(h),p="loading",v="executed",m="canceled",y="failed";i.__dashjs_factory_name="FragmentModel";var _=d.default.getClassFactory(i);_.FRAGMENT_MODEL_LOADING=p,_.FRAGMENT_MODEL_EXECUTED=v,_.FRAGMENT_MODEL_CANCELED=m,_.FRAGMENT_MODEL_FAILED=y,t.default=_,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){return a}function t(e){a=e,e&&n.trigger(u.default.MANIFEST_LOADED,{data:e})}var r=this.context,n=(0,o.default)(r).getInstance(),i=void 0,a=void 0;return i={getValue:e,setValue:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=n(a),s=r(2),u=n(s),l=r(1),d=n(l);i.__dashjs_factory_name="ManifestModel",t.default=d.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.log&&(_=e.log)}function t(){T=[];var e;e=(0,c.default)(p).getInstance(),T.push(e),e=(0,d.default)(p).getInstance(),T.push(e),e=(0,u.default)(p).getInstance(),T.push(e),b=e}function r(){return T}function n(e){for(var t=0;t<T.length;t++)if(T[t].systemString===e)return T[t];return null}function i(e){return e===b}function a(e,t){if(e.byteLength===t.byteLength){for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}return!1}function s(e){var t,r,n,i,a=[];if(e)for(n=0;n<T.length;++n)for(r=T[n],i=0;i<e.length;++i)if(t=e[i],t.schemeIdUri.toLowerCase()===r.schemeIdURI){var o=r.getInitData(t);o&&a.push({ks:T[n],initData:o})}return a}function l(e,t){var r,n=[],i=o.default.parsePSSHList(e);for(r=0;r<T.length;++r){var a=T[r].systemString,s=!t||a in t;T[r].uuid in i&&s&&n.push({ks:T[r],initData:i[T[r].uuid]})}return n}function f(e,t,r){if("license-release"===r||"individualization-request"===r)return null;var n=null;return t&&t.hasOwnProperty("drmtoday")?n=(0,g.default)(p).getInstance():"com.widevine.alpha"===e.systemString?n=(0,y.default)(p).getInstance():"com.microsoft.playready"===e.systemString?n=(0,v.default)(p).getInstance():"org.w3.clearkey"===e.systemString&&(n=(0,E.default)(p).getInstance()),n}function h(e,t){try{return b.getClearKeysFromProtectionData(e,t)}catch(e){return _("Failed to retrieve clearkeys from ProtectionData"),null}}var p=this.context,m=void 0,_=void 0,T=void 0,b=void 0;return m={initialize:t,isClearKey:i,initDataEquals:a,getKeySystems:r,getKeySystemBySystemString:n,getSupportedKeySystemsFromContentProtection:s,getSupportedKeySystems:l,getLicenseServer:f,processClearKeyLicenseRequest:h,setConfig:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(25),o=n(a),s=r(161),u=n(s),l=r(163),d=n(l),f=r(162),c=n(f),h=r(168),g=n(h),p=r(169),v=n(p),m=r(170),y=n(m),_=r(167),E=n(_),T=r(1),b=n(T);i.__dashjs_factory_name="ProtectionKeyController",t.default=b.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return e}function t(e){return e}var r=void 0;return r={modifyRequestURL:e,modifyRequestHeader:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="RequestModifier",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(55),u=r(54),l=function(e){function t(e,r,a){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));o.options=a;var s=o,l=a.loglevel;return o.logger=new u(o.getName().toUpperCase()+" VideoHandler",l),o.logger.debug("Initializing video handler"),o.bind("error",function(e){s.logger.error(e)}),o}return a(t,e),o(t,[{key:"load",value:function(e,t,r){var n=this;this.logger.info("Attempting to load stream ("+t+"): "+e),this.bindOnce("Stream-loaded",function(){n.logger.info("Stream loaded successfully ("+t+"): "+e)})}},{key:"play",value:function(){throw Error("Play method not implemented by : "+this.getName()+" handler.")}},{key:"pause",value:function(){throw Error("Pause method not implemented by : "+this.getName()+" handler.")}},{key:"stop",value:function(){throw Error("Stop method not implemented by : "+this.getName()+" handler.")}},{key:"setVolume",value:function(e){throw Error("SetVolume method not implemented by : "+this.getName()+" handler.")}},{key:"getVolume",value:function(){throw Error("GetVolume method not implemented by : "+this.getName()+" handler.")}},{key:"remove",value:function(){throw Error("Remove method not implemented by : "+this.getName()+" handler.")}},{key:"canControlIndividualAudioChannels",value:function(){return!1}},{key:"setVolumeLeft",value:function(e){}},{key:"setVolumeRight",value:function(e){}},{key:"setBufferTime",value:function(e){}},{key:"getBufferTime",value:function(){return this.options.bufferTime}},{key:"getLiveEdge",value:function(){return this.getBuffered()}},{key:"isMultiBitrate",value:function(){return!1}},{key:"getAvailableBitrates",value:function(){return null}},{key:"getActiveBitrateIdx",value:function(){return null}},{key:"getActiveAutoBitrateIdx",value:function(){return null}},{key:"setActiveBitrateIdx",value:function(e){}},{key:"getName",value:function(){return"base"}},{key:"getInfo",value:function(){return{}}},{key:"setLooping",value:function(e){}},{key:"isLooping",value:function(e){return!1}},{key:"isVod",value:function(){return!1}},{key:"getDuration",value:function(){return!1}},{key:"getCurrentTime",value:function(){return!1}},{key:"setCurrentTime",value:function(e){return!1}},{key:"setScaleMode",value:function(e){return!1}},{key:"getEdgeServerIp",value:function(){return!1}}]),t}(s);l.isSupportedByPlatform=function(){return!1},l.canHandleStream=function(e,t){return!1},e.exports=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){if(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),200==t.status}return!1}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=window.srplayer=r(97),l=r(90),d=r(36),f=r(91);r(213);var c=function(e){function t(e,r,a){n(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a)),l=s;return s.elem=e,s.options=a,s.activeBitrateIdx=-1,o(s.options.swf)||l.logger.error("Could not find srplayer.swf.\n        Please make sure it's on the server and that "+s.options.swf+" is the correct path"),e.id="srplayer-"+f(1,1e5),e.classList.add("flash"),s.srplayer=u(e.id),s.srplayer.setup({swf:s.options.swf,edgeServerIpDetection:s.options.edgeServerIpDetection,autoDynamicStreamSwitch:s.options.simpleBitrate}),s.srplayer.bind("player-init",r),s.srplayer.bind("throttled",function(e){l.trigger("throttled",e)}),s.srplayer.bind("cuepoint-received",function(e){l.trigger("cuepoint-received",e)}),s.srplayer.bind("media-state-change",function(e){"playing"!==e&&"stopped"!==e&&"paused"!==e||l.trigger(e)}),s.srplayer.bind("media-player-state-change",function(e){"playbackError"!==e&&(l.trigger("media-player-state-change",e),l.trigger(e))}),s.srplayer.bind("media-error",function(e){l.trigger("error",e)}),s.srplayer.bind("current-time-update",function(e){l.trigger("timeupdate",e)}),s.srplayer.bind("volume-change",function(e){l.trigger("volumechange",l.getVolume())}),s.srplayer.bind("is-dynamic-change",function(e){l.trigger("is-multibitrate-change",e)}),s.srplayer.bind("bitrate-switch",function(e){var t=l.getAvailableBitrates()[e];l.logger.debug("Switched bitrate to "+t+" kbit/s"),l.trigger("bitrate-switched",e)}),s.srplayer.bind("sr:mousemove",function(e,t){var r={mouseX:e,mouseY:t};l.trigger("mouse-move",r)}),s.srplayer.bind("sr:flashClicked",function(){l.trigger("flashClicked")}),s.srplayer.bind("current-time-change",function(e){l.trigger("current-time-change",e)}),s.srplayer.bind("can-seek-change",function(e){l.trigger("can-seek-change",e)}),s.srplayer.bind("connection-lost",function(){l.trigger("connection-lost")}),s.srplayer.bind("smil-parse-error",function(){l.logger.error("SMIL parse error. The SMIL file is empty or not in the correct format"),l.trigger("smil-parse-error")}),s.srplayer.bind("no-media-element-created",function(){l.logger.error("Cannot create media element with given URL and mimetype. Please check them."),l.trigger("no-media-element-created")}),s.srplayer.bind("http-error-occurred",function(e){l.logger.error("HTTP response "+e+" has occurred."),l.trigger("error",error)}),s.srplayer.bind("security-error-occurred",function(e,t){l.logger.error("Security error ID: "+e+" with description: "+t+" has occurred."),2048==e&&l.logger.error("File crossdomain.xml is not found from the server domain, so cannot load the URL through FLASH player"),l.trigger("error",error)}),s.srplayer.bind("current-time-set-error",function(e){l.logger.error("Error "+e+" has occurred and JavascriptApi could not set current time"),l.trigger("current-time-set-error",e)}),s}return a(t,e),s(t,[{key:"_fetchStream",value:function(e,t,r){var n=/smil/,i=/x-mpegURL/;if(this.currentUrl=e,this.activeStream={type:t,options:r},r.hardwareAcceleration===!1&&this.logger.debug("Disabling hardware acceleration"),n.test(t))this.logger.debug("SMIL source detected"),this.srplayer.load({url:e,type:"smil",bufferTime:r.bufferTime,hardwareAcceleration:r.hardwareAcceleration});else if(i.test(t))this.logger.debug("HLS source detected"),this.srplayer.load({url:e,type:"hls",bufferTime:r.bufferTime,hardwareAcceleration:r.hardwareAcceleration});else{var a=!!r.includesAppInstance;this.logger.debug("RTMP source detected"),this.logger.debug("Option includesApplicationInstance = "+a),this.srplayer.load({url:e,type:"auto",includesApplicationInstance:a,bufferTime:r.bufferTime,hardwareAcceleration:r.hardwareAcceleration})}}},{key:"load",value:function(e,t,r){var n=this,i=r||{};i.bufferTime=i.bufferTime||this.options.bufferTime,this.trigger("loadstart"),this.srplayer.bind("can-play-change",function t(r){r&&(n.srplayer.unbind("can-play-change",t),n.trigger("stream-loaded",e))}),this._fetchStream(e,t,i),this.options.scaleMode&&this.setScaleMode(this.options.scaleMode)}},{key:"play",value:function(){this.trigger("play"),this.srplayer.play()}},{key:"pause",value:function(){this.srplayer.pause()}},{key:"stop",value:function(){this.srplayer.stop()}},{key:"setVolume",value:function(e){this.srplayer.setVolume(e/100)}},{key:"getVolume",value:function(){return 100*this.srplayer.getVolume()}},{key:"setBufferTime",value:function(e){this.srplayer.setBufferTime(e)}},{key:"getBufferTime",value:function(){return this.srplayer.getBufferTime()}},{key:"remove",value:function(){this.srplayer.remove()}},{key:"isMultiBitrate",value:function(){return this.srplayer.isMultiBitrate()}},{key:"getAvailableBitrates",value:function(){return this.srplayer.getAvailableBitrates()}},{key:"getActiveBitrateIdx",value:function(){return this.activeBitrateIdx}},{key:"getActiveAutoBitrateIdx",value:function(){return this.srplayer.getSelectedBitrateIndex()}},{key:"setActiveBitrateIdx",value:function(e){var t;t=e===-1?"Auto":this.getAvailableBitrates()[e]+" kbit/s",this.logger.debug("Bitrate switching to "+t),this.trigger("bitrate-switching",e),this.activeBitrateIdx=e,this.srplayer.setSelectedBitrateIndex(e)}},{key:"canControlIndividualAudioChannels",value:function(){return!0}},{key:"setVolumeLeft",value:function(e){this.srplayer.setVolumeLeft(e)}},{key:"setVolumeRight",value:function(e){this.srplayer.setVolumeRight(e)}},{key:"getName",value:function(){return"flash"}},{key:"getInfo",value:function(){return this.srplayer.getInfo()}},{key:"setLooping",value:function(e){this.srplayer.setLooping(e)}},{key:"isLooping",value:function(){return this.srplayer.isLooping()}},{key:"isVod",value:function(){return null!==this.options.vod?this.options.vod:this.srplayer.isVod()}},{key:"getDuration",value:function(){return this.srplayer.getDuration()}},{key:"getCurrentTime",value:function(){return this.srplayer.getCurrentTime()}},{key:"setCurrentTime",value:function(e){(this.isVod()||!this.isVod()&&e>this.srplayer.getCurrentTime())&&this.srplayer.setCurrentTime(e)}},{key:"getPlayState",value:function(){return this.srplayer.getPlayState()}},{key:"setScaleMode",value:function(e){this.srplayer.setScaleMode(e)}},{key:"getEdgeServerIp",value:function(){return this.srplayer.getEdgeServerIp()}},{key:"getBuffered",value:function(){var e=this.getBufferLength();return this.getCurrentTime()+e}},{key:"getBufferLength",value:function(){return this.srplayer.getBufferLength()}}]),t}(d);c.isSupportedByPlatform=function(){return l.versionAtLeast(9)},c.canHandleStream=function(e,t){var r=/rtmp|rtsp|flv|mp4/,n=/smil|rtmp|flv|x-mpegURL|mp4/;return r.test(e)||n.test(t)},e.exports=c},function(e,t,r){"use strict";var n={};n.encode=function(e){for(var t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?(t.push(192|n>>6),t.push(128|63&n)):n<65536?(t.push(224|n>>12),t.push(128|63&n>>6),t.push(128|63&n)):(t.push(240|n>>18),t.push(128|63&n>>12),t.push(128|63&n>>6),t.push(128|63&n))}return t},n.decode=function(e){for(var t=[],r=0;r<e.length;){var n=e[r++];n<128||(n<224?(n=(31&n)<<6,n|=63&e[r++]):n<240?(n=(15&n)<<12,n|=(63&e[r++])<<6,n|=63&e[r++]):(n=(7&n)<<18,
n|=(63&e[r++])<<12,n|=(63&e[r++])<<6,n|=63&e[r++])),t.push(String.fromCharCode(n))}return t.join("")};var i={};!function(e){var t=function(t){for(var r=0,n=[],i=0|t.length/3;0<i--;){var a=(t[r]<<16)+(t[r+1]<<8)+t[r+2];r+=3,n.push(e.charAt(63&a>>18)),n.push(e.charAt(63&a>>12)),n.push(e.charAt(63&a>>6)),n.push(e.charAt(63&a))}if(2==t.length-r){var a=(t[r]<<16)+(t[r+1]<<8);n.push(e.charAt(63&a>>18)),n.push(e.charAt(63&a>>12)),n.push(e.charAt(63&a>>6)),n.push("=")}else if(1==t.length-r){var a=t[r]<<16;n.push(e.charAt(63&a>>18)),n.push(e.charAt(63&a>>12)),n.push("==")}return n.join("")},r=function(){for(var t=[],r=0;r<e.length;++r)t[e.charCodeAt(r)]=r;return t["=".charCodeAt(0)]=0,t}(),o=function(e){for(var t=0,n=[],i=0|e.length/4;0<i--;){var a=(r[e.charCodeAt(t)]<<18)+(r[e.charCodeAt(t+1)]<<12)+(r[e.charCodeAt(t+2)]<<6)+r[e.charCodeAt(t+3)];n.push(255&a>>16),n.push(255&a>>8),n.push(255&a),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n},u={};u.encode=function(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t},u.decode=function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")},i.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},i.encodeASCII=function(e){var r=u.encode(e);return t(r)},i.decodeASCII=function(e){var t=o(e);return u.decode(t)},i.encode=function(e){var r=n.encode(e);return t(r)},i.decode=function(e){var t=o(e);return n.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),t.decode=i.decode,t.decodeArray=i.decodeArray},function(e,t){"use strict";function r(e){function t(){void 0===e.escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}function r(){}function n(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function i(e){return e.prefix}function a(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function o(e,t,r,n){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==n)break}else if(a instanceof RegExp){if(a.test(n))break}else if("function"==typeof a&&a(t,r,n))break}return i!=e.length}function s(t,r,n){switch(e.arrayAccessForm){case"property":t[r]instanceof Array?t[r+"_asArray"]=t[r]:t[r+"_asArray"]=[t[r]]}!(t[r]instanceof Array)&&e.arrayAccessFormPaths.length>0&&o(e.arrayAccessFormPaths,t,r,n)&&(t[r]=[t[r]])}function u(e){var t=e.split(/[-T:+Z]/g),r=new Date(t[0],t[1]-1,t[2]),n=t[5].split(".");if(r.setHours(t[3],t[4],n[0]),n.length>1&&r.setMilliseconds(n[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]),a=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";i=0+("-"==a?-1*i:i),r.setMinutes(r.getMinutes()-i-r.getTimezoneOffset())}else e.indexOf("Z",e.length-1)!==-1&&(r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())));return r}function l(t,r,n){if(e.datetimeAccessFormPaths.length>0){var i=n.split(".#")[0];return o(e.datetimeAccessFormPaths,t,r,i)?u(t):t}return t}function d(t,r,n,i){return!(r==A.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||o(e.xmlElementsFilter,t,n,i)}function f(t,r){if(t.nodeType==A.DOCUMENT_NODE){for(var a=new Object,o=t.childNodes,u=0;u<o.length;u++){var c=o.item(u);if(c.nodeType==A.ELEMENT_NODE)if(e.ignoreRoot)a=f(c);else{a={};var h=n(c);a[h]=f(c)}}return a}if(t.nodeType==A.ELEMENT_NODE){var a=new Object;a.__cnt=0;for(var g=[],o=t.childNodes,u=0;u<o.length;u++){var c=o.item(u),h=n(c);if(c.nodeType!=A.COMMENT_NODE){var p=r+"."+h;if(d(a,c.nodeType,h,p))if(a.__cnt++,null==a[h]){var v=f(c,p);if("#text"!=h||/[^\s]/.test(v)){var m={};m[h]=v,g.push(m)}a[h]=v,s(a,h,p)}else{null!=a[h]&&(a[h]instanceof Array||(a[h]=[a[h]],s(a,h,p)));var v=f(c,p);if("#text"!=h||/[^\s]/.test(v)){var m={};m[h]=v,g.push(m)}a[h][a[h].length]=v}}}a.__children=g;for(var y=n(t),_=0;_<t.attributes.length;_++){var E=t.attributes.item(_);a.__cnt++;for(var T=E.value,b=0,S=e.matchers.length;b<S;b++){var R=e.matchers[b];R.test(E,y)&&(T=R.converter(E.value))}a[e.attributePrefix+E.name]=T}var w=i(t);return null!=w&&""!=w&&(a.__cnt++,a.__prefix=w),null!=a["#text"]&&(a.__text=a["#text"],a.__text instanceof Array&&(a.__text=a.__text.join("\n")),e.stripWhitespaces&&(a.__text=a.__text.trim()),delete a["#text"],"property"==e.arrayAccessForm&&delete a["#text_asArray"],a.__text=l(a.__text,h,r+"."+h)),null!=a["#cdata-section"]&&(a.__cdata=a["#cdata-section"],delete a["#cdata-section"],"property"==e.arrayAccessForm&&delete a["#cdata-section_asArray"]),0==a.__cnt&&"text"==e.emptyNodeForm?a="":1==a.__cnt&&null!=a.__text?a=a.__text:1!=a.__cnt||null==a.__cdata||e.keepCData?a.__cnt>1&&null!=a.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==a.__text||""==a.__text.trim())&&delete a.__text:a=a.__cdata,delete a.__cnt,!e.enableToStringFunc||null==a.__text&&null==a.__cdata||(a.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),a}if(t.nodeType==A.TEXT_NODE||t.nodeType==A.CDATA_SECTION_NODE)return t.nodeValue}function c(t,r,n,i){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+r;if(null!=n)for(var s=0;s<n.length;s++){var u=n[s],l=t[u];e.escapeMode&&(l=a(l)),o+=" "+u.substr(e.attributePrefix.length)+"=",o+=e.useDoubleQuotes?'"'+l+'"':"'"+l+"'"}return o+=i?"/>":">"}function h(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function g(e,t){return e.indexOf(t,e.length-t.length)!==-1}function p(t,r){return!!("property"==e.arrayAccessForm&&g(r.toString(),"_asArray")||0==r.toString().indexOf(e.attributePrefix)||0==r.toString().indexOf("__")||t[r]instanceof Function)}function v(e){var t=0;if(e instanceof Object)for(var r in e)p(e,r)||t++;return t}function m(t,r,n){return 0==e.jsonPropertiesFilter.length||""==n||o(e.jsonPropertiesFilter,t,r,n)}function y(t){var r=[];if(t instanceof Object)for(var n in t)n.toString().indexOf("__")==-1&&0==n.toString().indexOf(e.attributePrefix)&&r.push(n);return r}function _(t){var r="";return null!=t.__cdata&&(r+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(r+=e.escapeMode?a(t.__text):t.__text),r}function E(t){var r="";return t instanceof Object?r+=_(t):null!=t&&(r+=e.escapeMode?a(t):t),r}function T(e,t){return""===e?t:e+"."+t}function b(e,t,r,n){var i="";if(0==e.length)i+=c(e,t,r,!0);else for(var a=0;a<e.length;a++)i+=c(e[a],t,y(e[a]),!1),i+=S(e[a],T(n,t)),i+=h(e[a],t);return i}function S(e,t){var r="",n=v(e);if(n>0)for(var i in e)if(!p(e,i)&&(""==t||m(e,i,T(t,i)))){var a=e[i],o=y(a);if(null==a||void 0==a)r+=c(a,i,o,!0);else if(a instanceof Object)if(a instanceof Array)r+=b(a,i,o,t);else if(a instanceof Date)r+=c(a,i,o,!1),r+=a.toISOString(),r+=h(a,i);else{var s=v(a);s>0||null!=a.__text||null!=a.__cdata?(r+=c(a,i,o,!1),r+=S(a,T(t,i)),r+=h(a,i)):r+=c(a,i,o,!0)}else r+=c(a,i,o,!1),r+=E(a),r+=h(a,i)}return r+=E(e)}var R="1.2.0";e=e||{},t(),r();var A={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var r;if(window.DOMParser){var n=new window.DOMParser,i=null;if(!t)try{i=n.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){i=null}try{r=n.parseFromString(e,"text/xml"),null!=i&&r.getElementsByTagNameNS(i,"parsererror").length>0&&(r=null)}catch(e){r=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(e);return r},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?u(e):e},this.xml2json=function(e){return f(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return S(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return R}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){A=0,w=!1,I=NaN,S.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,_,this)}function t(){return w}function r(e){w=e}function n(){return A}function i(e){A=e}function a(){return I}function s(e){I=e}function l(e,t,r,n){var i=NaN;return i=n?r&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:r?new Date(t.availabilityStartTime.getTime()+1e3*(e-A)):t.availabilityStartTime}function d(e,t,r){return l.call(this,e,t,r)}function f(e,t,r){return l.call(this,e,t,r,!0)}function c(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*A)/1e3}function h(e,t){var r=t.adaptation.period.start,n=t.presentationTimeOffset;return e+(r-n)}function g(e,t){var r=t.adaptation.period.start,n=t.presentationTimeOffset;return e-r+n}function p(e,t){var r,n,i;return t&&(r=e.representation.adaptation.period.mpd.suggestedPresentationDelay,n=e.presentationStartTime+r,i=new Date(e.availabilityStartTime.getTime()+1e3*n)),i}function v(e,t){var r=e.adaptation.period,n={start:r.start,end:r.start+r.duration};if(!t)return n;if(!w&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=c(new Date,r),o=r.start+r.duration;return n.start=Math.max(a-r.mpd.timeShiftBufferDepth,r.start),n.end=a>=o&&a-i<o?o-i:a-i,n}function m(e,t){var r=e.adaptation.period.start;return t-r}function y(e,t){var r=e.adaptation.period.start;return t+r}function _(e){w||void 0!==e.offset&&(i(e.offset/1e3),w=!0)}function E(e){var t=e.presentationTimeOffset,r=e.adaptation.period.start;return r-t}function T(){S.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,_,this),A=0,w=!1,I=NaN}var b=this.context,S=(0,o.default)(b).getInstance(),R=void 0,A=void 0,w=void 0,I=void 0;return R={initialize:e,isTimeSyncCompleted:t,setTimeSyncCompleted:r,getClientTimeOffset:n,setClientTimeOffset:i,getExpectedLiveEdge:a,setExpectedLiveEdge:s,calcAvailabilityStartTimeFromPresentationTime:d,calcAvailabilityEndTimeFromPresentationTime:f,calcPresentationTimeFromWallTime:c,calcPresentationTimeFromMediaTime:h,calcPeriodRelativeTimeFromMpdRelativeTime:m,calcMpdRelativeTimeFromPeriodRelativeTime:y,calcMediaTimeFromPresentationTime:g,calcSegmentAvailabilityRange:v,calcWallTimeForSegment:p,calcMSETimeOffset:E,reset:T}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=n(a),s=r(2),u=n(s),l=r(1),d=n(l);i.__dashjs_factory_name="TimelineConverter",t.default=d.default.getSingletonFactory(i),e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){r(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.maxPlayoutRate=NaN}return n(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||("BaseURL"!==e.segmentInfoType||"SegmentBase"!==e.segmentInfoType)&&null!==e.range}},{key:"hasSegments",value:function(e){return"BaseURL"!==e.segmentInfoType&&"SegmentBase"!==e.segmentInfoType&&!e.indexRange}}]),e}();t.default=i,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){D=window.VTTCue||window.TextTrackCue,M=[],L=[],k=-1,x=0,N=0,F=0,U=0,B=null,j=null,V=!1,K=2147483647,G=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?H="fullscreenElement":void 0!==document.webkitIsFullScreen?H="webkitIsFullScreen":document.msFullscreenElement?H="msFullscreenElement":document.mozFullScreen&&(H="mozFullScreen")}function t(e){var t=M[e].kind,r=void 0!==M[e].label?M[e].label:M[e].lang,n=M[e].lang,i=G?document.createElement("track"):C.addTextTrack(t,r,n);return G&&(i.kind=t,i.label=r,i.srclang=n),i}function r(e){V=e,B&&!document[H]&&(B.style.zIndex=e?K:null)}function n(e,r){if(M.length===r)return void I("Trying to add too many tracks.");if(M.push(e),void 0===C&&(C=e.video),M.length===r){M.sort(function(e,t){return e.index-t.index}),B=P.getTTMLRenderingDiv();for(var n=-1,i=0;i<M.length;i++){var a=t.call(this,i);L.push(a),M[i].defaultTrack&&(a.default=!0,n=i),G&&C.appendChild(a);var o=C.textTracks[i];o.nonAddedCues=[],B&&(M[i].isTTML||M[i].isEmbedded)?o.renderingType="html":o.renderingType="default",this.addCaptions(i,0,M[i].captionData),w.trigger(u.default.TEXT_TRACK_ADDED)}if(v.call(this,n),n>=0){for(var s=0;s<C.textTracks.length;s++)C.textTracks[s].mode=s===n?"showing":"hidden";this.addCaptions(n,0,null)}w.trigger(u.default.TEXT_TRACKS_ADDED,{index:k,tracks:M})}}function i(e,t,r,n,i,a){var o=e/t,s=r/n,u=0,l=0;o>s?(l=t,u=l/n*r):(u=e,l=u/r*n);var d=0,f=0,c=0,h=0,g=u/l;return g>i?(h=l,c=l/(1/i),d=(e-c)/2,f=0):(c=u,h=u/i,d=0,f=(t-h)/2),a?{x:d+.1*c,y:f+.1*h,w:.8*c,h:.8*h}:{x:d,y:f,w:c,h:h}}function a(){var e=this.getCurrentTextTrack();if(e&&"html"===e.renderingType){var t=C.clientWidth/C.clientHeight,r=!1;e.isFromCEA608&&(t=3.5/3,r=!0);var n=i.call(this,C.clientWidth,C.clientHeight,C.videoWidth,C.videoHeight,t,r),a=n.w,o=n.h;if(a!=F||o!=U){x=n.x,N=n.y,F=a,U=o,B.style.left=x+"px",B.style.top=N+"px",B.style.width=F+"px",B.style.height=U+"px";for(var s=0;e.activeCues&&s<e.activeCues.length;++s){var u=e.activeCues[s];u.scaleCue(u)}H&&document[H]||V?B.style.zIndex=K:B.style.zIndex=null}}}function s(e,t){var r=Math.round(.01*e*t).toString()+"px";return r}function l(e){var t=F,r=U;if(t*r!==0&&e.layout){var n=e.layout,i=s(n.left,t),a=s(n.top,r),o=s(n.width,t),u=s(n.height,r);B.style.left=i,B.style.top=a,B.style.width=o,B.style.height=u;var l=B.firstChild;l&&l.style&&(l.style.left="0px",l.style.top="0px",l.style.width=o,l.style.height=u)}}function d(e){var t,r,n,i,a,o=F,s=U,u=[o/e.cellResolution[0],s/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){var l=e.linePadding[t];r=(l*u[0]).toString();for(var d=document.getElementsByClassName("spanPadding"),f=0;f<d.length;f++)d[f].style.cssText=d[f].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r),d[f].style.cssText=d[f].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}if(e.fontSize)for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?n=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(n=e.fontSize[t][1]),r=(n*u[1]).toString(),a="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var c=0;c<a.length;c++)a[c].style.cssText=a[c].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?i=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.lineHeight[t][1]),r=(i*u[1]).toString(),a=document.getElementsByClassName(t);for(var h=0;h<a.length;h++)a[h].style.cssText=a[h].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}}function f(e,t,r){var n=e>=0?C.textTracks[e]:null,i=this;if(n){if("showing"!==n.mode)return void(r&&r.length>0&&(n.nonAddedCues=n.nonAddedCues.concat(r)));if(r||(r=n.nonAddedCues,n.nonAddedCues=[]),r&&0!==r.length)for(var o in r){var s,u=r[o];n.cellResolution=u.cellResolution,n.isFromCEA608=u.isFromCEA608,j||"html"!==u.type&&"image"!==u.type||(j=setInterval(a.bind(this),500)),"image"===u.type?(s=new D(u.start-t,u.end-t,""),s.image=u.data,s.id=u.id,s.size=0,s.type="image",s.layout=u.layout,s.scaleCue=l.bind(i),s.onenter=function(){if(B&&"showing"===n.mode){var e=new Image;e.id="ttmlImage_"+this.id,e.src=this.image,e.style.cssText="z-index: 2147483648; pointer-events: none; display: block; visibility: visible !important; position: relative !important;",B.appendChild(e),l.call(i,this)}},s.onexit=function(){if(B)for(var e=B.childNodes,t=0;t<e.length;t++)e[t].id==="ttmlImage_"+this.id&&B.removeChild(e[t])}):"html"===u.type?(s=new D(u.start-t,u.end-t,""),s.cueHTMLElement=u.cueHTMLElement,s.regions=u.regions,s.regionID=u.regionID,s.cueID=u.cueID,s.videoWidth=u.videoWidth,s.videoHeight=u.videoHeight,s.cellResolution=u.cellResolution,s.fontSize=u.fontSize,s.lineHeight=u.lineHeight,s.linePadding=u.linePadding,s.scaleCue=d.bind(i),B.style.left=x+"px",B.style.top=N+"px",B.style.width=F+"px",B.style.height=U+"px",s.onenter=function(){"showing"===n.mode&&(I("Cue "+this.startTime+"-"+this.endTime+" : "+this.cueHTMLElement.id+" : "+this.cueHTMLElement.innerText),B.appendChild(this.cueHTMLElement),d.call(i,this))},s.onexit=function(){for(var e=B.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&B.removeChild(e[t])}):(s=new D(u.start-t,u.end-t,u.data),u.styles&&(void 0!==u.styles.align&&s.hasOwnProperty("align")&&(s.align=u.styles.align),void 0!==u.styles.line&&s.hasOwnProperty("line")&&(s.line=u.styles.line),void 0!==u.styles.position&&s.hasOwnProperty("position")&&(s.position=u.styles.position),void 0!==u.styles.size&&s.hasOwnProperty("size")&&(s.size=u.styles.size))),n.addCue(s)}}}function h(){return k>=0?C.textTracks[k]:null}function g(){return k}function p(e){for(var t=-1,r=0;r<C.textTracks.length;r++)if(C.textTracks[r].label===e){t=r;break}return t}function v(e){if(k=e,S.call(this),e>=0){var t=C.textTracks[e];"html"===t.renderingType?T.call(this):b.call(this)}else b.call(this)}function m(e){return C.textTracks[e]}function y(e){if(e.cues){for(var t=e.cues,r=t.length-1,n=r;n>=0;n--)e.removeCue(t[n]);e.mode="disabled"}}function _(){for(var e=L.length,t=0;t<e;t++)if(G)C.removeChild(L[t]);else{var r=m.call(this,t);r.nonAddedCues=[],y.call(this,r)}L=[],M=[],j&&(clearInterval(j),j=null),S.call(this)}function E(e){C.removeChild(L[e]),L.splice(e,1)}function T(){if(G){var e=document.getElementById("native-cue-style");if(!e){e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);var t=e.sheet;C.id?t.insertRule("#"+C.id+"::cue {background: transparent}",0):0!==C.classList.length?t.insertRule("."+C.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0)}}}function b(){if(G){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}}function S(){if(B)for(;B.firstChild;)B.removeChild(B.firstChild)}function R(e){e&&e.videoModel&&(P=e.videoModel)}var A=this.context,w=(0,o.default)(A).getInstance(),I=(0,c.default)(A).getInstance().log,O=void 0,D=void 0,P=void 0,C=void 0,M=void 0,L=void 0,k=void 0,x=void 0,N=void 0,F=void 0,U=void 0,B=void 0,j=void 0,G=void 0,H=void 0,V=void 0,K=void 0;return O={initialize:e,displayCConTop:r,addTextTrack:n,addCaptions:f,getTextTrack:m,getCurrentTextTrack:h,getCurrentTrackIdx:g,setCurrentTrackIdx:v,getTrackIdxForId:p,deleteTrackCues:y,deleteAllTextTracks:_,deleteTextTrack:E,setConfig:R}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=n(a),s=r(2),u=n(s),l=r(1),d=n(l),f=r(4),c=n(f);i.__dashjs_factory_name="TextTracks",t.default=d.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){s=new o.default,u=[],l=!1}function t(){return s}function r(){return u}function n(){return l}function i(e){function t(e,t,r,n){var i=n[0].split(/[=]/);return n.push({key:i[0],value:i[1]}),n.shift(),n}function r(e,t,r){return t>0&&(f&&0===u.length?u=r[t].split(/[&]/):c&&(i=r[t].split(/[&]/))),r}if(!e)return null;var n,i=[],a=new RegExp(/[?]/),o=new RegExp(/[#]/),d=new RegExp(/^(https:)?\/\//i),f=a.test(e),c=o.test(e);return l=d.test(e),n=e.split(/[?#]/).map(r),u.length>0&&(u=u.reduce(t,null)),i.length>0&&(i=i.reduce(t,null),i.forEach(function(e){s[e.key]=e.value})),e}var a=void 0,s=void 0,u=void 0,l=void 0;return a={initialize:e,parseURI:i,getURIFragmentData:t,getURIQueryData:r,isManifestHTTPS:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(201),o=n(a),s=r(1),u=n(s);i.__dashjs_factory_name="URIQueryAndFragmentModel",t.default=u.default.getSingletonFactory(i),e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,n){r(this,e),this.sessionToken=t,this.error=n};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,n,i,a){r(this,e),this.sessionToken=t,this.message=n,this.defaultURL=i,this.messageType=a?a:"license-request"};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,n){r(this,e),this.keySystem=t,this.ksConfiguration=n};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,n,i,a,o){r(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=a,this.sessionTypes=o};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,n){r(this,e),this.initData=t,this.initDataType=n};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=d.default.parseBuffer(e),n=(0,o.default)(r).create();return n.setData(t),n}var t=void 0,r=this.context;return t={parse:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(187),o=n(a),s=r(1),u=n(s),l=r(79),d=n(l);i.__dashjs_factory_name="BoxParser",t.default=u.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){if(void 0!==_)return _;_=!1;var t,r="1",n="1";try{"undefined"!=typeof window&&(t=window[e])}catch(e){return m("Warning: DOMStorage access denied: "+e.message),_}if(!t||e!==g&&e!==p)return _;try{t.setItem(r,n),t.removeItem(r),_=!0}catch(e){m("Warning: DOMStorage is supported, but cannot be used: "+e.message)}return _}function t(){e(g)&&f.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){m(e.message)}}})}function r(){E=(0,u.default)(v).getInstance(),t()}function n(){var e=6e5;return Math.round((new Date).getTime()/e)*e}function i(t,r){return e(t)&&E["get"+r+"CachingInfo"]().enabled}function a(e){if(!i(g,"LastMediaSettings"))return null;var t=h.replace(/\?/,e),r=JSON.parse(localStorage.getItem(t))||{},n=(new Date).getTime()-parseInt(r.timestamp,10)>=E.getLastMediaSettingsCachingInfo().ttl||!1,a=r.settings;return n&&(localStorage.removeItem(t),a=null),a}function o(e){var t=NaN;if(i(g,"LastBitrate")){var r=c.replace(/\?/,e),n=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(n.timestamp,10)>=E.getLastBitrateCachingInfo().ttl||!1,o=parseInt(n.bitrate,10);isNaN(o)||a?a&&localStorage.removeItem(r):(t=o,m("Last saved bitrate for "+e+" was "+o))}return t}function s(e,t){if(i(g,"LastMediaSettings")){var r=h.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({settings:t,timestamp:n()}))}catch(e){m(e.message)}}}function l(e,t){if(i(g,"LastBitrate")&&t){var r=c.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({bitrate:t/1e3,timestamp:n()}))}catch(e){m(e.message)}}}var v=this.context,m=(0,d.default)(v).getInstance().log,y=void 0,_=void 0,E=void 0;return y={getSavedBitrateSettings:o,setSavedBitrateSettings:l,getSavedMediaSettings:a,setSavedMediaSettings:s,isSupported:e},r(),y}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(5),u=n(s),l=r(4),d=n(l),f=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],c="dashjs_?_bitrate",h="dashjs_?_settings",g="localStorage",p="sessionStorage";i.__dashjs_factory_name="DOMStorage";var v=o.default.getSingletonFactory(i);t.default=v,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){i=e,a=t}function t(){var e=a.getCurrentRepresentationInfo(),t=e.DVRWindow.end;return e.useCalculatedLiveEdgeTime&&(t=i.getExpectedLiveEdge(),i.setClientTimeOffset(t-e.DVRWindow.end)),t}function r(){i=null,a=null}var n=void 0,i=void 0,a=void 0;return n={initialize:e,getLiveEdge:t,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="LiveEdgeFinder";var s=o.default.getSingletonFactory(i);t.default=s,e.exports=t.default},function(e,t){(function(t){"use strict";function r(e){s.length||(o(),u=!0),s[s.length]=e}function n(){for(;l<s.length;){var e=l;if(l+=1,s[e].call(),l>d){for(var t=0,r=s.length-l;t<r;t++)s[t]=s[t+l];s.length-=l,l=0}}s.length=0,l=0,u=!1}function i(e){var t=1,r=new c(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}function a(e){return function(){function t(){clearTimeout(r),clearInterval(n),e()}var r=setTimeout(t,0),n=setInterval(t,50)}}e.exports=r;var o,s=[],u=!1,l=0,d=1024,f="undefined"!=typeof t?t:self,c=f.MutationObserver||f.WebKitMutationObserver;o="function"==typeof c?i(n):a(n),r.requestFlush=o,r.makeRequestCallFromTimer=a}).call(t,function(){return this}())},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i={ERROR:1,WARNING:2,INFO:3,DEBUG:4},a=function(){function e(t,n){r(this,e),this.format="%time: [%level][%component] %message",this.component=t,this.loglevel=n||0}return n(e,[{key:"_formatMessage",value:function(e,t,r){var n=this.format.replace("%time",e);return n=n.replace("%component",this.component),n=n.replace("%level",t),n=n.replace("%message",r)}},{key:"_log",value:function(e,t){var r=(new Date).toTimeString();console.log(this._formatMessage(r,e,t))}},{key:"_err",value:function(e){var t=(new Date).toTimeString();console.error(this._formatMessage(t,"ERROR",e))}},{key:"debug",value:function(e){this.loglevel>=i.DEBUG&&this._log("DEBUG",e)}},{key:"info",value:function(e){this.loglevel>=i.INFO&&this._log("INFO",e)}},{key:"warn",value:function(e){this.loglevel>=i.WARNING&&this._log("WARNING",e)}},{key:"error",value:function(e){this.loglevel>=i.ERROR&&this._err(e)}}]),e}();e.exports=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(81),o=function(){function e(){n(this,e)}return i(e,[{key:"setParent",value:function(e){this.parent=e}},{key:"bindOnce",value:function(e,t){this.bind(e,function r(){t.apply(null,arguments),this.unbind(e,r)})}}]),e}();a.mixin(o),o.prototype.trigger=function(e){a.prototype.trigger.apply(this,arguments),this.parent&&this.parent.trigger.apply(this.parent,arguments)},e.exports=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(215);var s=r(218),u=r(80),l=r(36),d=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a));return o.options=a,o.element=e,o.videoElement=document.createElement("video"),o.videoElement.setAttribute("playsinline",!0),s(o.videoElement,{iPad:!0}),e.classList.add("html5"),e.appendChild(o.videoElement),o.playState=!1,o.options.scaleMode&&o.setScaleMode(o.options.scaleMode),"function"==typeof r&&setTimeout(r,0),o._onVolumeChange=o._onVolumeChange.bind(o),o._onPlaying=o._onPlaying.bind(o),o._onPause=o._onPause.bind(o),o._onError=o._onError.bind(o),o._onCanPlayThrough=o._onCanPlayThrough.bind(o),o._onLoadStart=o._onLoadStart.bind(o),o._onPlay=o._onPlay.bind(o),o._onEnded=o._onEnded.bind(o),o._onProgress=o._onProgress.bind(o),o._onTimeUpdate=o._onTimeUpdate.bind(o),o._onMouseMove=o._onMouseMove.bind(o),o._addEventListeners(),o}return a(t,e),o(t,[{key:"_addEventListeners",value:function(){this.videoElement.addEventListener("volumechange",this._onVolumeChange),this.videoElement.addEventListener("playing",this._onPlaying),this.videoElement.addEventListener("pause",this._onPause),this.videoElement.addEventListener("error",this._onError,!0),this.videoElement.addEventListener("canplaythrough",this._onCanPlayThrough),this.videoElement.addEventListener("loadstart",this._onLoadStart),
this.videoElement.addEventListener("play",this._onPlay),this.videoElement.addEventListener("ended",this._onEnded),this.videoElement.addEventListener("progress",this._onProgress),this.videoElement.addEventListener("timeupdate",this._onTimeUpdate),document.addEventListener("mousemove",this._onMouseMove),this._onTrackAdded=this._onTrackAdded.bind(this),this.videoElement.textTracks.addEventListener("addtrack",this._onTrackAdded)}},{key:"_removeEventListeners",value:function(){this.videoElement.removeEventListener("volumechange",this._onVolumeChange),this.videoElement.removeEventListener("playing",this._onPlaying),this.videoElement.removeEventListener("pause",this._onPause),this.videoElement.removeEventListener("error",this._onError,!0),this.videoElement.removeEventListener("canplaythrough",this._onCanPlayThrough),this.videoElement.removeEventListener("loadstart",this._onLoadStart),this.videoElement.removeEventListener("play",this._onPlay),this.videoElement.removeEventListener("ended",this._onEnded),this.videoElement.removeEventListener("progress",this._onProgress),this.videoElement.removeEventListener("timeupdate",this._onTimeUpdate),document.removeEventListener("mousemove",this._onMouseMove),this.videoElement.textTracks.removeEventListener("addtrack",this._onTrackAdded)}},{key:"_onVolumeChange",value:function(){this.trigger("volumechange",this.getVolume())}},{key:"_onPlaying",value:function(){this.playState="playing",this.trigger("media-player-state-change","playing"),this.trigger("playing")}},{key:"_onPause",value:function(){this.playState="stopped",this.trigger("media-player-state-change","stopped"),this.trigger("stopped")}},{key:"_onError",value:function(e){this.trigger("error","Unable to load video : "+(e.target.src||e.srcElement))}},{key:"_onCanPlayThrough",value:function(e){this.trigger("stream-loaded",e.target.currentSrc)}},{key:"_onLoadStart",value:function(){this.trigger("loadstart")}},{key:"_onPlay",value:function(){this.playState="playing",this.trigger("play")}},{key:"_onEnded",value:function(){this.trigger("media-player-state-change","ended"),this.trigger("ended")}},{key:"_onProgress",value:function(e){var t=this;e.target.buffered.length-1>=0&&this.trigger("progress",e.target.buffered.end(e.target.buffered.length-1)),e.target.buffered.length>0&&e.target.buffered.end(e.target.buffered.length-1)===this.videoElement.duration&&window.setTimeout(function(){t.trigger("progress",e.target.buffered.end(e.target.buffered.length-1))},500)}},{key:"_onTimeUpdate",value:function(e){this.trigger("timeupdate",e.target.currentTime)}},{key:"_onMouseMove",value:function(e){var t={mouseX:e.clientX,mouseY:e.mouseY};this.trigger("mouse-move",t)}},{key:"_onTrackAdded",value:function(e){var t=this,r=e.target[0];r.oncuechange=function(e){t.trigger("cuepoint-received",e.target)}}},{key:"load",value:function(e,t,r){this.videoElement.hasChildNodes()&&this.videoElement.removeChild(this.videoElement.getElementsByTagName("source")[0]),this.currentUrl=e;var n=this.videoElement,i=document.createElement("source");i.src=e,t&&(i.type=t),this.videoElement.appendChild(i),u.apple.device&&n.load()}},{key:"play",value:function(){var e=this;if(!this.isVod()&&u.any&&"stopped"===this.playState){var t=this.parent.activeSource;this.load(t.url,t.type)}var r=this.videoElement.play();r&&r.catch&&r.catch(function(t){e.logger.debug("Play request could not be fulfilled due to error: "+t)})}},{key:"pause",value:function(){this.videoElement.pause()}},{key:"stop",value:function(){this.videoElement.pause(),this.videoElement.currentTime=0}},{key:"setVolume",value:function(e){0===e?this.videoElement.muted=!0:this.videoElement.muted=!1,this.videoElement.volume=e/100}},{key:"getVolume",value:function(){return 100*this.videoElement.volume}},{key:"getCurrentTime",value:function(){if(this.videoElement)return this.videoElement.currentTime}},{key:"remove",value:function(){this._removeEventListeners(),this.element.removeChild(this.videoElement)}},{key:"getName",value:function(){return"html5"}},{key:"setLooping",value:function(e){this.videoElement.setAttribute("loop","true")}},{key:"isVod",value:function(){if(null===this.options.vod){var e=this.videoElement.duration,t=e===1/0;return!(!this.videoElement.seekable||!e||t)}return this.options.vod}},{key:"getDuration",value:function(){if(this.videoElement)return this.videoElement.duration}},{key:"setCurrentTime",value:function(e){this.videoElement&&(this.videoElement.currentTime=e)}},{key:"getPlayState",value:function(){return this.playState}},{key:"setScaleMode",value:function(e){"stretch"===e&&this.videoElement.classList.add("stretch")}},{key:"getEdgeServerIp",value:function(){return!1}},{key:"getBuffered",value:function(){if(this.videoElement.buffered){var e=this.videoElement.buffered,t=e.end(e.length-1);return t}}}]),t}(l);d.isSupportedByPlatform=function(){return!!document.createElement("video").canPlayType},d.canHandleStream=function(e,t){var r=document.createElement("video");if(t)return""!==r.canPlayType(t);var n=new RegExp("^http(s)?://.*(ogg|mp4|webm|avi|mpeg)");return n.test(e)},e.exports=d},function(e,t,r){"use strict";!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},r=function(e){var r=e;return t.hasOwnProperty(e)&&(r=t[e]),String.fromCharCode(r)},n=15,i=32,a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},o={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},l=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var r=this.verboseFilter[e];this.verboseLevel>=r&&console.log(this.time+" ["+e+"] "+t)}},f=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},c=function(e,t,r,n,i){this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1};c.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var h=function(e,t,r,n,i,a){this.uchar=e||" ",this.penState=new c(t,r,n,i,a)};h.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var g=function(){this.chars=[];for(var e=0;e<i;e++)this.chars.push(new h);this.pos=0,this.currPenState=new c};g.prototype={equals:function(e){for(var t=!0,r=0;r<i;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},copy:function(e){for(var t=0;t<i;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<i;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>i&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=i)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=r(e);return this.pos>=i?void d.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<i;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,r=0;r<i;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}};var p=function(){this.rows=[];for(var e=0;e<n;e++)this.rows.push(new g);this.currRow=n-1,this.nrRollUpRows=null,this.reset()};p.prototype={reset:function(){for(var e=0;e<n;e++)this.rows[e].clear();this.currRow=n-1},equals:function(e){for(var t=!0,r=0;r<n;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},copy:function(e){for(var t=0;t<n;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<n;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){var e=this.rows[this.currRow];e.backSpace()},clearToEndOfRow:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},insertChar:function(e){var t=this.rows[this.currRow];t.insertChar(e)},setPen:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},moveCursor:function(e){var t=this.rows[this.currRow];t.moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var r=this.rows[this.currRow];if(null!==e.indent){var n=e.indent,i=Math.max(n-1,0);r.setCursor(e.indent),e.color=r.chars[i].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null===this.nrRollUpRows)return void d.log("DEBUG","roll_up but nrRollUpRows not set yet");d.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")},getDisplayText:function(e){e=e||!1;for(var t=[],r="",i=-1,a=0;a<n;a++){var o=this.rows[a].getTextString();o&&(i=a+1,e?t.push("Row "+i+': "'+o+'"'):t.push(o.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},getTextAndFormat:function(){return this.rows}};var v=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new p,this.nonDisplayedMemory=new p,this.lastOutputScreen=new p,this.currRollUpRow=this.displayedMemory.rows[n-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};v.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[n-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var m=function(e,t,r){this.field=e||1,this.outputs=[t,r],this.channels=[new v(1,t),new v(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};m.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var r,n,i,a=!1;this.lastTime=e,d.setTime(e);for(var o=0;o<t.length;o+=2)if(n=127&t[o],i=127&t[o+1],0!==n||0!==i){if(d.log("DATA","["+f([t[o],t[o+1]])+"] -> ("+f([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(a=this.parseChars(n,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else d.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+f([n,i])+" orig: "+f([t[o],t[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var r=null,n=(20===e||28===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!n&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+f([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var a=this.channels[r-1];return 20===e||28===e?32===t?a.cc_RCL():33===t?a.cc_BS():34===t?a.cc_AOF():35===t?a.cc_AON():36===t?a.cc_DER():37===t?a.cc_RU(2):38===t?a.cc_RU(3):39===t?a.cc_RU(4):40===t?a.cc_FON():41===t?a.cc_RDC():42===t?a.cc_TR():43===t?a.cc_RTD():44===t?a.cc_EDM():45===t?a.cc_CR():46===t?a.cc_ENM():47===t&&a.cc_EOC():a.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},parseMidrow:function(e,t){var r=null;if((17===e||25===e)&&32<=t&&t<=47){if(r=17===e?1:2,r!==this.currChNr)return d.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[r-1];return n.cc_MIDROW(t),d.log("DEBUG","MIDROW ("+f([e,t])+")"),!0}return!1},parsePAC:function(e,t){var r=null,n=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,l=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!l)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,n=64<=t&&t<=95?1===r?a[e]:s[e]:1===r?o[e]:u[e];var d=this.interpretPAC(n,t),f=this.channels[r-1];return f.setPAC(d),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},interpretPAC:function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1===(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},parseChars:function(e,t){var n=null,i=null,a=null;if(e>=25?(n=2,a=e-8):(n=1,a=e),17<=a&&a<=19){var o=t;o=17===a?t+80:18===a?t+112:t+144,d.log("INFO","Special char '"+r(o)+"' in channel "+n),i=[o]}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var s=f(i);d.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},parseBackgroundAttributes:function(e,t){var r,n,i,a,o=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!o&&!s)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=l[n],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,a=this.channels[i-1],a.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var y=function(e,t,r){for(var n=0,i=t,a=0,o=[],s=function(e,t,r,n){if(4!==e||t<8)return null;var i=r.getUint8(n),a=r.getUint16(n+1),o=r.getUint32(n+3),s=r.getUint8(n+7);return 181==i&&49==a&&1195456820==o&&3==s};i<t+r;){if(n=e.getUint32(i),a=31&e.getUint8(i+4),6===a)for(var u=i+5,l=-1;u<i+4+n-1;){l=0;for(var d=255;255===d;)d=e.getUint8(u),l+=d,u++;var f=0;for(d=255;255===d;)d=e.getUint8(u),f+=d,u++;s(l,f,e,u)&&o.push([u,f]),u+=f}i+=n+4}return o},_=function(e,t){var r=t[0],n=[[],[]];r+=8;var i=31&e.getUint8(r);r+=2;for(var a=0;a<i;a++){var o=e.getUint8(r),s=4&o,u=3&o;r++;var l=e.getUint8(r);r++;var d=e.getUint8(r);r++,s&&(127&l)+(127&d)!==0&&(0===u?(n[0].push(l),n[0].push(d)):1===u&&(n[1].push(l),n[1].push(d)))}return n};e.logger=d,e.PenState=c,e.CaptionScreen=p,e.Cea608Parser=m,e.findCea608Nalus=y,e.extractCea608DataFromRange=_}(t)},function(e,t){"use strict";function r(){return n}Object.defineProperty(t,"__esModule",{value:!0}),t.getVersionString=r;var n="2.4.1"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="TcpList";t.TCP_CONNECTION=r;var n="HttpList";t.HTTP_REQUEST=n;var i="RepSwitchList";t.TRACK_SWITCH=i;var a="BufferLevel";t.BUFFER_LEVEL=a;var o="BufferState";t.BUFFER_STATE=o;var s="DVRInfo";t.DVR_INFO=s;var u="DroppedFrames";t.DROPPED_FRAMES=u;var l="SchedulingInfo";t.SCHEDULING_INFO=l;var d="RequestsQueue";t.REQUESTS_QUEUE=d;var f="ManifestUpdate";t.MANIFEST_UPDATE=f;var c="ManifestUpdatePeriodInfo";t.MANIFEST_UPDATE_STREAM_INFO=c;var h="ManifestUpdateRepresentationInfo";t.MANIFEST_UPDATE_TRACK_INFO=h;var g="PlayList";t.PLAY_LIST=g;var p="DVBErrors";t.DVB_ERRORS=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(107),s=n(o),u=function(){function e(t,r,n,a,o){var u=this;i(this,e),this._name=t||"",this._properties=[],this._children=n||[],this._isRoot=a||!1,this._isArray=o||!0,Array.isArray(r)&&r.forEach(function(e){u._properties.push(new s.default(e))})}return a(e,[{key:"name",get:function(){return this._name}},{key:"isRoot",get:function(){return this._isRoot}},{key:"isArray",get:function(){return this._isArray}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();t.default=u,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=1,i=1,a=function e(t,a,o,s){r(this,e),this.url=t||"",this.serviceLocation=a||t||"",this.dvb_priority=o||n,this.dvb_weight=s||i};a.DEFAULT_DVB_PRIORITY=n,a.DEFAULT_DVB_WEIGHT=i,t.default=a,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.schemeIdUri="",this.value=""};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){ir=!1,ar=!1,or=!0,lr=null,nr=null,fr=null,re.default.extend(ie.default),hr=(0,k.default)($t).getInstance()}function t(e,t,r){return pr=(0,E.default)($t).getInstance(),gr=(0,y.default)($t).getInstance(),pr.supportsMediaSource()?void(ir||(ir=!0,sr=(0,U.default)($t).getInstance(),yr=(0,u.default)($t).getInstance(),ur=(0,c.default)($t).getInstance(),ur.initialize(),Er=(0,he.default)($t).getInstance(),_r=(0,pe.default)($t).getInstance(),cr=(0,N.default)($t).getInstance(),cr.setConfig({adapter:jt()}),ot(),ye(void 0===r||r),e&&Pt(e),t&&kt(t),er("[dash.js "+q()+"] MediaPlayer has been initialized"))):void gr.capabilityError("mediasource")}function r(){return!!Tr&&!!rr}function n(){if(!ar)throw zt;(!or||a()&&ar)&&yr.play()}function i(){if(!ar)throw zt;yr.pause()}function a(){if(!ar)throw zt;return yr.isPaused()}function s(){if(!ar)throw zt;return yr.isSeeking()}function l(){if(!ar)throw zt;return yr.getIsDynamic()}function f(e){if(!Tr)throw Wt;Dt().muted=e}function h(){if(!Tr)throw Wt;return Dt().muted}function p(e){if(!Tr)throw Wt;Dt().volume=e}function m(){if(!Tr)throw Wt;return Dt().volume}function _(e){var t=["video","audio","fragmentedText"];if(e){if(t.indexOf(e)!==-1){var r=be().getCurrentBufferLevel(Se(e));return r?r:NaN}return er("Warning  - getBufferLength requested for invalid type"),NaN}return t.map(function(e){return Be(e).length>0?be().getCurrentBufferLevel(Se(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)})}function T(){var e=Vt();return e?e.manifestInfo.DVRWindowSize:0}function S(e){var t=Vt();if(!t)return 0;var r=t.range.start+e;return r>t.range.end&&(r=t.range.end),r}function A(e){if(!ar)throw zt;var t=yr.getIsDynamic()?S(e):e;yr.seek(t)}function I(e){if(!ar)throw zt;var t=Dt().currentTime;if(void 0!==e)t=vr.getTimeRelativeToStreamId(t,e);else if(yr.getIsDynamic()){var r=Vt();t=null===r?0:D()-(r.range.end-r.time)}return t}function D(){if(!ar)throw zt;var e=Dt().duration;if(yr.getIsDynamic()){var t,r=Vt();if(!r)return 0;t=r.range.end-r.range.start,e=t<r.manifestInfo.DVRWindowSize?t:r.manifestInfo.DVRWindowSize}return e}function C(){if(!ar)throw zt;return I()<0?NaN:Kt(I())}function L(){if(!ar)throw zt;return Kt(D())}function x(e,t,r){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:r});return n?o+" "+a:o}function F(e){e=Math.max(e,0);var t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(r<10?"0"+r.toString():r.toString())+":"+(n<10?"0"+n.toString():n.toString())}function B(e,t,r){oe.default.extend(e,t,r,$t)}function G(e,t,r){Jt.on(e,t,r)}function V(e,t,r){Jt.off(e,t,r)}function q(){return(0,se.getVersionString)()}function z(){return Zt}function Q(){if(!Tr)throw Wt;return Tr}function $(e){hr.setLiveDelayFragmentCount(e)}function Z(e){hr.setLiveDelay(e)}function te(){return hr.getLiveDelay()}function ne(e){hr.setUseSuggestedPresentationDelay(e)}function ae(e,t){hr.setLastBitrateCachingInfo(e,t)}function ue(e,t){hr.setLastMediaSettingsCachingInfo(e,t)}function de(e,t){sr.setMaxAllowedBitrateFor(e,t)}function ce(e){return sr.getMaxAllowedBitrateFor(e)}function ge(e,t){sr.setMaxAllowedRepresentationRatioFor(e,t)}function ve(e){return sr.getMaxAllowedRepresentationRatioFor(e)}function ye(e){or=e}function _e(){return or}function Ee(e){hr.setScheduleWhilePaused(e)}function Te(){return hr.getScheduleWhilePaused()}function be(){return _r}function Se(e){return cr.getReadOnlyMetricsFor(e)}function Re(e){if(!ar)throw zt;return sr.getQualityFor(e,vr.getActiveStreamInfo())}function Ae(e,t){if(!ar)throw zt;sr.setPlaybackQuality(e,vr.getActiveStreamInfo(),t)}function we(){sr.setElementSize(),sr.setWindowResizeEventCalled(!0)}function Ie(){return sr.getLimitBitrateByPortal()}function Oe(e){sr.setLimitBitrateByPortal(e)}function De(){return sr.getUsePixelRatioInLimitBitrateByPortal()}function Pe(e){sr.setUsePixelRatioInLimitBitrateByPortal(e)}function Ce(e){if(!ar)throw zt;void 0===br&&(br=(0,O.default)($t).getInstance());for(var t=Dt().textTracks,r=t.length,n=0;n<r;n++){var i=t[n],a=e===n?"showing":"hidden";i.mode!==a&&(i.mode=a)}br.setTextTrack()}function Me(){var e=NaN;return br&&(e=br.getCurrentTrackIdx()),e}function Le(e){if(!ar)throw zt;var t=qt();return t?t.getBitrateListFor(e):[]}function ke(e,t){sr.setInitialBitrateFor(e,t)}function xe(e){if(!ar)throw zt;return sr.getInitialBitrateFor(e)}function Ne(e,t){sr.setInitialRepresentationRatioFor(e,t)}function Fe(e){return sr.getInitialRepresentationRatioFor(e)}function Ue(e){if(!ar)throw zt;return fr.getStreamsInfo(e)}function Be(e){if(!ar)throw zt;var t=vr.getActiveStreamInfo();return t?ur.getTracksFor(e,t):[]}function je(e,t,r){if(!ar)throw zt;return r=r||fr.getStreamsInfo(t)[0],r?fr.getAllMediaInfoForType(t,r,e):[]}function Ge(e){if(!ar)throw zt;var t=vr.getActiveStreamInfo();return t?ur.getCurrentTrackFor(e,t):null}function He(e,t){ur.setInitialSettings(e,t)}function Ve(e){return ur.getInitialSettings(e)}function Ke(e){if(!ar)throw zt;ur.setTrack(e)}function qe(e){return ur.getSwitchMode(e)}function Ye(e,t){ur.setSwitchMode(e,t)}function ze(e){ur.setSelectionModeForInitialTrack(e)}function We(){return ur.getSelectionModeForInitialTrack()}function Qe(){return sr.getAutoSwitchBitrateFor("video")||sr.getAutoSwitchBitrateFor("audio")}function Xe(e){sr.setAutoSwitchBitrateFor("video",e),sr.setAutoSwitchBitrateFor("audio",e)}function $e(e){return sr.getAutoSwitchBitrateFor(e)}function Je(e,t){sr.setAutoSwitchBitrateFor(e,t)}function Ze(e){hr.setFastSwitchEnabled(e)}function et(){return hr.getFastSwitchEnabled()}function tt(e){hr.setBufferOccupancyABREnabled(e)}function rt(e,t){var r=Ut(),n=this,i=function e(i){i.error?t(null,i.error):t(i.manifest),Jt.off(re.default.INTERNAL_MANIFEST_LOADED,e,n),r.reset()};Jt.on(re.default.INTERNAL_MANIFEST_LOADED,i,n);var a=(0,P.default)($t).getInstance();a.initialize(),r.load(a.parseURI(e))}function nt(e,t){it(e,t);var r=new o.default;r.schemeIdUri=e,r.value=t,hr.getUTCTimingSources().push(r)}function it(e,t){var r=hr.getUTCTimingSources();r.forEach(function(n,i){n.schemeIdUri===e&&n.value===t&&r.splice(i,1)})}function at(){hr.setUTCTimingSources([])}function ot(){nt(k.default.DEFAULT_UTC_TIMING_SOURCE.scheme,k.default.DEFAULT_UTC_TIMING_SOURCE.value)}function st(e){hr.setUseManifestDateHeaderTimeSource(e)}function ut(e){hr.setBufferToKeep(e)}function lt(e){hr.setBufferPruningInterval(e)}function dt(e){hr.setStableBufferTime(e)}function ft(e){hr.setBufferTimeAtTopQuality(e)}function ct(e){hr.setBufferTimeAtTopQualityLongForm(e)}function ht(e){hr.setLongFormContentDurationThreshold(e)}function gt(e){hr.setRichBufferThreshold(e)}function pt(e){hr.setBandwidthSafetyFactor(e)}function vt(){return hr.getBandwidthSafetyFactor()}function mt(e){hr.setAbandonLoadTimeout(e)}function yt(e){hr.setFragmentRetryAttempts(e)}function _t(e){hr.setFragmentRetryInterval(e)}function Et(e){Tt(void 0,e)}function Tt(e,t){hr.setXHRWithCredentialsForType(e,t)}function bt(e){return hr.getXHRWithCredentialsForType(e)}function St(){return Gt()}function Rt(e){lr=e}function At(e){nr=e}function wt(e){var t=(0,b.default)($t).getInstance();t.setConfig({videoModel:Tr}),t.initialize(),t.displayCConTop(e)}function It(){return Tr?Tr.getVideoContainer():null}function Ot(e){if(!Tr)throw Wt;Tr.setVideoContainer(e)}function Dt(){if(!Tr)throw Wt;return Tr.getElement()}function Pt(e){if(!ir)throw Xt;Tr=null,e&&(Tr=(0,K.default)($t).getInstance(),Tr.initialize(),Tr.setElement(e),Gt(),Ht()),Nt()}function Ct(){return Tr?Tr.getTTMLRenderingDiv():null}function Mt(e){if(!Tr)throw Wt;Tr.setTTMLRenderingDiv(e)}function Lt(){if(!rr)throw Qt;return rr}function kt(e){if(!ir)throw Xt;if("string"==typeof e){var t=(0,P.default)($t).getInstance();t.initialize(),rr=t.parseURI(e)}else rr=e;Nt()}function xt(){kt(null),Pt(null),nr=null,lr=null}function Nt(){ar?(ar=!1,fr.reset(),vr.reset(),yr.reset(),sr.reset(),mr.reset(),ur.reset(),vr=null,dr=null,r()&&Yt()):r()&&Yt()}function Ft(){var e=(0,H.default)($t).getInstance();e.initialize();var t=(0,R.default)($t).getInstance();t.setConfig({dashManifestModel:Er}),ur.initialize(),ur.setConfig({errHandler:gr}),mr=(0,Y.default)($t).getInstance(),mr.initialize(),mr.setConfig({abrRulesCollection:e}),vr=(0,d.default)($t).getInstance(),vr.setConfig({capabilities:pr,manifestLoader:Ut(),manifestModel:(0,M.default)($t).getInstance(),dashManifestModel:Er,protectionController:lr,adapter:fr,metricsModel:cr,dashMetrics:_r,liveEdgeFinder:(0,v.default)($t).getInstance(),mediaSourceController:(0,W.default)($t).getInstance(),timeSyncController:(0,j.default)($t).getInstance(),baseURLController:(0,X.default)($t).getInstance(),
errHandler:gr,timelineConverter:(0,me.default)($t).getInstance()}),vr.initialize(or,nr),sr.setConfig({abrRulesCollection:e,rulesController:mr,streamController:vr})}function Ut(){return(0,g.default)($t).create({errHandler:gr,parser:Bt(),metricsModel:cr,requestModifier:(0,w.default)($t).getInstance()})}function Bt(){return(0,fe.default)($t).create()}function jt(){return fr=(0,le.default)($t).getInstance(),fr.initialize(),fr.setConfig({dashManifestModel:Er}),fr}function Gt(){if(lr)return lr;var e=dashjs.Protection;if("function"==typeof e){var t=e($t).create();return re.default.extend(e.events),ie.default.extend(e.events,{publicOnly:!0}),lr=t.createProtectionSystem({log:er,videoModel:Tr,capabilities:pr,eventBus:Jt,adapter:fr})}return null}function Ht(){if(dr)return dr;var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e($t).create();return dr=t.createMetricsReporting({log:er,eventBus:Jt,mediaElement:Dt(),dashManifestModel:Er,metricsModel:cr})}return null}function Vt(){var e=cr.getReadOnlyMetricsFor("video")||cr.getReadOnlyMetricsFor("audio");return _r.getCurrentDVRInfo(e)}function Kt(e){var t,r,n=Vt();return n?(t=n.manifestInfo.availableFrom.getTime()/1e3,r=e+(t+n.range.start)):0}function qt(){if(!ar)throw zt;var e=vr.getActiveStreamInfo();return e?vr.getStreamById(e.id):null}function Yt(){ar||(ar=!0,er("Playback Initialized"),Ft(),"string"==typeof rr?vr.load(rr):vr.loadWithManifest(rr))}var zt="You must first call play() to init playback before calling this method",Wt="You must first call attachView() to set the video element before calling this method",Qt="You must first call attachSource() with a valid source before calling this method",Xt="MediaPlayer not initialized!",$t=this.context,Jt=(0,ee.default)($t).getInstance(),Zt=(0,J.default)($t).getInstance(),er=Zt.log,tr=void 0,rr=void 0,nr=void 0,ir=void 0,ar=void 0,or=void 0,sr=void 0,ur=void 0,lr=void 0,dr=void 0,fr=void 0,cr=void 0,hr=void 0,gr=void 0,pr=void 0,vr=void 0,mr=void 0,yr=void 0,_r=void 0,Er=void 0,Tr=void 0,br=void 0;return tr={initialize:t,on:G,off:V,extend:B,attachView:Pt,attachSource:kt,isReady:r,play:n,isPaused:a,pause:i,isSeeking:s,isDynamic:l,seek:A,setMute:f,isMuted:h,setVolume:p,getVolume:m,time:I,duration:D,timeAsUTC:C,durationAsUTC:L,getActiveStream:qt,getDVRWindowSize:T,getDVRSeekOffset:S,convertToTimeCode:F,formatUTC:x,getVersion:q,getDebug:z,getBufferLength:_,getVideoModel:Q,getVideoContainer:It,getTTMLRenderingDiv:Ct,getVideoElement:Dt,getSource:Lt,setLiveDelayFragmentCount:$,setLiveDelay:Z,getLiveDelay:te,useSuggestedPresentationDelay:ne,enableLastBitrateCaching:ae,enableLastMediaSettingsCaching:ue,setMaxAllowedBitrateFor:de,getMaxAllowedBitrateFor:ce,setMaxAllowedRepresentationRatioFor:ge,getMaxAllowedRepresentationRatioFor:ve,setAutoPlay:ye,getAutoPlay:_e,setScheduleWhilePaused:Ee,getScheduleWhilePaused:Te,getDashMetrics:be,getMetricsFor:Se,getQualityFor:Re,setQualityFor:Ae,updatePortalSize:we,getLimitBitrateByPortal:Ie,setLimitBitrateByPortal:Oe,getUsePixelRatioInLimitBitrateByPortal:De,setUsePixelRatioInLimitBitrateByPortal:Pe,setTextTrack:Ce,getBitrateInfoListFor:Le,setInitialBitrateFor:ke,getInitialBitrateFor:xe,setInitialRepresentationRatioFor:Ne,getInitialRepresentationRatioFor:Fe,getStreamsFromManifest:Ue,getTracksFor:Be,getTracksForTypeFromManifest:je,getCurrentTrackFor:Ge,setInitialMediaSettingsFor:He,getInitialMediaSettingsFor:Ve,setCurrentTrack:Ke,getTrackSwitchModeFor:qe,setTrackSwitchModeFor:Ye,setSelectionModeForInitialTrack:ze,getSelectionModeForInitialTrack:We,getAutoSwitchQuality:Qe,setAutoSwitchQuality:Xe,setFastSwitchEnabled:Ze,getFastSwitchEnabled:et,getAutoSwitchQualityFor:$e,setAutoSwitchQualityFor:Je,enableBufferOccupancyABR:tt,setBandwidthSafetyFactor:pt,getBandwidthSafetyFactor:vt,setAbandonLoadTimeout:mt,retrieveManifest:rt,addUTCTimingSource:nt,removeUTCTimingSource:it,clearDefaultUTCTimingSources:at,restoreDefaultUTCTimingSources:ot,setBufferToKeep:ut,setBufferPruningInterval:lt,setStableBufferTime:dt,setBufferTimeAtTopQuality:ft,setFragmentLoaderRetryAttempts:yt,setFragmentLoaderRetryInterval:_t,setXHRWithCredentials:Et,setXHRWithCredentialsForType:Tt,getXHRWithCredentialsForType:bt,setBufferTimeAtTopQualityLongForm:ct,setLongFormContentDurationThreshold:ht,setRichBufferThreshold:gt,getProtectionController:St,attachProtectionController:Rt,setProtectionData:At,enableManifestDateHeaderTimeSource:st,displayCaptionsOnTop:wt,attachVideoContainer:Ot,attachTTMLRenderingDiv:Mt,getCurrentTextTrackIndex:Me,reset:xt},e(),tr}Object.defineProperty(t,"__esModule",{value:!0});var a=r(63),o=n(a),s=r(9),u=n(s),l=r(24),d=n(l),f=r(15),c=n(f),h=r(124),g=n(h),p=r(52),v=n(p),m=r(12),y=n(m),_=r(185),E=n(_),T=r(43),b=n(T),S=r(30),R=n(S),A=r(35),w=n(A),I=r(16),O=n(I),D=r(44),P=n(D),C=r(33),M=n(C),L=r(5),k=n(L),x=r(10),N=n(x),F=r(14),U=n(F),B=r(137),j=n(B),G=r(73),H=n(G),V=r(18),K=n(V),q=r(72),Y=n(q),z=r(134),W=n(z),Q=r(130),X=n(Q),$=r(4),J=n($),Z=r(3),ee=n(Z),te=r(2),re=n(te),ne=r(22),ie=n(ne),ae=r(1),oe=n(ae),se=r(58),ue=r(21),le=n(ue),de=r(106),fe=n(de),ce=r(13),he=n(ce),ge=r(11),pe=n(ge),ve=r(40),me=n(ve);i.__dashjs_factory_name="MediaPlayer";var ye=oe.default.getClassFactory(i);ye.events=ie.default,t.default=ye,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t,r){var n,i=t.match(o);if(i){try{n=l[i[1]](s).create({eventBus:e.eventBus}),n.initialize(i[1],r,i[3],i[5])}catch(e){n=null,a("MetricsHandlerFactory: Could not create handler for type "+i[1]+" with args "+i[3]+", "+i[5]+" ("+e.message+")")}return n}}function r(e,t){l[e]=t}function n(e){delete l[e]}var i=void 0,a=e.log,o=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,l={BufferLevel:u.default,DVBErrors:d.default,HttpList:c.default,PlayList:g.default,RepSwitchList:g.default,TcpList:g.default};return i={create:t,register:r,unregister:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(145),u=n(s),l=r(146),d=n(l),f=r(148),c=n(f),h=r(147),g=n(h);i.__dashjs_factory_name="MetricsHandlerFactory",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){var r;try{r=i[e.schemeIdUri](a).create(),r.initialize(e,t)}catch(t){r=null,o("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+t.message+")")}return r}function r(e,t){i[e]=t}function n(e){delete i[e]}var i={"urn:dvb:dash:reporting:2014":u.default},a=this.context,o=e.log,s=void 0;return s={create:t,register:r,unregister:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(149),u=n(s);i.__dashjs_factory_name="ReportingFactory",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return{reconstructFullMetricName:function(e,t,r){var n=e;return t&&(n+="("+t,r&&r.length&&(n+=","+r),n+=")"),n},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="HandlerHelpers",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var r=null,n=(0,u.default)(i).getInstance();n.setConfig({log:e.log}),n.initialize();var a=t(e);return!r&&a&&(r=(0,o.default)(i).create({protectionModel:a,protectionKeyController:n,adapter:e.adapter,eventBus:e.eventBus,log:e.log}),e.capabilities.setEncryptedMediaSupported(!0)),r}function t(e){var t=e.log,n=e.eventBus,a=e.videoModel.getElement();return void 0!==a.onencrypted&&void 0!==a.mediaKeys&&void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(t("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,c.default)(i).create({log:t,eventBus:n})):r(a,E)?(t("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,g.default)(i).create({log:t,eventBus:n,api:r(a,E)})):r(a,_)?(t("EME detected on this user agent! (ProtectionModel_01b)"),(0,v.default)(i).create({log:t,eventBus:n,api:r(a,_)})):(t("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null)}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];if("function"==typeof e[n[Object.keys(n)[0]]])return n}return null}var n=void 0,i=this.context;return n={createProtectionSystem:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(160),o=n(a),s=r(34),u=n(s),l=r(159),d=n(l),f=r(165),c=n(f),h=r(166),g=n(h),p=r(164),v=n(p),m=r(1),y=n(m),_=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],E=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];i.__dashjs_factory_name="Protection";var T=y.default.getClassFactory(i);T.events=d.default,t.default=T,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n){if(r(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}return n(e,[{key:"toJWK",value:function(){var e,t=this.keyPairs.length,r={keys:[]};for(e=0;e<t;e++){var n={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};r.keys.push(n)}this.type&&(r.type=this.type);var i=JSON.stringify(r),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=i.charCodeAt(e);return o}}]),e}();t.default=i,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,n){r(this,e),this.keyID=t,this.key=n};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){return h.mediaInfo.streamInfo}function r(){return h.mediaInfo}function n(){return h}function i(){return p}function a(){return h.mediaInfo.streamInfo.manifestInfo}function o(){return g}function s(){return v}function u(){return m}function l(){return y}function d(){return _}function f(){return E}var c=void 0,h=e.streamProcessor.getCurrentRepresentationInfo(),g=e.streamProcessor,p=e.currentValue,v=e.playbackIndex,m=e.switchHistory,y=e.droppedFramesHistory,_=e.currentRequest,E=e.hasRichBuffer;return c={getCurrentValue:i,getManifestInfo:a,getMediaInfo:r,getPlaybackIndex:s,getDroppedFramesHistory:l,getCurrentRequest:d,getSwitchHistory:u,getStreamInfo:t,getStreamProcessor:o,getTrackInfo:n,hasRichBuffer:f}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="RulesContext",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){l={}}function t(e){e&&e.abrRulesCollection&&(l[h]=e.abrRulesCollection)}function r(e,t,r,n,a,o){var s,l,d={},f={},c=e.length,h=c,g=i(t,n),p=function(e){var t,i,a;if(e.value!==u.default.NO_CHANGE){var s=o(d[e.priority],e.value);s!==d[e.priority]&&(d[e.priority]=s,f[e.priority]=e.reason)}--c||(d[u.default.WEAK]!==u.default.NO_CHANGE&&(a=u.default.WEAK,t=d[u.default.WEAK],i=f[u.default.WEAK]),d[u.default.DEFAULT]!==u.default.NO_CHANGE&&(a=u.default.DEFAULT,t=d[u.default.DEFAULT],i=f[u.default.DEFAULT]),d[u.default.STRONG]!==u.default.NO_CHANGE&&(a=u.default.STRONG,t=d[u.default.STRONG],i=f[u.default.STRONG]),a!=u.default.STRONG&&a!=u.default.WEAK&&(a=u.default.DEFAULT),r(void 0!==t?{value:t,confidence:a,reason:i}:{value:n,confidence:a,reason:{name:"NO_CHANGE"}}))};for(d[u.default.STRONG]=u.default.NO_CHANGE,d[u.default.WEAK]=u.default.NO_CHANGE,d[u.default.DEFAULT]=u.default.NO_CHANGE,l=0;l<h;l++)s=e[l],s.execute(g,p)}function n(){var e,t,r=l[h],n=(r.getRules(d.default.QUALITY_SWITCH_RULES)||[]).concat(r.getRules(d.default.ABANDON_FRAGMENT_RULES)||[]),i=n.length;for(t=0;t<i;t++)e=n[t],"function"==typeof e.reset&&e.reset();l={}}function i(e,t){return(0,o.default)(a).create({streamProcessor:e,currentValue:t})}var a=this.context,s=void 0,l=void 0;return s={initialize:e,setConfig:t,applyRules:r,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(71),o=n(a),s=r(7),u=n(s),l=r(73),d=n(l),f=r(1),c=n(f),h=0;i.__dashjs_factory_name="RulesController";var g=c.default.getSingletonFactory(i);g.ABR_RULE=h,t.default=g,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){f=[],h=[];var e=(0,b.default)(s).getInstance(),t=(0,R.default)(s).getInstance(),r=(0,E.default)(s).getInstance();r.getBufferOccupancyABREnabled()?(f.push((0,v.default)(s).create({metricsModel:e,dashMetrics:(0,R.default)(s).getInstance()})),h.push((0,y.default)(s).create({metricsModel:e,dashMetrics:(0,R.default)(s).getInstance()}))):(f.push((0,o.default)(s).create({metricsModel:e,dashMetrics:t})),f.push((0,u.default)(s).create({metricsModel:e})),f.push((0,g.default)(s).create()),f.push((0,c.default)(s).create()),h.push((0,d.default)(s).create()))}function t(e){switch(e){case D:return f;case P:return h;default:return null}}function r(e){return e.filter(function(e){return e.value>O.default.NO_CHANGE})}function n(e){if(0!==e.length)return e.reduce(function(e,t){return e.value<t.value?e:t})}function i(e){var t=f.map(function(t){return t.getMaxIndex(e)}),i=r(t),a=n(i);return a||(0,O.default)(s).create()}function a(e){var t=h.map(function(t){return t.shouldAbandon(e)}),i=r(t),a=n(i);return a||(0,O.default)(s).create()}var s=this.context,l=void 0,f=void 0,h=void 0;return l={initialize:e,getRules:t,getMaxQuality:i,shouldAbandonFragment:a}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(179),o=n(a),s=r(177),u=n(s),l=r(174),d=n(l),f=r(176),c=n(f),h=r(178),g=n(h),p=r(74),v=n(p),m=r(175),y=n(m),_=r(5),E=n(_),T=r(10),b=n(T),S=r(11),R=n(S),A=r(1),w=n(A),I=r(7),O=n(I),D="qualitySwitchRules",P="abandonFragmentRules";i.__dashjs_factory_name="ABRRulesCollection";var C=w.default.getSingletonFactory(i);C.QUALITY_SWITCH_RULES=D,C.ABANDON_FRAGMENT_RULES=P,t.default=C,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){j={},G={},H={},V=[],K=(0,d.default)(k).getInstance(),q=(0,c.default)(k).getInstance(),Y=(0,p.default)(k).getInstance(),U.on(_.default.BUFFER_EMPTY,v,B),U.on(_.default.PLAYBACK_SEEKING,y,B),U.on(_.default.PERIOD_SWITCH_STARTED,E,B),U.on(_.default.MEDIA_FRAGMENT_LOADED,D,B)}function r(e){return e.map(function(e){return Math.log(e)})}function n(e,t,n,i){var a=NaN;if(i?(a=0,i.forEach(function(e,t){e>i[a]&&(a=t)})):(i=r(n),a=i.length-1),0===a)return null;var o=1-i[0]+(i[a]-i[0])/(t/e-1),s=e/(i[0]+o-1);return{utilities:i,gp:o,Vp:s}}function a(e){var t={},r=e.getMediaInfo(),i=e.getStreamProcessor(),a=e.getStreamInfo(),o=e.getTrackInfo(),s=i.isDynamic(),u=a.manifestInfo.duration,l=o.fragmentDuration,d=r.bitrateList.map(function(e){return e.bandwidth}),f=n(w,I,d,null);if(null===f)return t.state=b,t;if(t.state=S,t.bitrates=d,t.utilities=f.utilities,t.Vp=f.Vp,t.gp=f.gp,t.isDynamic=s,t.movieDuration=u,t.fragmentDuration=l,t.bandwidthSafetyFactor=K.getBandwidthSafetyFactor(),t.rebufferSafetyFactor=O,t.bufferTarget=K.getStableBufferTime(),t.lastQuality=0,t.placeholderBuffer=0,t.throughputCount=s?M:L,A){for(var c="",h=0;h<d.length;++h){var g=f.utilities[h],p=d[h],v=0;if(h>0){var m=f.utilities[h-1],y=d[h-1];v=f.Vp*((m*p-g*y)/(p-y)+f.gp)}var _=f.Vp*(g+f.gp);c+="\n"+h+":"+(1e-6*d[h]).toFixed(3)+"Mbps "+v.toFixed(3)+"/"+_.toFixed(3)}x("BolaDebug "+r.type+" bitrates"+c)}return t}function s(e,t){for(var r=e.bitrates.length,n=NaN,i=NaN,a=0;a<r;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||o>=i)&&(i=o,n=a)}return n}function u(e,t){for(var r=N.getHttpRequests(e),n=[],i=r.length-1;i>=0&&n.length<t;--i){var a=r[i];a.type===h.HTTPRequest.MEDIA_SEGMENT_TYPE&&a._tfinish&&a.tresponse&&a.trace&&n.push(a)}return n}function l(e,t,r){var n=u(e,t);if(0===n.length)return 0;for(var i=0,a="",o=0;o<n.length;++o){var s=.001*(n[o]._tfinish.getTime()-n[o].trequest.getTime()),l=8*n[o].trace.reduce(function(e,t){return e+t.b[0]},0);A&&(a+=" "+(1e-6*l).toFixed(3)+"/"+s.toFixed(3)+"="+(1e-6*l/s).toFixed(3)+"Mbps"),i+=s/l}return A&&x("BolaDebug "+r+" BolaRule recent throughput = "+(n.length/(1e6*i)).toFixed(3)+"Mbps:"+a),n.length/i}function f(e,t){var r=0;return e.bitrates.some(function(e,n){return e>t||(r=n,!1)}),r}function g(e,t){var r=Date.now(),n=j[t],i=H[t],a=NaN;if(j[t]=r,H[t]=!1,!i){var o=u(e,1);o.length>0&&(a=o[0]._tfinish.getTime(),a>r&&(a=r))}var s=0;return s=i||n>a?r-n:r-a,isNaN(s)||s<=0?0:.001*s}function v(){A&&x("BolaDebug BUFFER_EMPTY"),V.forEach(function(e){var t=F.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var r=t.BolaState[0]._s;r.state===R&&(r.placeholderBuffer=0,F.updateBolaState(e,r))}})}function y(e){A&&x("BolaDebug PLAYBACK_SEEKING "+e.seekTime.toFixed(3)),V.forEach(function(e){var t=F.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var r=t.BolaState[0]._s;r.state!==b&&(r.state=S),F.updateBolaState(e,r)}}),G={},H={}}function E(){}function D(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=e.chunk.mediaInfo.type,r=e.chunk.start;void 0===t||isNaN(r)||(r<=G[t]?H[t]=!0:(H[t]=!1,G[t]=r))}}function P(e){var t=e.getStreamProcessor();t.getScheduleController().setTimeToLoadDelay(0);var r=(0,o.default)(k).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name}),n=e.getMediaInfo(),u=n.type,d=F.getReadOnlyMetricsFor(u);if(0===d.BolaState.length){A&&x("BolaDebug "+u+"\nBolaDebug "+u+" BolaRule for state=- fragmentStart="+Y.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var c=a(e);F.updateBolaState(u,c);var h=0;if(c.state!==b){V.push(u);var p=l(d,c.throughputCount,u);if(0===p)return A&&x("BolaDebug "+u+" BolaRule quality unchanged for INITIALIZE"),r;h=f(c,p*c.bandwidthSafetyFactor),c.lastQuality=h,r.value=h,r.reason.state=c.state,r.reason.throughput=p}return A&&x("BolaDebug "+u+" BolaRule quality "+h+" for INITIALIZE"),r}var v=d.BolaState[0]._s;if(v.state===b)return A&&x("BolaDebug "+u+" BolaRule quality 0 for ONE_BITRATE"),r;var m=v.bitrates,y=v.utilities;A&&x("BolaDebug "+u+"\nBolaDebug "+u+" EXECUTE BolaRule for state="+v.state+" fragmentStart="+Y.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var _=N.getCurrentBufferLevel(d)?N.getCurrentBufferLevel(d):0,E=l(d,v.throughputCount,u);_<=.1&&(v.placeholderBuffer=0);var T=g(d,u);T>0&&(v.placeholderBuffer+=T),v.placeholderBuffer<0&&(v.placeholderBuffer=0);var w=_+v.placeholderBuffer,I=s(v,w);if(A&&x("BolaDebug "+u+" BolaRule bufferLevel="+_.toFixed(3)+"(+"+v.placeholderBuffer.toFixed(3)+"="+w.toFixed(3)+") recentThroughput="+(1e-6*E).toFixed(3)+" tentativeQuality="+I),v.state===S){var h=f(v,E*v.bandwidthSafetyFactor);if(_>v.fragmentDuration/O){v.state=R;for(var D=0,P=0;P<h;++P){var C=v.Vp*(v.gp+(m[h]*y[P]-m[P]*y[h])/(m[h]-m[P]));C>D&&(D=C)}D>_&&(v.placeholderBuffer=D-_)}return A&&x("BolaDebug "+u+" BolaRule quality "+h+" for STARTUP"),v.lastQuality=h,F.updateBolaState(u,v),r.value=h,r.reason.state=S,r.reason.throughput=E,r}if(I>v.lastQuality){var h=f(v,E);I>h&&(h<v.lastQuality&&(h=v.lastQuality),I=h)}if(E>0)for(var M=O*E*_/v.fragmentDuration;I>0&&m[I]>M;)--I;var L=0,U=v.Vp*(y[I]+v.gp);return L=w-U,L>0&&(L>v.placeholderBuffer?(L-=v.placeholderBuffer,v.placeholderBuffer=0):(v.placeholderBuffer-=L,L=0)),L>0?I===m.length-1?L=0:t.getScheduleController().setTimeToLoadDelay(1e3*L):L=0,v.lastQuality=I,F.updateBolaState(u,v),r.value=I,r.reason.state=v.state,r.reason.throughput=E,r.reason.bufferLevel=_,A&&x("BolaDebug "+u+" BolaRule quality "+I+" delay="+L.toFixed(3)+" for STEADY"),r}function C(){U.off(_.default.BUFFER_EMPTY,v,B),U.off(_.default.PLAYBACK_SEEKING,y,B),U.off(_.default.PERIOD_SWITCH_STARTED,E,B),U.off(_.default.MEDIA_FRAGMENT_LOADED,D,B),t()}var M=2,L=3,k=this.context,x=(0,T.default)(k).getInstance().log,N=e.dashMetrics,F=e.metricsModel,U=(0,m.default)(k).getInstance(),B=void 0,j=void 0,G=void 0,H=void 0,V=void 0,K=void 0,q=void 0,Y=void 0;return B={getMaxIndex:P,reset:C},t(),B}Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),o=n(a),s=r(1),u=n(s),l=r(5),d=n(l),f=r(9),c=n(f),h=r(6),g=r(21),p=n(g),v=r(3),m=n(v),y=r(2),_=n(y),E=r(4),T=n(E),b=0,S=1,R=2,A=!1,w=10,I=30,O=.5;i.__dashjs_factory_name="BolaRule";var D=u.default.getClassFactory(i);D.BOLA_STATE_ONE_BITRATE=b,D.BOLA_STATE_STARTUP=S,D.BOLA_STATE_STEADY=R,D.BOLA_DEBUG=A,t.default=D,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var r=0;for(r=0;r<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[r].start;r++);for(this.customTimeRangeArray.splice(r,0,{start:e,end:t}),r=0;r<this.customTimeRangeArray.length-1;r++)this.mergeRanges(r,r+1)&&r--;this.length=this.customTimeRangeArray.length}function t(){this.customTimeRangeArray=[],this.length=0}function r(e,t){for(var r=0;r<this.customTimeRangeArray.length;r++)if(e<=this.customTimeRangeArray[r].start&&t>=this.customTimeRangeArray[r].end)this.customTimeRangeArray.splice(r,1),r--;else{if(e>this.customTimeRangeArray[r].start&&t<this.customTimeRangeArray[r].end){this.customTimeRangeArray.splice(r+1,0,{start:t,end:this.customTimeRangeArray[r].end}),this.customTimeRangeArray[r].end=e;break}e>this.customTimeRangeArray[r].start&&e<this.customTimeRangeArray[r].end?this.customTimeRangeArray[r].end=e:t>this.customTimeRangeArray[r].start&&t<this.customTimeRangeArray[r].end&&(this.customTimeRangeArray[r].start=t)}this.length=this.customTimeRangeArray.length}function n(e,t){var r=this.customTimeRangeArray[e],n=this.customTimeRangeArray[t];return r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(r.end=n.end,this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(r.start=n.start,this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end?(this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end&&(this.customTimeRangeArray.splice(t,1),!0)}function i(e){return this.customTimeRangeArray[e].start}function a(e){return this.customTimeRangeArray[e].end}var o=[],s=0;return{customTimeRangeArray:o,length:s,add:e,clear:t,remove:r,mergeRanges:n,start:i,end:a}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="CustomTimeRanges",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var t=e.streamId,r=e.mediaInfo.type,i=e.quality;n[t]=n[t]||{},n[t][r]=n[t][r]||{},n[t][r][i]=e}function t(e,t,r){return n[e][t][r]}function r(){n={}}var n={},i={save:e,extract:t,reset:r};return i}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="InitCache",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(19),u=n(s),l=function(e){function t(e,r){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.type=r||null,this.mediaType="stream",this.responseType="text"}return a(t,e),t}(u.default);t.default=l,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};n.INITIAL_PLAYOUT_START_REASON="initial_playout",n.SEEK_START_REASON="seek",n.RESUME_FROM_PAUSE_START_REASON="resume",n.METRICS_COLLECTION_START_REASON="metrics_collection_start";var i=function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};i.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",i.REBUFFERING_REASON="rebuffering",i.USER_REQUEST_STOP_REASON="user_request",i.END_OF_PERIOD_STOP_REASON="end_of_period",i.END_OF_CONTENT_STOP_REASON="end_of_content",i.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",i.FAILURE_STOP_REASON="failure",t.PlayList=n,t.PlayListTrace=i},function(e,t,r){/*! codem-isoboxer v0.2.7 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
var n={};n.parseBuffer=function(e){return new i(e).parse()},n.addBoxParser=function(e,t){"string"==typeof e&&"function"==typeof t&&(a.prototype._boxParsers[e]=t)},n.Utils={},n.Utils.dataViewToString=function(e,t){var r=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(r).decode(e);var n=[],i=0;if("utf-8"===r)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?(a=(31&a)<<6,a|=63&e.getUint8(i++)):a<240?(a=(15&a)<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++)):(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++))),n.push(String.fromCharCode(a))}else for(;i<e.byteLength;)n.push(String.fromCharCode(e.getUint8(i++)));return n.join("")},t.parseBuffer=n.parseBuffer,t.addBoxParser=n.addBoxParser,t.Utils=n.Utils,n.Cursor=function(e){this.offset="undefined"==typeof e?0:e};var i=function(e){this._raw=new DataView(e),this._cursor=new n.Cursor,this.boxes=[]};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var r=[];return i._sweep.call(this,e,r,t),r},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=a.parse(this);if("undefined"==typeof e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,r){this.type&&this.type==e&&t.push(this);for(var n in this.boxes){if(t.length&&r)return;i._sweep.call(this.boxes[n],e,t,r)}};var a=function(){this._cursor=new n.Cursor};a.parse=function(e){var t=new a;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},a.prototype._readInt=function(e){var t=null;switch(e){case 8:t=this._raw.getInt8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getInt16(this._cursor.offset-this._raw.byteOffset);break;case 32:t=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset);break;case 64:var r=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset),n=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset+4);t=r*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,t},a.prototype._readUint=function(e){var t=null;switch(e){case 8:t=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset);break;case 24:var r=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset),n=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset+2);t=(r<<8)+n;break;case 32:t=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset);break;case 64:var r=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset),n=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset+4);t=r*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,t},a.prototype._readString=function(e){for(var t="",r=0;r<e;r++){var n=this._readUint(8);t+=String.fromCharCode(n)}return t},a.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0==t)break;e+=String.fromCharCode(t)}return e},a.prototype._readTemplate=function(e){var t=this._readUint(e/2),r=this._readUint(e/2);return t+r/Math.pow(2,e/2)},a.prototype._parseBox=function(){if(this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)return void(this._root._incomplete=!0);switch(this.size=this._readUint(32),this.type=this._readString(4),1==this.size&&(this.largesize=this._readUint(64)),"uuid"==this.type&&(this.usertype=this._readString(16)),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}!this._incomplete&&this._boxParsers[this.type]&&this._boxParsers[this.type].call(this)},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._boxParsers={},a.prototype._boxParsers.avc1=function(){this.version=this._readUint(16),this.revision_level=this._readUint(16),this.vendor=this._readUint(32),this.temporal_quality=this._readUint(32),this.spatial_quality=this._readUint(32),this.width=this._readUint(16),this.height=this._readUint(16),this.horizontal_resolution=this._readUint(32),this.vertical_resolution=this._readUint(32),this.data_size=this._readUint(32),this.frame_count=this._readUint(16),this.compressor_name=this._readUint(32),this.depth=this._readUint(16),this.color_table_id=this._readUint(16)},["moov","trak","tref","mdia","minf","stbl","edts","dinf","mvex","moof","traf","mfra","udta","meco","strk","vttc"].forEach(function(e){a.prototype._boxParsers[e]=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))}}),a.prototype._boxParsers.elst=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=1;e<=this.entry_count;e++){var t={};1==this.version?(t.segment_duration=this._readUint(64),t.media_time=this._readInt(64)):(t.segment_duration=this._readUint(32),t.media_time=this._readInt(32)),t.media_rate_integer=this._readInt(16),t.media_rate_fraction=this._readInt(16),this.entries.push(t)}},a.prototype._boxParsers.emsg=function(){this._parseFullBox(),this.scheme_id_uri=this._readTerminatedString(),this.value=this._readTerminatedString(),this.timescale=this._readUint(32),this.presentation_time_delta=this._readUint(32),this.event_duration=this._readUint(32),this.id=this._readUint(32),this.message_data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},a.prototype._boxParsers.free=a.prototype._boxParsers.skip=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},a.prototype._boxParsers.ftyp=a.prototype._boxParsers.styp=function(){for(this.major_brand=this._readString(4),this.minor_versions=this._readUint(32),this.compatible_brands=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.compatible_brands.push(this._readString(4))},a.prototype._boxParsers.hdlr=function(){this._parseFullBox(),this.pre_defined=this._readUint(32),this.handler_type=this._readString(4),this.reserved=[this._readUint(32),this._readUint(32),this._readUint(32)],this.name=this._readTerminatedString()},a.prototype._boxParsers.mdat=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},a.prototype._boxParsers.mdhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32));var e=this._readUint(16);this.pad=e>>15,this.language=String.fromCharCode((e>>10&31)+96,(e>>5&31)+96,(31&e)+96),this.pre_defined=this._readUint(16)},a.prototype._boxParsers.mehd=function(){this._parseFullBox(),1==this.version?this.fragment_duration=this._readUint(64):this.fragment_duration=this._readUint(32)},a.prototype._boxParsers.mfhd=function(){this._parseFullBox(),this.sequence_number=this._readUint(32)},a.prototype._boxParsers.mfro=function(){this._parseFullBox(),this.mfra_size=this._readUint(32)},a.prototype._boxParsers.mp4a=function(){this.reserved1=[this._readUint(32),this._readUint(32)],this.channelcount=this._readUint(16),this.samplesize=this._readUint(16),this.pre_defined=this._readUint(16),this.reserved2=this._readUint(16),this.sample_rate=this._readUint(32)},a.prototype._boxParsers.mvhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32)),this.rate=this._readTemplate(32),this.volume=this._readTemplate(16),this.reserved1=this._readUint(16),this.reserved2=[this._readUint(32),this._readUint(32)],this.matrix=[];for(var e=0;e<9;e++)this.matrix.push(this._readTemplate(32));this.pre_defined=[];for(var e=0;e<6;e++)this.pre_defined.push(this._readUint(32));this.next_track_ID=this._readUint(32)},a.prototype._boxParsers.payl=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.cue_text=n.Utils.dataViewToString(e)},a.prototype._boxParsers.sidx=function(){this._parseFullBox(),this.reference_ID=this._readUint(32),this.timescale=this._readUint(32),0==this.version?(this.earliest_presentation_time=this._readUint(32),this.first_offset=this._readUint(32)):(this.earliest_presentation_time=this._readUint(64),this.first_offset=this._readUint(64)),this.reserved=this._readUint(16),this.reference_count=this._readUint(16),this.references=[];for(var e=0;e<this.reference_count;e++){var t={},r=this._readUint(32);t.reference_type=r>>31&1,t.referenced_size=2147483647&r,t.subsegment_duration=this._readUint(32);var n=this._readUint(32);t.starts_with_SAP=n>>31&1,t.SAP_type=n>>28&7,t.SAP_delta_time=268435455&n,this.references.push(t)}},a.prototype._boxParsers.ssix=function(){this._parseFullBox(),this.subsegment_count=this._readUint(32),this.subsegments=[];for(var e=0;e<this.subsegment_count;e++){var t={};t.ranges_count=this._readUint(32),t.ranges=[];for(var r=0;r<t.ranges_count;r++){var n={};n.level=this._readUint(8),n.range_size=this._readUint(24),t.ranges.push(n)}this.subsegments.push(t)}},a.prototype._boxParsers.stsd=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=0;e<this.entry_count;e++)this.entries.push(a.parse(this))},a.prototype._boxParsers.subs=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.samples_with_subsamples=[];for(var e=0,t=0;t<this.entry_count;t++){var r=this._readUint(32);e+=r;var n=this._readUint(16);if(n>0){for(var i={nr:e,subsamples:[]},a=0;a<n;a++){var o={};1&this.version?o.size=this._readUint(32):o.size=this._readUint(16),o.priority=this._readUint(8),o.discardable=this._readUint(8),o.codec_specific_parameters=this._readUint(32),i.subsamples.push(o)}this.samples_with_subsamples.push(i)}}},a.prototype._boxParsers.tfdt=function(){this._parseFullBox(),1==this.version?this.baseMediaDecodeTime=this._readUint(64):this.baseMediaDecodeTime=this._readUint(32)},a.prototype._boxParsers.tfhd=function(){this._parseFullBox(),this.track_ID=this._readUint(32),1&this.flags&&(this.base_data_offset=this._readUint(64)),2&this.flags&&(this.sample_description_offset=this._readUint(32)),8&this.flags&&(this.default_sample_duration=this._readUint(32)),16&this.flags&&(this.default_sample_size=this._readUint(32)),32&this.flags&&(this.default_sample_flags=this._readUint(32))},a.prototype._boxParsers.tfra=function(){this._parseFullBox(),this.track_ID=this._readUint(32),this._packed=this._readUint(32),this.reserved=this._packed>>>6,this.length_size_of_traf_num=(this._packed&&0xffff00000000)>>>4,this.length_size_of_trun_num=(this._packed&&4294901760)>>>2,this.length_size_of_sample_num=this._packed&&255,this.number_of_entry=this._readUint(32),this.entries=[];for(var e=0;e<this.number_of_entry;e++){var t={};1==this.version?(t.time=this._readUint(64),t.moof_offset=this._readUint(64)):(t.time=this._readUint(32),t.moof_offset=this._readUint(32)),t.traf_number=this._readUint(8*(this.length_size_of_traf_num+1)),t.trun_number=this._readUint(8*(this.length_size_of_trun_num+1)),t.sample_number=this._readUint(8*(this.length_size_of_sample_num+1)),this.entries.push(t)}},a.prototype._boxParsers.tkhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(32)),this.reserved2=[this._readUint(32),this._readUint(32)],this.layer=this._readUint(16),this.alternate_group=this._readUint(16),this.volume=this._readTemplate(16),this.reserved3=this._readUint(16),this.matrix=[];for(var e=0;e<9;e++)this.matrix.push(this._readTemplate(32));this.width=this._readUint(32),this.height=this._readUint(32)},a.prototype._boxParsers.trex=function(){this._parseFullBox(),this.track_ID=this._readUint(32),this.default_sample_description_index=this._readUint(32),this.default_sample_duration=this._readUint(32),this.default_sample_size=this._readUint(32),this.default_sample_flags=this._readUint(32)},a.prototype._boxParsers.trun=function(){this._parseFullBox(),this.sample_count=this._readUint(32),1&this.flags&&(this.data_offset=this._readInt(32)),4&this.flags&&(this.first_sample_flags=this._readUint(32)),this.samples=[];for(var e=0;e<this.sample_count;e++){var t={};256&this.flags&&(t.sample_duration=this._readUint(32)),512&this.flags&&(t.sample_size=this._readUint(32)),1024&this.flags&&(t.sample_flags=this._readUint(32)),2048&this.flags&&(0==this.version?t.sample_composition_time_offset=this._readUint(32):t.sample_composition_time_offset=this._readInt(32)),this.samples.push(t)}},a.prototype._boxParsers.vlab=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.source_label=n.Utils.dataViewToString(e)},a.prototype._boxParsers.vttC=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.config=n.Utils.dataViewToString(e)},a.prototype._boxParsers.vtte=function(){}},function(e,t,r){var n,i,a;/**
	 * isMobile.js v0.4.1
	 *
	 * A simple library to detect Apple phones and tablets,
	 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
	 * and any kind of seven inch device, via user agent sniffing.
	 *
	 * @author: Kai Mallea (kmallea@gmail.com)
	 *
	 * @license: http://creativecommons.org/publicdomain/zero/1.0/
	 */
!function(r){var o=/iPhone/i,s=/iPod/i,u=/iPad/i,l=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,d=/Android/i,f=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,c=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,h=/Windows Phone/i,g=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,p=/BlackBerry/i,v=/BB10/i,m=/Opera Mini/i,y=/(CriOS|Chrome)(?=.*\bMobile\b)/i,_=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,E=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),T=function(e,t){return e.test(t)},b=function(e){var t=e||navigator.userAgent,r=t.split("[FBAN");if("undefined"!=typeof r[1]&&(t=r[0]),r=t.split("Twitter"),"undefined"!=typeof r[1]&&(t=r[0]),this.apple={phone:T(o,t),ipod:T(s,t),tablet:!T(o,t)&&T(u,t),device:T(o,t)||T(s,t)||T(u,t)},this.amazon={phone:T(f,t),tablet:!T(f,t)&&T(c,t),device:T(f,t)||T(c,t)},this.android={phone:T(f,t)||T(l,t),tablet:!T(f,t)&&!T(l,t)&&(T(c,t)||T(d,t)),device:T(f,t)||T(c,t)||T(l,t)||T(d,t)},this.windows={phone:T(h,t),tablet:T(g,t),device:T(h,t)||T(g,t)},this.other={blackberry:T(p,t),blackberry10:T(v,t),opera:T(m,t),firefox:T(_,t),chrome:T(y,t),device:T(p,t)||T(v,t)||T(m,t)||T(_,t)||T(y,t)},this.seven_inch=T(E,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},S=function(){var e=new b;return e.Class=b,e};"undefined"!=typeof e&&e.exports&&"undefined"==typeof window?e.exports=b:"undefined"!=typeof e&&e.exports&&"undefined"!=typeof window?e.exports=S():(i=[],n=r.isMobile=S(),a="function"==typeof n?n.apply(t,i):n,!(void 0!==a&&(e.exports=a)))}(this)},function(e,t,r){(function(e){var t=function(){};t.prototype={bind:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},unbind:function(e,t){this._events=this._events||{},e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},t.mixin=function(e){for(var r=["bind","unbind","trigger"],n=0;n<r.length;n++)e.prototype[r[n]]=t.prototype[r[n]]},"undefined"!=typeof e&&"exports"in e&&(e.exports=t)}).call(t,r(82)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){"use strict";function n(){if(u.length)throw u.shift()}function i(e){var t;t=s.length?s.pop():new a,t.task=e,o(t)}function a(){this.task=null}var o=r(53),s=[],u=[],l=o.makeRequestCallFromTimer(n);e.exports=i,a.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(u.push(e),l())}finally{this.task=null,s[s.length]=this}}},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;r(this,e),this.logger=t,this.gracePeriod=i,this.gracePeriodStart=0,this.leewayFactor=n,this.pollInterval=null,this.controlled=[],this.logger.debug("Initializing")}return n(e,[{key:"control",value:function(e){this.release(e),this.controlled.push(e)}},{key:"release",value:function(e){var t=this.controlled.indexOf(e);t!==-1&&this.controlled.splice(t,1)}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;this.stop(),this.pollInterval=setInterval(function(){var t=Date.now()/1e3,r=e.gracePeriodStart+e.gracePeriod;if(t>r){var n=e.controlled.filter(function(e){return"playing"===e.getPlayState()&&!e.isVod()});n.forEach(function(t){return e._checkTime(t)})}},t)}},{key:"stop",value:function(){this.pollInterval&&clearInterval(this.pollInterval)}},{key:"_checkTime",value:function(e){var t=e.getLiveEdge(),r=e.getBufferTime(),n=t-r,i=e.getCurrentTime(),a=t-i;Number.isNaN(a)||a<0||(this.logger.debug("Distance from live edge: "+a.toFixed(2)+"s"),a>this.leewayFactor*r&&(this.logger.debug("Too far from live edge"),this.logger.debug("Seeking to "+n),e.setCurrentTime(n),this.gracePeriodStart=Date.now()/1e3))}}]),e}();e.exports=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=(r(81),r(55)),u=r(92),l=r(80),d=function(e){function t(e,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"development";n(this,t);var d=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));d.version=u,d.logger=a.getLogger("LivePlayer"),d.logger.debug("Using version "+u),d.logger.debug("Initializing player"),d.liveEdgeTracker=o,d.duration=!1,d.videoHandlers=e,d.activeVideoHandler=null,d.element=r,d.boundingBox=r.getBoundingClientRect(),d.layers={},d.sourceBlacklist={},d.originalClassName=d.element.className,d.element.className=(d.originalClassName+" liveplayer").trim(),d.videoElement=document.createElement("div"),d.videoElement.classList.add("fadeable"),d.element.appendChild(d.videoElement),d.options=s,d.maxRetries=3,d.delayForRetryLoading=500;var f=d.getOption("group"),c=d.getOption("mute"),h=d.getOption("autoplay");f?d.localStorageVolumeVar=f+"Volume":d.localStorageVolumeVar="livePlayerVolume";var g=localStorage.getItem(d.localStorageVolumeVar);c&&(f&&null===g||!f)?d.audioVolume=0:d.audioVolume=null===g?100:Number(g),h&&l.any&&(d.audioVolume=0);var p=d.element.parentNode.getElementsByTagName("video");return p.length>0&&(d.logger.debug("Found video element, detecting sources"),d.placeholderElement=p[0],d.element.parentNode.removeChild(d.placeholderElement),d.loadPosterImageFromPlaceholder(),d.loadStreamFromPlaceholder()),d.liveEdgeTracker&&d.liveEdgeTracker.start(),d}return a(t,e),o(t,[{key:"canHandleStream",value:function(e,t){var r=this.videoHandlers.filter(function(r){return r.canHandleStream(e,t)});return r.length>0}},{key:"loadPosterImageFromPlaceholder",value:function(){this.placeholderElement.attributes.poster&&this.setPoster(this.placeholderElement.attributes.poster.value)}},{key:"retryLoadSource",value:function(){var e=this;this.retryLoadTimer=setTimeout(function(){e._resetVideoHandler("activeVideoHandler","videoElement"),e.loadStreamFromPlaceholder()},e.delayForRetryLoading)}},{key:"loadStreamFromPlaceholder",value:function(){var e=this,t={},r=this.placeholderElement.getElementsByTagName("source"),n=[].map.call(r,function(e){var t={};return t.includesAppInstance=e.getAttribute("data-includes-app-instance"),t.loadingStreamFromPlaceholder=!0,{url:e.getAttribute("src"),type:e.type,options:t}}),i=n.filter(function(t){var r=e.canHandleStream(t.url,t.type);if(r)e.sourceBlacklist[t.url]&&(e.logger.error("Cannot play "+t.url+" since the url has been blacklisted after 3 retries"),r=!e.sourceBlacklist[t.url]);else{var n=e.videoHandlers.reduce(function(e,t,r){return e.concat(" ",r+1,".",t.name)},"");e.logger.error("Cannot play "+t.url+" with videohandler(s) "+n)}return r});if(i.length>0){if(e.logger.debug("Attempting to play the first of the "+i.length+" playable streams - "+i[0].url),this.load(i[0].url,i[0].type,t,null,i[0].options),this.activeVideoHandler.bindOnce("error",function(){e.maxRetries>0?(e.logger.info("Retrying to load "+i[0].url+" after "+e.delayForRetryLoading/1e3+" second(s). Retries left : "+(e.maxRetries-1)),e.retryLoadSource(),e.delayForRetryLoading*=2,e.maxRetries-=1):1===i.length?(e.logger.debug("Attempting to play only available source again after "+e.delayForRetryLoading/1e3+" second(s)"),e.retryLoadSource(),e.delayForRetryLoading*=2):(e.sourceBlacklist[i[0].url]=!0,e.maxRetries=3,e.delayForRetryLoading=500,e._resetVideoHandler("activeVideoHandler","videoElement"),setTimeout(function(){e.loadStreamFromPlaceholder()},500))}),e.options.loadTimeout){e.logger.error("Unable to load the video after "+e.options.loadTimeout+" seconds");var a=setTimeout(function(){e.trigger("error","Unable to load the video after "+e.options.loadTimeout+" seconds")},1e3*e.options.loadTimeout);e.bind("stream-loaded",function(){window.clearTimeout(a)})}}else setTimeout(function(){e.trigger("error","No playable sources found in video element")},0)}},{key:"_resetVideoHandler",value:function(e,t){this[e]&&(this.liveEdgeTracker&&this.liveEdgeTracker.release(this[e]),this[e].setParent(null),this.element.removeChild(this[t]),this[e].remove(),this[e]=void 0)}},{key:"load",value:function(e,t,r,n,i){var a=this,o=document.createElement("div");this.logger.info("Loading stream ("+t+"): "+e),o.classList.add("fadeable"),a.options.smoothTransition&&o.classList.add("fade");var s=this.activeVideoHandler?o:a.videoElement;a.element.appendChild(s);var u=this._initVideoHandler(a,s,e,t,r,n,i);this.activeVideoHandler?a.options.smoothTransition?(u.play(),u.bindOnce("timeupdate",function(){a._resetVideoHandler("activeVideoHandler","videoElement"),a.videoElement=s,a.element.appendChild(s),a.activeVideoHandler=u,setTimeout(function(){a.videoElement.classList.remove("fade"),a.trigger("playing")},1e3)})):(a._resetVideoHandler("activeVideoHandler","videoElement"),a.trigger("stopped"),a.videoElement=s,a.element.appendChild(s),a.activeVideoHandler=u):this.activeVideoHandler=u,this.activeSource={url:e,type:t},i&&i.loadingStreamFromPlaceholder||this.activeVideoHandler.bindOnce("error",function(){a.logger.info("Retrying to load the only available "+e+" after "+a.delayForRetryLoading/1e3+" second(s)"),a.retryLoadTimer=setTimeout(function(){a._resetVideoHandler("activeVideoHandler","videoElement"),a.load(e,t,r,n,i)},a.delayForRetryLoading),a.delayForRetryLoading*=2})}},{key:"reconnect",value:function(){var e=this,t=this.activeVideoHandler,r=Date.now(),n=!0,i=3e4;t.logger.info("Connection lost. Trying to reconnect for "+i/1e3+" seconds");var a=window.setInterval(function(){n?(e.load(e.activeSource.url,e.activeSource.type),Date.now()>i+r&&(n=!1,t.logger.info("Could not reconnect"),clearInterval(a))):clearInterval(a)},5e3);e.bindOnce("stream-loaded",function(){t.logger.info("Stream reloaded"),n=!1,clearInterval(a)})}},{key:"setMetadata",value:function(e){this.metadata=e,this.trigger("set-metadata",e)}},{key:"getMetadata",value:function(){return this.metadata}},{key:"play",value:function(){this.activeVideoHandler&&this.activeVideoHandler.play()}},{key:"pause",value:function(){this.activeVideoHandler&&this.activeVideoHandler.pause()}},{key:"stop",value:function(){this.activeVideoHandler&&this.activeVideoHandler.stop()}},{key:"setVolume",value:function(e){this.audioVolume=e,this.activeVideoHandler&&this.activeVideoHandler.setVolume(e),localStorage.setItem(this.localStorageVolumeVar,e)}},{key:"getVolume",value:function(){return this.audioVolume}},{key:"setBufferTime",value:function(e){this.activeVideoHandler&&this.activeVideoHandler.setBufferTime(e)}},{key:"getBufferTime",value:function(){if(this.activeVideoHandler)return this.activeVideoHandler.getBufferTime()}},{key:"isMultiBitrate",value:function(){return!!this.activeVideoHandler&&this.activeVideoHandler.isMultiBitrate()}},{key:"getAvailableBitrates",value:function(){return this.activeVideoHandler?this.activeVideoHandler.getAvailableBitrates():null}},{key:"getActiveBitrateIdx",value:function(){return this.activeVideoHandler?this.activeVideoHandler.getActiveBitrateIdx():null}},{key:"getActiveAutoBitrateIdx",value:function(){return this.activeVideoHandler?this.activeVideoHandler.getActiveAutoBitrateIdx():null}},{key:"setActiveBitrateIdx",value:function(e){this.activeVideoHandler&&this.activeVideoHandler.setActiveBitrateIdx(e)}},{key:"setPoster",value:function(e){this.posterUrl=e,this.trigger("poster-added",this.posterUrl)}},{key:"canControlIndividualAudioChannels",value:function(){if(this.activeVideoHandler)return this.activeVideoHandler.canControlIndividualAudioChannels()}},{key:"isVod",value:function(){if(this.activeVideoHandler)return this.activeVideoHandler.isVod()}},{key:"setVolumeLeft",value:function(e){this.activeVideoHandler.setVolumeLeft(e)}},{key:"setVolumeRight",value:function(e){this.activeVideoHandler.setVolumeRight(e)}},{key:"getPoster",value:function(){return this.posterUrl}},{key:"addLayer",value:function(e,t){this.layers[e]=t,this.layers[e].render(this.element)}},{key:"removeLayer",value:function(e){this.layers[e].remove(),delete this.layers[e]}},{key:"hasLayer",value:function(e){return!!this.layers[e]}},{key:"toggleFullscreen",value:function(){u(this.element)}},{key:"remove",value:function(){this.trigger("remove"),clearTimeout(this.retryLoadTimer),this.activeVideoHandler&&this.activeVideoHandler.remove(),this.element.removeChild(this.videoElement),this.placeholderElement&&this.element.appendChild(this.placeholderElement),this.liveEdgeTracker&&this.liveEdgeTracker.stop(),this.element.className=this.originalClassName}},{key:"getOption",value:function(e){return this.options[e]}},{key:"setOption",value:function(e,t){this.options[e]=t}},{key:"getActiveVideoHandler",value:function(){return this.activeVideoHandler.getName()}},{key:"getVideoElement",value:function(){return this.videoElement}},{key:"getDuration",value:function(){return!!this.activeVideoHandler&&this.activeVideoHandler.getDuration()}},{key:"setCurrentTime",value:function(e){this.activeVideoHandler.setCurrentTime(e)}},{key:"getCurrentTime",value:function(){return this.activeVideoHandler.getCurrentTime()}},{key:"getPlayState",value:function(){return this.activeVideoHandler.getPlayState()}},{key:"getInfo",value:function(){if(this.activeVideoHandler)return this.activeVideoHandler.getInfo()}},{key:"getVersion",value:function(){if(this.version)return this.version}},{key:"setScaleMode",value:function(e){this.activeVideoHandler&&this.activeVideoHandler.setScaleMode(e)}},{key:"removeControlbarComponent",value:function(e){function t(t){return"name"in t&&t.name===e}var r,n=this.controlBar,i=n.children;n.children.forEach(function(e){"control-bar-right"===e.name&&(r=e,i=i.concat(r.children))});var a=i.filter(t)[0];this.hasLayer("ui")&&a?a.remove():(this.logger.error("Unable to remove : "+e),this.loggger.info("These are the available components: "),i.forEach(function(e){e.name?this.logger.info(e.name):this.logger.info(e)}))}},{key:"listControlbarComponents",value:function(){var e,t=[],r=this.controlBar,n=r.children;return r.children.forEach(function(t){"control-bar-right"===t.name&&(e=t,n=n.concat(e.children))}),n.forEach(function(e){e.name&&t.push(e.name)}),t}},{key:"getEdgeServerIp",value:function(){if(this.activeVideoHandler)return this.activeVideoHandler.getEdgeServerIp()}},{key:"getBuffered",value:function(){return this.activeVideoHandler.getBuffered()}},{key:"getLiveEdge",value:function(){return this.activeVideoHandler.getLiveEdge()}},{key:"_initVideoHandler",value:function(e,t,r,n,i,a,o){var s=e.videoHandlers.filter(function(e){return e.canHandleStream(r,n)});if(0===s.length)return void this.logger.error("Unable to handle the stream at: "+r+". Did you add a MIME type?");this.logger.info("Loading "+r+" with "+s[0].name),"FLASH"===s[0].name.toUpperCase()&&this.hasLayer("ui")&&this.removeLayer("ui");var u=new s[0](t,function(){u.setParent(e),u.bindOnce("stream-loaded",function(t){e.setMetadata(i),e.getOption("autoplay")&&setTimeout(function(){u.play()},0),e.liveEdgeTracker&&e.liveEdgeTracker.control(u),e.getOption("loop")&&u.setLooping(!0),"function"==typeof a&&a()}),u.load(r,n,o),u.setVolume(e.audioVolume),e.duration=u.getDuration(),u.bind("connection-lost",e.reconnect.bind(e)),setTimeout(function(){e.trigger("video-handler-loaded")},0)},this.options);return u||this.logger.error("Could not create a new video handler"),u}}]),t}(s);e.exports=d},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){r(this,e),this.container=t}return i(e,[{key:"load",value:function(e,t){if("string"!=typeof e)throw Error("Plugin name not specified");if("function"!=typeof t)throw Error("Cannot register "+e+": "+t+" is not a function");return t(this.container)||function(){}}},{key:"loadMultiple",value:function(e){var t=this;if("object"!==("undefined"==typeof e?"undefined":n(e)))throw Error("Invalid plugin collection specified");var r=Object.keys(e),i=r.map(function(r){var n=e[r];return t.load(r,n)});return function(){i.forEach(function(e){return e()})}}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(54),s=n(o),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i(this,e),this.logLevel=t}return a(e,[{key:"getLogger",value:function(e){return new s.default(e,this.logLevel)}}]),e}();t.default=u},function(e,t){"use strict";var r=!("name"in Function.prototype&&"name"in function(){});r&&Object.defineProperty(Function.prototype,"name",{get:function(){var e=this.toString().match(/^function\s*([^\s(]+)/)[1];return Object.defineProperty(this,"name",{value:e}),e}})},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n,i){r(this,e),this.requests=n,this.type=t,this.media=i}return n(e,[{key:"_getChunk",value:function(e){var t=this.media.substring(0,this.media.indexOf("$Number")),r=t?this.media.substring(this.media.lastIndexOf("$")+1):null,n=null;if(r){var i=e.substring(t.length,e.indexOf(r)).replace("-",""),a=e.substring(0,e.indexOf(r)).replace("-","");n=e.includes(t)?i:a}return n}},{key:"_getRequestTimes",value:function(){var e=this,t=this.requests.slice(-20).filter(function(t){var r=t.responsecode>=200&&t.responsecode<300,n=!!t._mediaduration,i="InitializationSegment"===t.type||"MediaSegment"===t.type,a=t._stream===e.type;return r&&n&&i&&a}).slice(-4),r={},n={};return t.length>0&&(r=t.reduce(function(t,r){if("video"===e.type){var i=r.url.split("/").pop();n=e._getChunk(i)}var a=Math.abs(r.tresponse.getTime()-r.trequest.getTime())/1e3,o=Math.abs(r._tfinish.getTime()-r.tresponse.getTime())/1e3,s=r._mediaduration;return t.latencyTimes=t.latencyTimes.concat(a),t.downloadTimes=t.downloadTimes.concat(o),t.durationTimes=t.durationTimes.concat(s),t.requestedChunks=n?t.requestedChunks.concat(Math.round(n)):t.requestedChunks,t},{latencyTimes:[],downloadTimes:[],durationTimes:[],requestedChunks:[]})),r}},{key:"getMovingData",value:function(){var e=this._getRequestTimes(),t={};if(0!==Object.keys(e).length){var r=e.downloadTimes,n=e.durationTimes,i=e.latencyTimes;t.avgMovingDownload=r.reduce(function(e,t){return e+t})/r.length,t.avgMovingRatio=n.reduce(function(e,t){return e+t})/r.length/t.avgMovingDownload,t.avgMovingLatency=i.reduce(function(e,t){return e+t})/i.length,t.minMovingLatency=i.reduce(function(e,t){return e<t?e:t}),t.requestedChunk=e.requestedChunks}return t}}]),e}();e.exports=i},function(e,t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){var e,t,n="Shockwave",i="Flash",a=n+" "+i,o=n+i+"."+n+i,s="application/x-shockwave-flash",u=navigator,l=parseFloat,d=u.plugins,f=u.mimeTypes;if(d&&"object"==r(d[a])){if(e=d[a].description,e&&(!f||!f[s]||f[s].enabledPlugin))return l(e.replace(/^.*\s+(\S+)\s+\S+$/,"$1"))}else if(window.ActiveXObject)try{if(t=new ActiveXObject(o),t&&(e=t.GetVariable("$version")))return l(e.replace(/^\S+\s+(\d+),(\d+).*$/i,"$1.$2"))}catch(e){}return-1},i={versionAtLeast:function(e){return e<n()}};e.exports=i},function(e,t){"use strict";var r=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};e.exports=r},function(e,t){"use strict";var r=function(e){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)};e.exports=r},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=r(36);r(100);var l=r(219),d=r(89),f=function(e){function t(e,r,a){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a)),s=o;return o.options=a,o.element=e,o.videoElement=document.createElement("video"),o.activeBitrateIdx=-1,o.activeBitrate=!1,e.classList.add("dash"),e.appendChild(o.videoElement),o.playState=!1,o.streamIdx=!1,o.vod=null,o.manifest=null,o.dashPlayer=dashjs.MediaPlayer().create(),a.bufferTime>0?(o.dashPlayer.setLiveDelay(a.bufferTime),o.dashPlayer.setBufferTimeAtTopQuality(a.bufferTime),o.dashPlayer.setBufferTimeAtTopQualityLongForm(a.bufferTime),o.dashPlayer.setStableBufferTime(a.bufferTime)):(o.dashPlayer.setLiveDelayFragmentCount(0),o.dashPlayer.setBufferTimeAtTopQuality(2),o.dashPlayer.setBufferTimeAtTopQualityLongForm(2),o.dashPlayer.setStableBufferTime(2)),o.dashPlayer.getDebug().setLogToBrowserConsole(!1),o.dashPlayer.useSuggestedPresentationDelay(a.useSuggestedPresentationDelay),o.dashPlayer.enableBufferOccupancyABR(!0),o.dashPlayer.setFastSwitchEnabled(!0),o.dashPlayer.initialize(s.videoElement),o.dashPlayer.setAutoPlay(!1),o.videoElement.addEventListener("volumechange",function(){s.trigger("volumechange",s.getVolume())}),o.dashPlayer.on(dashjs.MediaPlayer.events.MANIFEST_LOADED,function(e){return s.vod===!1&&"static"===e.data.type?void s.trigger("stopped"):("static"===e.data.type?s.vod=!0:s.vod=!1,void s._updateLiveEdge(e.data))}),o.dashPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_PLAYING,function(e){s.playState="playing",s.trigger("media-player-state-change","playing"),s.trigger("playing")}),o.dashPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_STARTED,function(e){s.playState="playing",s.trigger("media-player-state-change","playing"),s.trigger("playing"),s.dashPlayer.retrieveManifest(s.dashPlayer.getSource(),function(e,t){t?s.logger.error("Error "+t+" occurred when retrieving manifest for "+s.dashPlayer.getSource()):(s.manifest=e,s.options.useSuggestedPresentationDelay&&s.manifest.suggestedPresentationDelay&&(s.suggestedPresentationDelay=s.manifest.suggestedPresentationDelay,s.dashPlayer.setBufferTimeAtTopQuality(s.suggestedPresentationDelay),s.dashPlayer.setBufferTimeAtTopQualityLongForm(s.suggestedPresentationDelay),s.dashPlayer.setStableBufferTime(s.suggestedPresentationDelay)))})}),o.dashPlayer.on(dashjs.MediaPlayer.events.CAN_PLAY,function(e){s.trigger("stream-loaded",s.videoElement.src),s.trigger("is-multibitrate-change",s.isMultiBitrate())}),o.dashPlayer.on(dashjs.MediaPlayer.events.ERROR,function(e){s.logger.error("Could not load "+e.event.url+". Manifest could not be parsed. Please check the url and/or mime-type specified at source"),s.trigger("error","Unable to load video "+e.event.url)}),o.dashPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_ERROR,function(e){s.logger.error(e.error),console.log(e),s.trigger("error","Unable to load video "+e.event.url)}),o.dashPlayer.on(dashjs.MediaPlayer.events.PERIOD_SWITCH_COMPLETED,function(e){s.streamIdx=e.toStreamInfo.index}),o.dashPlayer.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(e){if("video"===e.mediaType){var t=s.getAvailableBitrates()[e.newQuality];s.logger.debug("Switched bitrate to "+t+" kbit/s"),s.trigger("bitrate-switched",e.newQuality)}}),o.videoElement.addEventListener("pause",function(){s.playState="stopped",s.trigger("media-player-state-change","stopped"),s.trigger("stopped")}),o.videoElement.addEventListener("error",function(e){s.logger.error("Unable to load video  "+e.target.src),s.trigger("error","Unable to load: "+e.target.src)},!0),o.videoElement.addEventListener("loadstart",function(){s.trigger("loadstart")}),o.videoElement.addEventListener("play",function(){s.playState="playing",s.trigger("play")}),o.videoElement.addEventListener("progress",function(e){e.target.buffered.length-1>=0&&s.trigger("progress",e.target.buffered.end(e.target.buffered.length-1))}),o.videoElement.addEventListener("timeupdate",function(e){s.trigger("timeupdate",e.target.currentTime)}),document.addEventListener("mousemove",function(e){var t={mouseX:e.clientX,mouseY:e.mouseY};s.trigger("mouse-move",t)}),"function"==typeof r&&setTimeout(r,0),o}return a(t,e),o(t,[{key:"load",value:function(e,r,n){this.dashPlayer.attachSource(e),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e,r)}},{key:"play",value:function(){this.dashPlayer.play()}},{key:"pause",value:function(){this.videoElement.pause()}},{key:"stop",value:function(){this.videoElement.pause(),this.videoElement.currentTime=0}},{key:"setVolume",value:function(e){0===e?this.videoElement.muted=!0:this.videoElement.muted=!1,this.videoElement.volume=e/100}},{key:"getVolume",value:function(){return 100*this.videoElement.volume}},{key:"getCurrentTime",value:function(){return this.videoElement.currentTime}},{key:"remove",value:function(){this.element.removeChild(this.videoElement)}},{key:"getName",value:function(){return"dash"}},{key:"setLooping",value:function(e){this.videoElement.setAttribute("loop","true")}},{key:"isVod",value:function(){return null!==this.vod?this.vod:null===this.options.vod&&this.options.vod}},{key:"getDuration",value:function(){if(this.videoElement)return this.videoElement.duration}},{key:"setCurrentTime",value:function(e){this.videoElement&&(this.videoElement.currentTime=e)}},{key:"getPlayState",value:function(){return this.playState}},{key:"getDashDebug",value:function(){return this.dashPlayer.getDebug()}},{key:"isMultiBitrate",value:function(){return this.dashPlayer.getBitrateInfoListFor("video").length>1}},{key:"getAvailableBitrates",value:function(){for(var e=this.dashPlayer.getBitrateInfoListFor("video"),t=[],r=0;r<e.length;r++)t.push(Math.round(e[r].bitrate/1e3));return t}},{key:"getSelectedBitrateIndex",value:function(){for(var e=this.dashPlayer.getBitrateInfoListFor("video"),t=this.dashPlayer.getQualityFor("video"),r=0;r<e.length;r++)if(e[r]===t)return r}},{key:"setActiveBitrateIdx",value:function(e){var t;t=e===-1?"Auto":this.getAvailableBitrates()[e]+" kbit/s",this.logger.debug("Bitrate switching to "+t),this.trigger("bitrate-switching",e),this.activeBitrateIdx=e,this.setSelectedBitrateIndex(e)}},{key:"setSelectedBitrateIndex",value:function(e){e===-1?(this.logger.debug("Enabling auto switching"),this.dashPlayer.getAutoSwitchQuality()||this.dashPlayer.setAutoSwitchQuality(!0)):(this.dashPlayer.getAutoSwitchQuality()&&(this.logger.debug("Disabling auto switching"),this.dashPlayer.setAutoSwitchQuality(!1)),this.activeBitrateIdx=e,this.dashPlayer.setQualityFor("video",e))}},{key:"setBufferTime",value:function(e){this.dashPlayer.setStableBufferTime(e),this.dashPlayer.setLiveDelay(e)}},{key:"getActiveBitrateIdx",value:function(){return this.activeBitrateIdx}},{key:"getBuffered",value:function(){if(this.videoElement.buffered){var e=this.videoElement.buffered,t=e.end(e.length-1);return t}}},{key:"getBufferTime",value:function(){return this.suggestedPresentationDelay||s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBufferTime",this).call(this)}},{key:"getLiveEdge",value:function(){return this.liveEdge?this.liveEdge:0}},{key:"getInfo",value:function(){var e,t,r,n,i,a,o,s,u,l,f,c,h,g,p,v,m,y,_=this.dashPlayer.getMetricsFor("video"),E=this.dashPlayer.getMetricsFor("audio"),T=this.dashPlayer.getCurrentTrackFor("video"),b=this.dashPlayer.getCurrentTrackFor("audio"),o=this.dashPlayer.getQualityFor("video"),S=this.dashPlayer.getDashMetrics(),R={video:{},audio:{}},A={},w="";if(_&&S&&E){if(e=S.getCurrentRepresentationSwitch(_),h=S.getCurrentDVRInfo(_),t=S.getCurrentBufferLevel(_),r=S.getHttpRequests(_),n=S.getHttpRequests(E),i=S.getCurrentDroppedFrames(_),A.vcodec=T.codec.substring(T.codec.indexOf("=")+1).replace(/\"/g,""),A.acodec=b.codec.substring(b.codec.indexOf("=")+1).replace(/\"/g,""),null!==e){var I=S.getRequestsQueue(_).executedRequests,O=I[I.length-1];a=O?8*O.bytesLoaded/(1e3*O.duration):null,this.manifest&&"dynamic"===this.manifest.type&&(w=this.manifest.Period.AdaptationSet[0].Representation.SegmentTemplate?this.manifest.Period.AdaptationSet[0].Representation.SegmentTemplate.media:this.manifest.Period.AdaptationSet[0].Representation[0].SegmentTemplate.media,w=w.replace("$RepresentationID$",e.to)),p=new d("video",r,w),v=new d("audio",n,""),R.video=p.getMovingData(),R.audio=v.getMovingData()}if(y=this.suggestedPresentationDelay,
s=S.getMaxIndexForBufferType("video",this.streamIdx),u=null!==t||isNaN(t)||void 0===t?t:0,null!==i&&(l=i.droppedFrames),(isNaN(a)||void 0===a)&&(a=0),f=o!==s?o+1:"",g=h?h.time:null,m=h?h.manifestInfo.minBufferTime:null,c=g&&m?Math.round(Math.round(g)/m):null){for(var D=[],P=R.video.requestedChunk,C=c;P&&C<P[0];)D.push(C),C+=1;if(0!==D.length){var M=P.concat(D);R.video.requestedChunk=M.sort()}}return{bitrate:a,bufferlength:u,droppedFrames:l,movingMetrics:R,metadata:A,pendingIndex:f,numBitratesValue:s,playingChunk:c,suggestedPresentationDelay:y}}return null}},{key:"getManifestType",value:function(){var e=this.dashPlayer.getSource();return promise=new l(function(t,r){this.dashPlayer.retrieveManifest(e,function(e,n){n?r(n):t(e)})})}},{key:"_updateLiveEdge",value:function(e){var t=e.Period.AdaptationSet;if(t&&!(t.length<1)){var r=t[0].Representation;if(r&&!(r.length<1)){var n=r[0].SegmentTemplate;if(n){var i=n.timescale,a=n.SegmentTimeline,o=(a.S.t+a.S.r*a.S.d)/i;this.liveEdge=o}}}}}]),t}(u);f.isSupportedByPlatform=function(){var e=window.MediaSource||window.WebKitMediaSource;return e&&"function"==typeof e.isTypeSupported},f.canHandleStream=function(e,t){if("application/dash+xml"===t)return!0;var r=new RegExp("^http(s)?://.*(mpd)");return r.test(e)},e.exports=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(37),l=n(u),d=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"getName",value:function(){return"flash-hls"}}]),t}(l.default);d.canHandleStream=function(e,t){var r=/\.m3u8/,n=/x-mpegURL/;return r.test(e)||n.test(t)},e.exports=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(37),l=n(u),d=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"getName",value:function(){return"flash-rtmp"}}]),t}(l.default);d.canHandleStream=function(e,t){var r=/rtmp|rtsp|flv/,n=/smil|rtmp|flv/;return r.test(e)||n.test(t)},e.exports=d},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=r(56),l=r(216),d=function(e){function t(e,r,a){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a)),s=o;e.classList.add("hls");var u={liveSyncDuration:a.bufferTime,liveMaxLatencyDuration:2.5*a.bufferTime};return o.options.useSuggestedPresentationDelay||(u.maxBufferLength=a.bufferTime,u.maxMaxBufferLength=a.bufferTime),o.hls=new l(u),o.levels=[],o.activeBitrateIdx=-1,o.fragLevel=null,o.vod=!1,o.options=a,o.info={fps:null,bufferlength:null,bandwidth:null,bitrate:null,metadata:{vcodec:null,acodec:null,width:null,height:null},httpLatency:null,fpsDroppedFrames:null,requestedChunks:[],playingChunk:null,liveEdge:null,currentTime:null},l.isSupported()&&(s.logger.debug("HLS source detected"),o.hls.attachMedia(o.videoElement)),o._onHlsError=o._onHlsError.bind(o),o.hls.on(l.Events.ERROR,o._onHlsError),o.hls.on(l.Events.LEVEL_SWITCH,function(e,t){s.manifestData&&(s.info.metadata.width=s.manifestData.levels[t.level].width,s.info.metadata.height=s.manifestData.levels[t.level].height)}),o.hls.on(l.Events.LEVEL_LOADED,function(e,t){t.details.live===!1&&(s.vod=!0);for(var r=[],n=t.details.startSN;n<=t.details.endSN;n+=1)r.push(n);s.info.requestedChunks=r}),o.hls.on(l.Events.FRAG_CHANGED,function(e,t){if(null===s.fragLevel||s.fragLevel!==t.frag.level){s.fragLevel=t.frag.level;var r=s.getAvailableBitrates()[t.frag.level];s.info.bitrate=r,s.isMultiBitrate()&&s.logger.debug("Switched bitrate to "+r+" kbit/s"),s.trigger("bitrate-switched",t.frag.level)}s.info.playingChunk=t.frag.sn}),o.hls.on(l.Events.FRAG_BUFFERED,function(e,t){s.info.httpLatency=t.stats.tfirst-t.stats.trequest,s.info.process=t.stats.tbuffered-t.stats.trequest}),o.hls.on(l.Events.FRAG_LOADED,function(e,t){var r=s.hls.levels[t.frag.level],n=r.loaded?r.loaded.bytes:0+t.stats.loaded,i=r.loaded?r.loaded.duration:0+t.frag.duration;s.info.bitrate=8*n/(1e3*i);var a=(t.stats.tload-t.stats.tfirst)/1e3,o=8*t.stats.loaded/1e3;s.info.bandwidth=Math.round(o/a)}),o.hls.on(l.Events.FRAG_PARSING_DATA,function(e,t){"video"===t.type&&(s.info.fps=Math.floor(t.nb/(t.endPTS-t.startPTS)))}),o.hls.on(l.Events.FRAG_PARSING_INIT_SEGMENT,function(e,t){s.info.metadata.vcodec=t.tracks.video.codec,s.info.metadata.acodec=t.tracks.audio.codec}),o.hls.on(l.Events.FPS_DROP,function(e,t){s.info.fpsDroppedFrames=t.totalDroppedFrames}),o.hls.on(l.Events.MANIFEST_LOADED,function(e,t){}),o}return a(t,e),o(t,[{key:"_onHlsError",value:function(e,t){if(t.fatal)switch(t.type){case l.ErrorTypes.NETWORK_ERROR:switch(t.details){case l.ErrorDetails.MANIFEST_LOAD_ERROR:case l.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case l.ErrorDetails.MANIFEST_PARSING_ERROR:this.logger.warn("Fatal network error encountered, trying to recover"),this.trigger("error","Fatal HLS error");break;default:this.stop(),this.play()}break;case l.ErrorTypes.MEDIA_ERROR:this.logger.warn("Fatal media error encountered, trying to recover"),this.stop(),this.play();break;default:this.hls.destroy(),this.logger.error("Fatal HLS error: "+t.type+", details: "+t.details),this.trigger("error","Fatal HLS error")}else switch(t.details){case l.ErrorDetails.BUFFER_STALLED_ERROR:this.logger.debug("Buffer stalled");break;case l.ErrorDetails.BUFFER_SEEK_OVER_HOLE:this.logger.debug("Buffer hole detected, seeking "+t.hole.toFixed(1)+"s ahead");break;default:this.logger.debug("HLS error: "+t.type+", details: "+t.details)}}},{key:"load",value:function(e,t,r){this.videoElement.hasChildNodes()&&(this.videoElement.removeChild(this.videoElement.getElementsByTagName("source")[0]),this.hls.detachMedia());var n=this;this.currentUrl=e;var i=document.createElement("source");i.src=e,t&&(i.type=t),this.hls.on(l.Events.MEDIA_DETACHED,function(){n.hls.attachMedia(n.videoElement)}),this.hls.on(l.Events.MEDIA_ATTACHED,function(){n.hls.loadSource(n.currentUrl),n.hls.off(l.Events.MEDIA_ATTACHED,function(){}),n.hls.on(l.Events.MANIFEST_PARSED,function(e,t){n.levels=t.levels,n.info.httpLatency=t.stats.tfirst-t.stats.trequest,n.logger.info("Manifest loaded, found "+t.levels.length+" quality levels");var r=n.isMultiBitrate();n.trigger("is-multibitrate-change",r),window.setTimeout(function(){n.trigger("stream-loaded",t.url)},1500)})}),this.videoElement.appendChild(i)}},{key:"getName",value:function(){return"hls"}},{key:"isMultiBitrate",value:function(){return this.levels&&this.levels.length>1}},{key:"getAvailableBitrates",value:function(){for(var e=[],t=0;t<this.levels.length;t++)this.levels[t].bitrate&&e.push(this.levels[t].bitrate/1e3);return e}},{key:"getActiveBitrateIdx",value:function(){return this.activeBitrateIdx}},{key:"setActiveBitrateIdx",value:function(e){var t;t=e===-1?"Auto":this.getAvailableBitrates()[e]+" kbit/s",this.logger.debug("Bitrate switching to "+t),this.trigger("bitrate-switching",e),this.fragLevel===e&&this.trigger("bitrate-switched",e),this.activeBitrateIdx=e,this.hls.loadLevel=e}},{key:"getActiveAutoBitrateIdx",value:function(){return this.fragLevel}},{key:"isVod",value:function(){return null===this.options.vod?this.vod:this.options.vod}},{key:"stop",value:function(){return this.hls.stopLoad(),this.isVod()?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this)}},{key:"play",value:function(){return this.hls.startLoad(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this)}},{key:"getLiveEdge",value:function(){return this.liveEdge=this.hls.liveSyncPosition?this.hls.liveSyncPosition+this.getBufferTime():0,this.liveEdge}},{key:"getInfo",value:function(){this.getCurrentTime()>0&&(this.info.bufferlength=this.getBuffered()-this.getCurrentTime());for(var e=[],t=this.info.playingChunk;t<this.info.requestedChunks[0];)e.push(t),t+=1;if(0!==e.length){var r=this.info.requestedChunks.concat(e);this.info.requestedChunks=r.sort()}return this.info}},{key:"remove",value:function(){return this.hls.destroy(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}}]),t}(u);d.isSupportedByPlatform=function(){return l.isSupported()},d.canHandleStream=function(e,t){var r=new RegExp("^http(s)?://.*(m3u8)");return r.test(e)},e.exports=d},function(e,t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){if("object"===("undefined"==typeof t?"undefined":r(t))&&"undefined"!=typeof e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.srplayer=n()}}(function(){var e;return function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[o]={exports:{}};t[o][0].call(d.exports,function(e){var r=t[o][1][e];return i(r?r:e)},d,d.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){var n=function(){};n.prototype={bind:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},unbind:function(e,t){this._events=this._events||{},e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(e){for(var t=["bind","unbind","trigger"],r=0;r<t.length;r++)e.prototype[t[r]]=n.prototype[t[r]]},"undefined"!=typeof t&&"exports"in t&&(t.exports=n)},{}],2:[function(t,n,i){/*!    SWFObject v2.3.20120118 <http://github.com/swfobject/swfobject>
	                is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
	            */
!function(t,r){"undefined"!=typeof n?n.exports=r():"function"==typeof e&&"undefined"!=typeof e.amd?e(r):t.swfobject=r()}(this,function(){function e(){if(!Y&&document.getElementsByTagName("body")[0]){try{var e,t=y("span");t.style.display="none",e=B.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(e){return}Y=!0;for(var r=H.length,n=0;n<r;n++)H[n]()}}function t(e){Y?e():H[H.length]=e}function n(e){if(r(U.addEventListener)!=C)U.addEventListener("load",e,!1);else if(r(B.addEventListener)!=C)B.addEventListener("load",e,!1);else if(r(U.attachEvent)!=C)E(U,"onload",e);else if("function"==typeof U.onload){var t=U.onload;U.onload=function(){t(),e()}}else U.onload=e}function i(){var e=B.getElementsByTagName("body")[0],t=y(M);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",x);var n=e.appendChild(t);if(n){var i=0;!function o(){if(r(n.GetVariable)!=C)try{var s=n.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),X.pv=[_(s[0]),_(s[1]),_(s[2])])}catch(e){X.pv=[8,0,0]}else if(i<10)return i++,void setTimeout(o,10);e.removeChild(t),n=null,a()}()}else a()}function a(){var e=V.length;if(e>0)for(var t=0;t<e;t++){var n=V[t].id,i=V[t].callbackFn,a={success:!1,id:n};if(X.pv[0]>0){var d=m(n);if(d)if(!T(V[t].swfVersion)||X.wk&&X.wk<312)if(V[t].expressInstall&&s()){var f={};f.data=V[t].expressInstall,f.width=d.getAttribute("width")||"0",f.height=d.getAttribute("height")||"0",d.getAttribute("class")&&(f.styleclass=d.getAttribute("class")),d.getAttribute("align")&&(f.align=d.getAttribute("align"));for(var c={},h=d.getElementsByTagName("param"),g=h.length,p=0;p<g;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(c[h[p].getAttribute("name")]=h[p].getAttribute("value"));u(f,c,n,i)}else l(d),i&&i(a);else S(n,!0),i&&(a.success=!0,a.ref=o(n),a.id=n,i(a))}else if(S(n,!0),i){var v=o(n);v&&r(v.SetVariable)!=C&&(a.success=!0,a.ref=v,a.id=v.id),i(a)}}}function o(e){var t=null,n=m(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=r(n.SetVariable)!==C?n:n.getElementsByTagName(M)[0]||n),t}function s(){return!z&&T("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function u(e,t,n,i){var a=m(n);if(n=v(n),z=!0,I=i||null,O={success:!1,id:n},a){"OBJECT"==a.nodeName.toUpperCase()?(A=d(a),w=null):(A=a,w=n),e.id=N,(r(e.width)==C||!/%$/.test(e.width)&&_(e.width)<310)&&(e.width="310"),(r(e.height)==C||!/%$/.test(e.height)&&_(e.height)<137)&&(e.height="137"),B.title=B.title.slice(0,47)+" - Flash Player Installation";var o=X.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(U.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+B.title;if(r(t.flashvars)!=C?t.flashvars+="&"+s:t.flashvars=s,X.ie&&4!=a.readyState){var u=y("div");n+="SWFObjectNew",u.setAttribute("id",n),a.parentNode.insertBefore(u,a),a.style.display="none",g(a)}c(e,t,n)}}function l(e){if(X.ie&&4!=e.readyState){e.style.display="none";var t=y("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),g(e)}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=y("div");if(X.win&&X.ie)t.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(M)[0];if(r){var n=r.childNodes;if(n)for(var i=n.length,a=0;a<i;a++)1==n[a].nodeType&&"PARAM"==n[a].nodeName||8==n[a].nodeType||t.appendChild(n[a].cloneNode(!0))}}return t}function f(e,t){var r=y("div");return r.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",r.firstChild}function c(e,t,n){var i,a=m(n);if(n=v(n),X.wk&&X.wk<312)return i;if(a){var o,s,u,l=y(X.ie?"div":M);r(e.id)==C&&(e.id=n);for(u in t)t.hasOwnProperty(u)&&"movie"!==u.toLowerCase()&&h(l,u,t[u]);X.ie&&(l=f(e.data,l.innerHTML));for(o in e)e.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?l.setAttribute("class",e[o]):"classid"!==s&&"data"!==s&&l.setAttribute(o,e[o]));X.ie?K[K.length]=e.id:(l.setAttribute("type",x),l.setAttribute("data",e.data)),a.parentNode.replaceChild(l,a),i=l}return i}function h(e,t,r){var n=y("param");n.setAttribute("name",t),n.setAttribute("value",r),e.appendChild(n)}function g(e){var t=m(e);t&&"OBJECT"==t.nodeName.toUpperCase()&&(X.ie?(t.style.display="none",function e(){if(4==t.readyState){for(var r in t)"function"==typeof t[r]&&(t[r]=null);t.parentNode.removeChild(t)}else setTimeout(e,10)}()):t.parentNode.removeChild(t))}function p(e){return e&&e.nodeType&&1===e.nodeType}function v(e){return p(e)?e.id:e}function m(e){if(p(e))return e;var t=null;try{t=B.getElementById(e)}catch(e){}return t}function y(e){return B.createElement(e)}function _(e){return parseInt(e,10)}function E(e,t,r){e.attachEvent(t,r),q[q.length]=[e,t,r]}function T(e){e+="";var t=X.pv,r=e.split(".");return r[0]=_(r[0]),r[1]=_(r[1])||0,r[2]=_(r[2])||0,t[0]>r[0]||t[0]==r[0]&&t[1]>r[1]||t[0]==r[0]&&t[1]==r[1]&&t[2]>=r[2]}function b(e,t,n,i){var a=B.getElementsByTagName("head")[0];if(a){var o="string"==typeof n?n:"screen";if(i&&(D=null,P=null),!D||P!=o){var s=y("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),D=a.appendChild(s),X.ie&&r(B.styleSheets)!=C&&B.styleSheets.length>0&&(D=B.styleSheets[B.styleSheets.length-1]),P=o}D&&(r(D.addRule)!=C?D.addRule(e,t):r(B.createTextNode)!=C&&D.appendChild(B.createTextNode(e+" {"+t+"}")))}}function S(e,t){if(W){var r=t?"visible":"hidden",n=m(e);Y&&n?n.style.visibility=r:"string"==typeof e&&b("#"+e,"visibility:"+r)}}function R(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&("undefined"==typeof encodeURIComponent?"undefined":r(encodeURIComponent))!=C?encodeURIComponent(e):e}var A,w,I,O,D,P,C="undefined",M="object",L="Shockwave Flash",k="ShockwaveFlash.ShockwaveFlash",x="application/x-shockwave-flash",N="SWFObjectExprInst",F="onreadystatechange",U=window,B=document,j=navigator,G=!1,H=[],V=[],K=[],q=[],Y=!1,z=!1,W=!0,Q=!1,X=function(){var e=r(B.getElementById)!=C&&r(B.getElementsByTagName)!=C&&r(B.createElement)!=C,t=j.userAgent.toLowerCase(),n=j.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),a=n?/mac/.test(n):/mac/.test(t),o=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),s="Microsoft Internet Explorer"===j.appName,u=[0,0,0],l=null;if(r(j.plugins)!=C&&r(j.plugins[L])==M)l=j.plugins[L].description,l&&r(j.mimeTypes)!=C&&j.mimeTypes[x]&&j.mimeTypes[x].enabledPlugin&&(G=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=_(l.replace(/^(.*)\..*$/,"$1")),u[1]=_(l.replace(/^.*\.(.*)\s.*$/,"$1")),u[2]=/[a-zA-Z]/.test(l)?_(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(r(U.ActiveXObject)!=C)try{var d=new ActiveXObject(k);d&&(l=d.GetVariable("$version"),l&&(s=!0,l=l.split(" ")[1].split(","),u=[_(l[0]),_(l[1]),_(l[2])]))}catch(e){}return{w3:e,pv:u,wk:o,ie:s,win:i,mac:a}}();(function(){X.w3&&((r(B.readyState)!=C&&("complete"===B.readyState||"interactive"===B.readyState)||r(B.readyState)==C&&(B.getElementsByTagName("body")[0]||B.body))&&e(),Y||(r(B.addEventListener)!=C&&B.addEventListener("DOMContentLoaded",e,!1),X.ie&&(B.attachEvent(F,function t(){"complete"==B.readyState&&(B.detachEvent(F,t),e())}),U==top&&!function t(){if(!Y){try{B.documentElement.doScroll("left")}catch(e){return void setTimeout(t,0)}e()}}()),X.wk&&!function t(){if(!Y)return/loaded|complete/.test(B.readyState)?void e():void setTimeout(t,0)}()))})();H[0]=function(){G?i():a()};(function(){X.ie&&window.attachEvent("onunload",function(){for(var e=q.length,t=0;t<e;t++)q[t][0].detachEvent(q[t][1],q[t][2]);for(var r=K.length,n=0;n<r;n++)g(K[n]);for(var i in X)X[i]=null;if(X=null,"undefined"!=typeof swfobject){for(var a in swfobject)swfobject[a]=null;swfobject=null}})})();return{registerObject:function(e,t,r,n){if(X.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=r,i.callbackFn=n,V[V.length]=i,S(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){if(X.w3)return o(e)},embedSWF:function(e,n,i,a,o,l,d,f,h,g){var p=v(n),m={success:!1,id:p};X.w3&&!(X.wk&&X.wk<312)&&e&&n&&i&&a&&o?(S(p,!1),t(function(){i+="",a+="";var t={};if(h&&("undefined"==typeof h?"undefined":r(h))===M)for(var v in h)t[v]=h[v];t.data=e,t.width=i,t.height=a;var y={};if(f&&("undefined"==typeof f?"undefined":r(f))===M)for(var _ in f)y[_]=f[_];if(d&&("undefined"==typeof d?"undefined":r(d))===M)for(var E in d)if(d.hasOwnProperty(E)){var b=Q?encodeURIComponent(E):E,R=Q?encodeURIComponent(d[E]):d[E];r(y.flashvars)!=C?y.flashvars+="&"+b+"="+R:y.flashvars=b+"="+R}if(T(o)){var A=c(t,y,n);t.id==p&&S(p,!0),m.success=!0,m.ref=A,m.id=A.id}else{if(l&&s())return t.data=l,void u(t,y,n,g);S(p,!0)}g&&g(m)})):g&&g(m)},switchOffAutoHideShow:function(){W=!1},enableUriEncoding:function(e){Q=("undefined"==typeof e?"undefined":r(e))===C||e},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:T,createSWF:function(e,t,r){return X.w3?c(e,t,r):void 0},showExpressInstall:function(e,t,r,n){X.w3&&s()&&u(e,t,r,n)},removeSWF:function(e){X.w3&&g(e)},createCSS:function(e,t,r,n){X.w3&&b(e,t,r,n)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=B.location.search||B.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return R(t);for(var r=t.split("&"),n=0;n<r.length;n++)if(r[n].substring(0,r[n].indexOf("="))==e)return R(r[n].substring(r[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var e=m(N);e&&A&&(e.parentNode.replaceChild(A,e),w&&(S(w,!0),X.ie&&(A.style.display="block")),I&&I(O)),z=!1}},version:"2.3"}})},{}],3:[function(e,t,r){var n=e("microevent"),i=e("swfobject-amd"),a=function(e){this.elementId=e,this.element=document.getElementById(this.elementId),this.swfId=e+"-swf",this.mediaStateListeners={}};a.prototype={setup:function(e){var t=this,r={smoothing:e.videoSmoothing!==!1||!1,buffertime:e.bufferTime||2,id:this.elementId,edgeServerIpDetection:e.edgeServerIpDetection||!1,autoDynamicStreamSwitch:!e.autoDynamicStreamSwitch},n={AllowScriptAccess:"always",wmode:"opaque"},a=function(r){var n=r.ref;t._swf=n,t._swfTimeout=setTimeout(function(){var e=n&&"function"==typeof n.PercentLoaded;e&&0===n.PercentLoaded()&&t.trigger("swf-missing")},e.swfTimeout||2500)};this.element.innerHTML="";var o=document.createElement("div");o.id=this.swfId,this.element.appendChild(o),i.embedSWF(e.swf||"./srplayer.swf",this.swfId,"100%","100%","11.2.0","",r,n,null,a)},init:function(){this.swf=this._swf,this.trigger("player-init")},remove:function(){this.element.innerHTML="",window.clearInterval(this.debugInterval),this._swfTimeout&&clearTimeout(this._swfTimeout),delete srplayer.players[this.elementId]},getSelectedBitrate:function(){return this.swf?this.swf.getSelectedBitrate():0},getSelectedBitrateIndex:function(){return this.swf?this.swf.getSelectedBitrateIndex():-1},setSelectedBitrateIndex:function(e){this.swf&&this.swf.setSelectedBitrateIndex(e)},isMultiBitrate:function(){return!!this.swf&&this.swf.isMultiBitrate()},getAvailableBitrates:function(){return this.swf?this.swf.getAvailableBitrates():[]},getState:function(){return this.swf?this.swf.getState():"uninitialized"},getMuted:function(){return!!this.swf&&this.swf.getMuted()},setMuted:function(e){this.swf&&this.swf.setMuted(e)},getBufferTime:function(){return!!this.swf&&this.swf.getBufferTime()},setBufferTime:function(e){this.swf&&this.swf.setBufferTime(e)},setVolumeLeft:function(e){this.swf&&this.swf.setVolumeLeft(e)},setVolumeRight:function(e){this.swf&&this.swf.setVolumeRight(e)},setVolume:function(e){this.swf&&this.swf.setVolume(e)},getVolume:function(){if(this.swf)return this.swf.getVolume()},getInfo:function(){if(this.swf){var e=window.atob(this.swf.getInfo());return e=JSON.parse(e),e.metadata&&(e.metadata=JSON.parse(e.metadata)),e}return null},play:function(){this.swf&&this.swf.playVideo()},pause:function(){this.swf&&this.swf.pauseVideo()},stop:function(){this.swf&&this.swf.stopVideo()},load:function(e,t){this.swf&&this.swf.load(e)},isVod:function(){if(this.swf)return this.swf.isVod()},canSeek:function(){if(this.swf)return this.swf.canSeek()},getCurrentTime:function(){if(this.swf)return this.swf.getCurrentTime()},setCurrentTime:function(e){this.swf&&this.swf.setCurrentTime(e)},getDuration:function(){if(this.swf)return this.swf.getDuration()},getPlayState:function(){if(this.swf)return this.swf.getPlayState()},getLoadState:function(){if(this.swf)return this.swf.getLoadState()},canPlay:function(){if(this.swf)return this.swf.canPlay()},setLooping:function(e){this.swf&&this.swf.setLooping(e)},isLooping:function(){if(this.swf)return this.swf.isLooping()},setScaleMode:function(e){this.swf&&this.swf.setScaleMode(e)},getEdgeServerIp:function(){if(this.swf)return this.swf.getEdgeServerIp()},setPlaybackRate:function(e){this.swf&&this.swf.setPlaybackRate(e)},getBufferLength:function(){if(this.swf)return this.swf.getBufferLength()}},n.mixin(a),t.exports=a},{microevent:1,"swfobject-amd":2}],4:[function(e,t,r){var n=e("./SRPlayer"),i=function e(t){if(!t)for(var r in e.players)return e.players[r];return e.players[t]?e.players[t]:e.players[t]=new n(t)};i.players=i.players||{},i.triggerEvent=function(e,t,r){var n=[t].concat(r),a=i.players[e];a.trigger.apply(a,n)},i.triggerPlayerInit=function(e){i.players[e].init()},t.exports=i},{"./SRPlayer":3}]},{},[4])(4)})},function(e,t,r){var n;(function(e,i){(function(a){"use strict";var o=0,s=Array.prototype.slice,u=function(e,t){var r=e[t];if(r===a&&B.strict)throw new Error("Bottle was unable to resolve a service.  `"+t+"` is undefined.");return r},l=function(e){return this.nested[e]||(this.nested[e]=U.pop())},d=function(e){return e.split(".").reduce(u,this)},f=function(e,t){var r=e.split(".");return e=r.pop(),c.call(r.reduce(N,this.container),e,t),this},c=function(e,t){Object.defineProperty(this,e,{configurable:!1,enumerable:!0,value:t,writable:!1})},h=function(e,t){var r,n;return"function"==typeof e&&(t=e,e="__global__"),r=e.split("."),n=r.shift(),r.length?l.call(this,n).decorator(r.join("."),t):(this.decorators[n]||(this.decorators[n]=[]),this.decorators[n].push(t)),this},g=function(e){return this.deferred.push(e),this},p=function(e){return(e||[]).map(d,this.container)},v=function(e,t){return w.call(this,e,function(){this.$get=t})},m=function(e,t){return v.call(this,e,function(e){return{instance:t.bind(t,e)}})},y=function(e){return!/^\$(?:decorator|register|list)$|Provider$/.test(e)},_=function(e){return Object.keys(e||this.container||{}).filter(y)},E=function(e,t,r,n){var i={configurable:!0,enumerable:!0};return e.length?i.get=function(){var t=0,n=function(i){if(i)throw i;e[t]&&e[t++](r,n)};return n(),r}:(i.value=r,i.writable=!0),Object.defineProperty(n,t,i),n[t]},T=function(e,t){var r,n;return"function"==typeof e&&(t=e,e="__global__"),r=e.split("."),n=r.shift(),r.length?l.call(this,n).middleware(r.join("."),t):(this.middlewares[n]||(this.middlewares[n]=[]),this.middlewares[n].push(t)),this},b={},S=function(e){var t;return"string"==typeof e?(t=b[e],t||(b[e]=t=new U,t.constant("BOTTLE_NAME",e)),t):new U},R=function(e){"string"==typeof e?delete b[e]:b={}},A=function(e,t){return t(e)},w=function(e,t){var r,n;return r=e.split("."),this.providerMap[e]&&1===r.length&&!this.container[e+"Provider"]?console.error(e+" provider already instantiated."):(this.originalProviders[e]=t,this.providerMap[e]=!0,n=r.shift(),r.length?(D.call(this,n,t,r),this):O.call(this,n,t))},I=function(e,t){return(e[t]||[]).concat(e.__global__||[])},O=function(e,t){var r,n,i,o,s,u;return o=this.id,i=this.container,s=this.decorators,u=this.middlewares,r=e+"Provider",n=Object.create(null),n[r]={configurable:!0,enumerable:!0,get:function(){var e=new t;return delete i[r],i[r]=e,e}},n[e]={configurable:!0,enumerable:!0,get:function(){var t,n=i[r];return n&&(t=I(s,e).reduce(A,n.$get(i)),delete i[r],delete i[e]),t===a?t:E(I(u,e),e,t,i)}},Object.defineProperties(i,n),this},D=function(e,t,r){var n;return n=l.call(this,e),this.factory(e,function(){return n.container}),n.provider(r.join("."),t)},P=function(e){var t=e.$value===a?e:e.$value;return this[e.$type||"service"].apply(this,[e.$name,t].concat(e.$inject||[]))},C=function(e){delete this.providerMap[e],delete this.container[e],delete this.container[e+"Provider"]},M=function(){var e=this.originalProviders;Object.keys(this.originalProviders).forEach(function(t){var r=t.split(".");r.length>1&&(C.call(this,r[0]),r.forEach(C,l.call(this,r[0]))),C.call(this,t),this.provider(t,e[t])},this)},L=function(e){return this.deferred.forEach(function(t){t(e)}),this},k=function(e,t){var r=arguments.length>2?s.call(arguments,2):null,n=this;return v.call(this,e,function(){var e=t;if(r){var i=r.map(d,n.container);i.unshift(t),e=t.bind.apply(t,i)}return new e})},x=function(e,t){var r;return r=e.split("."),e=r.pop(),F.call(r.reduce(N,this.container),e,t),this},N=function(e,t){var r=e[t];return r||(r={},F.call(e,t,r)),r},F=function(e,t){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,value:t,writable:!0})},U=function e(t){return this instanceof e?(this.id=o++,this.decorators={},this.middlewares={},this.nested={},this.providerMap={},this.originalProviders={},this.deferred=[],void(this.container={$decorator:h.bind(this),$register:P.bind(this),$list:_.bind(this)})):e.pop(t)};U.prototype={constant:f,decorator:h,defer:g,digest:p,factory:v,instanceFactory:m,list:_,middleware:T,provider:w,resetProviders:M,register:P,resolve:L,service:k,value:x},U.pop=S,U.clear=R,U.list=_;var B=U.config={strict:!1},j={function:!0,object:!0};!function(o){var s=j[typeof t]&&t&&!t.nodeType&&t,u=j[typeof e]&&e&&!e.nodeType&&e,l=(u&&u.exports===s&&s,j[typeof i]&&i);!l||l.global!==l&&l.window!==l||(o=l),o.Bottle=U,n=function(){return U}.call(t,r,t,e),!(n!==a&&(e.exports=n))}(j[typeof window]&&window||this)}).call(this)}).call(t,r(82)(e),function(){return this}())},function(e,t){"use strict";function r(e){var t,r,n;for(t=[],n=0,r=e.length;n<r;n+=1)e[n].isRoot?t.push("root"):t.push(e[n].name);var i=function(e,t){var r;if(null!==e&&null!==t)for(r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)||(t[r]=e[r]))},a=function(e,t,r){var n,a,o,s,u;if(null!==e&&0!==e.length)for(n=0,a=e.length;n<a;n+=1)o=e[n],t.hasOwnProperty(o.name)&&(r.hasOwnProperty(o.name)?o.merge&&(s=t[o.name],u=r[o.name],"object"==typeof s&&"object"==typeof u?i(s,u):null!=o.mergeFunction?r[o.name]=o.mergeFunction(s,u):r[o.name]=s+u):r[o.name]=t[o.name])},o=function e(t,r){var n,i,o,s,u,l,d,f=t;if(null!==f.children&&0!==f.children.length)for(n=0,i=f.children.length;n<i;n+=1)if(l=f.children[n],r.hasOwnProperty(l.name))if(l.isArray)for(u=r[l.name+"_asArray"],o=0,s=u.length;o<s;o+=1)d=u[o],a(f.properties,r,d),e(l,d);else d=r[l.name],a(f.properties,r,d),e(l,d)},s=function r(n){var i,a,s,u,l,d,f;if(null===n)return n;if("object"!=typeof n)return n;for(i=0,a=t.length;i<a;i+=1)"root"===t[i]&&(l=e[i],d=n,o(l,d));for(u in n)if(n.hasOwnProperty(u)&&"__children"!=u){if(s=t.indexOf(u),s!==-1)if(l=e[s],l.isArray)for(f=n[u+"_asArray"],i=0,a=f.length;i<a;i+=1)d=f[i],o(l,d);else d=n[u],o(l,d);r(n[u])}return n};return{run:s}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(64),a=n(i),o=r(68),s=n(o),u=r(139),l=n(u),d=r(126),f=n(d),c=r(58),h="undefined"!=typeof window&&window||e,g=h.dashjs;g||(g=h.dashjs={}),g.MediaPlayer=a.default,g.Protection=s.default,g.MetricsReporting=l.default,g.MediaPlayerFactory=f.default,g.Version=(0,c.getVersionString)(),t.default=g,t.MediaPlayer=a.default,t.Protection=s.default,t.MetricsReporting=l.default,t.MediaPlayerFactory=f.default}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(27),u=n(s),l=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return a(t,e),t}(u.default);t.default=l,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){z=-1,$=0,J=NaN,B.on(f.default.INITIALIZATION_LOADED,x,Y),B.on(f.default.SEGMENTS_LOADED,N,Y)}function r(t){Z=t,X=Z.getType(),Q=Z.isDynamic(),ee=(0,R.default)(F).create(e,Q)}function n(){return Z}function i(e){$=e}function a(){return $}function s(){return z}function d(){return J}function c(){ee=null,$=0,J=NaN,W=NaN,z=-1,Q=null,X=null,Z=null,B.off(f.default.INITIALIZATION_LOADED,x,Y),B.off(f.default.SEGMENTS_LOADED,N,Y)}function g(e){return e?e.split("$$").join("$"):e}function p(e,t){if(null===t||null===e||e.indexOf("$RepresentationID$")===-1)return e;var r=t.toString();return e.split("$RepresentationID$").join(r)}function v(e,t,r){var n,i,a=q.resolve(r.path);return a&&t!==a.url&&j.isRelative(t)?(n=a.url,i=a.serviceLocation,t&&(n=j.resolve(t,n))):n=t,!j.isRelative(n)&&(e.url=n,e.serviceLocation=i,!0)}function y(e,t){var r=new o.default,n=e.adaptation.period,i=n.start;if(r.mediaType=t,r.type=l.HTTPRequest.INIT_SEGMENT_TYPE,r.range=e.range,r.availabilityStartTime=H.calcAvailabilityStartTimeFromPresentationTime(i,n.mpd,Q),r.availabilityEndTime=H.calcAvailabilityEndTimeFromPresentationTime(i+n.duration,n.mpd,Q),r.quality=e.index,r.mediaInfo=Z.getMediaInfo(),v(r,e.initialization,e))return r}function E(e){if(!e)return null;var t=y(e,X);return t}function S(e){var t=!1;if(Q||z!==e.availableSegmentsNumber){var r=(0,b.getSegmentByIndex)(z,e);if(r){var n=r.presentationStartTime-e.adaptation.period.start,i=e.adaptation.period.duration;U(e.segmentInfoType+": "+n+" / "+i),t=("SegmentTimeline"!==e.segmentInfoType||!Q)&&n>=i}}else t=!0;return t}function w(e){return ee.getSegments(e,W,z,I)}function I(e,t){if(e.segments=t,t&&t.length>0&&(J=isNaN(J)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,J)),Q&&isNaN(H.getExpectedLiveEdge())){var r=t[t.length-1],n=r.presentationStartTime,i=K.getMetricsFor("stream");H.setExpectedLiveEdge(n),K.updateManifestUpdateInfo(V.getCurrentManifestUpdate(i),{presentationStartTime:n})}}function O(e){if(!e)throw new u.default("no representation");return e.segments=null,w(e),e}function D(e,t){var r,n=T.default.hasInitialization(e),i=T.default.hasSegments(e);return e.segmentDuration||e.segments||O(e),e.segmentAvailabilityRange=null,e.segmentAvailabilityRange=H.calcSegmentAvailabilityRange(e,Q),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime?(r=new u.default(A,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void B.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:r})):(t||(z=-1),e.segmentDuration&&O(e),n||G.loadInitialization(e),i||G.loadSegments(e,X,e.indexRange),void(n&&i&&B.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:e})))}function P(e,t,r){var n,i,a,o,s,u=t.segments,l=u?u.length:null,d=-1;if(u&&l>0)for(s=0;s<l;s++)if(i=u[s],a=i.presentationStartTime,o=i.duration,n=void 0===r||null===r?o/2:r,e+n>=a&&e-n<a+o){d=i.availabilityIdx;break}return d}function C(e){if(null===e||void 0===e)return null;var t=new o.default,r=e.representation,n=r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].bandwidth,i=e.media;return i=(0,b.replaceTokenForTemplate)(i,"Number",e.replacementNumber),i=(0,b.replaceTokenForTemplate)(i,"Time",e.replacementTime),i=(0,b.replaceTokenForTemplate)(i,"Bandwidth",n),i=p(i,r.id),i=g(i),t.mediaType=X,t.type=l.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=r.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=r.index,t.index=e.availabilityIdx,t.mediaInfo=Z.getMediaInfo(),t.adaptationIndex=r.adaptation.index,v(t,i,r)?t:void 0}function M(e,t,r){var n,i,a,s=z,u=!!r&&r.keepIdx,l=r?r.timeThreshold:null,d=!(!r||!r.ignoreIsFinished);return e?(W!==t&&(W=t,U("Getting the request for "+X+" time : "+t)),w(e),z=P(t,e,l),z<0&&(w(e),z=P(t,e,l)),z>0&&U("Index for "+X+" time "+t+" is "+z),a=!d&&S(e),a?(n=new o.default,n.action=o.default.ACTION_COMPLETE,n.index=z,n.mediaType=X,n.mediaInfo=Z.getMediaInfo(),U("Signal complete.",n)):(i=(0,b.getSegmentByIndex)(z,e),n=C(i)),u&&s>=0&&(z="SegmentTimeline"===e.segmentInfoType&&Q?z:s),n):null}function L(e,t){var r=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-r,end:t+r},M(e,t,{keepIdx:!1,ignoreIsFinished:!0})}function k(e){var t,r,n;return e&&z!==-1?(W=null,z++,U("Getting the next request at index: "+z),n=S(e),n?(t=new o.default,t.action=o.default.ACTION_COMPLETE,t.index=z,t.mediaType=X,t.mediaInfo=Z.getMediaInfo(),U("Signal complete.")):(w(e),r=(0,b.getSegmentByIndex)(z,e),t=C(r),!r&&Q&&z--),t):null}function x(e){var t=e.representation;t.segments&&B.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function N(e){if(!e.error&&X===e.mediaType){var t,r,n,i,a=e.segments,o=e.representation,s=[],u=0;for(t=0,r=a.length;t<r;t++)n=a[t],i=(0,b.getTimeBasedSegment)(H,Q,o,n.startTime,n.duration,n.timescale,n.media,n.mediaRange,u),s.push(i),i=null,u++;o.segmentAvailabilityRange={start:s[0].presentationStartTime,end:s[r-1].presentationStartTime},o.availableSegmentsNumber=r,I(o,s),T.default.hasInitialization(o)&&B.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:o})}}var F=this.context,U=(0,m.default)(F).getInstance().log,B=(0,h.default)(F).getInstance(),j=(0,_.default)(F).getInstance(),G=e.segmentBaseLoader,H=e.timelineConverter,V=e.dashMetrics,K=e.metricsModel,q=e.baseURLController,Y=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,$=void 0,J=void 0,Z=void 0,ee=void 0;return Y={initialize:r,getStreamProcessor:n,getInitRequest:E,getSegmentRequestForTime:M,getNextSegmentRequest:k,generateSegmentRequestForTime:L,updateRepresentation:D,setCurrentTime:i,getCurrentTime:a,getCurrentIndex:s,getEarliestTime:d,reset:c},t(),Y}Object.defineProperty(t,"__esModule",{value:!0});var a=r(19),o=n(a),s=r(8),u=n(s),l=r(6),d=r(2),f=n(d),c=r(3),h=n(c),g=r(1),p=n(g),v=r(4),m=n(v),y=r(26),_=n(y),E=r(41),T=n(E),b=r(29),S=r(116),R=n(S),A=1;i.__dashjs_factory_name="DashHandler";var w=p.default.getClassFactory(i);w.SEGMENTS_UNAVAILABLE_ERROR_CODE=A,t.default=w,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){E=(0,c.default)(h).getInstance(),T=(0,y.default)(h).getInstance(),R=(0,o.default)(h).getInstance(),O=(0,I.default)(h).create({errHandler:E,metricsModel:w,requestModifier:R})}function t(e){e.baseURLController&&(D=e.baseURLController),e.metricsModel&&(w=e.metricsModel)}function r(e,t){var n=null,i=null,a=D.resolve(e.path),o=t||{init:!0,url:a?a.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};p("Start searching for initialization.");var u=l(o),d=function(t){o.bytesLoaded=o.range.end,i=T.parse(t),n=s(i),n?(e.range=n,m.trigger(g.default.INITIALIZATION_LOADED,{representation:e})):(o.range.end=o.bytesLoaded+o.bytesToLoad,r(e,o))},f=function(){m.trigger(g.default.INITIALIZATION_LOADED,{representation:e})};O.load({request:u,success:d,error:f}),p("Perform init search: "+o.url)}function n(e,t,r,i,o){if(r&&(void 0===r.start||void 0===r.end)){var s=r?r.toString().split("-"):null;r=s?{start:parseFloat(s[0]),end:parseFloat(s[1])}:null}o=o?o:f;var u=null,d=null,c=!!r,h=D.resolve(e.path),g={init:!1,url:h?h.url:void 0,range:c?r:{start:0,end:1500},searching:!c,bytesLoaded:i?i.bytesLoaded:0,bytesToLoad:1500},v=l(g),m=function(r){var i=g.bytesToLoad,s=r.byteLength;if(g.bytesLoaded=g.range.end-g.range.start,u=T.parse(r),d=u.getBox("sidx"),d&&d.isComplete){var l,f,c=d.references;if(null!==c&&void 0!==c&&c.length>0&&(l=1===c[0].reference_type),l){p("Initiate multiple SIDX load."),g.range.end=g.range.start+d.size;var h,v,m,y,_,E=[],b=0,S=(d.offset||g.range.start)+d.size,R=function(r){r?(E=E.concat(r),b++,b>=v&&o(E,e,t)):o(null,e,t)};for(h=0,v=c.length;h<v;h++)m=S,y=S+c[h].referenced_size-1,S+=c[h].referenced_size,_={start:m,end:y},n(e,null,_,g,R)}else p("Parsing segments from SIDX."),f=a(d,g),o(f,e,t)}else{if(d)g.range.start=d.offset||g.range.start,g.range.end=g.range.start+(d.size||i);else{if(s<g.bytesLoaded)return void o(null,e,t);var A=u.getLastBox();A&&A.size?(g.range.start=A.offset+A.size,g.range.end=g.range.start+i):g.range.end+=i}n(e,t,g.range,g,o)}},y=function(){o(null,e,t)};O.load({request:v,success:m,error:y}),p("Perform SIDX load: "+g.url)}function i(){O.abort(),O=null,E=null,T=null,R=null}function a(e,t){for(var r,n,i,a,o=e.references,s=o.length,l=e.timescale,d=e.earliest_presentation_time,f=t.range.start+e.offset+e.first_offset+e.size,c=[],h=0;h<s;h++)i=o[h].subsegment_duration,a=o[h].referenced_size,r=new u.default,r.duration=i,r.startTime=d,r.timescale=l,n=f+a-1,r.mediaRange=f+"-"+n,c.push(r),d+=i,f+=a;return c}function s(e){var t,r,n=e.getBox("ftyp"),i=e.getBox("moov"),a=null;return p("Searching for initialization."),i&&i.isComplete&&(t=n?n.offset:i.offset,r=i.offset+i.size-1,a=t+"-"+r,p("Found the initialization.  Range: "+a)),a}function l(e){if(e.url){var t=new A.default;return t.type=e.init?S.HTTPRequest.INIT_SEGMENT_TYPE:S.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function f(e,t,r){e?m.trigger(g.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:r}):m.trigger(g.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:r,error:new d.default(null,"error loading segments",null)})}var h=this.context,p=(0,b.default)(h).getInstance().log,m=(0,v.default)(h).getInstance(),_=void 0,E=void 0,T=void 0,R=void 0,w=void 0,O=void 0,D=void 0;return _={
setConfig:t,initialize:e,loadInitialization:r,loadSegments:n,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(35),o=n(a),s=r(42),u=n(s),l=r(8),d=n(l),f=r(12),c=n(f),h=r(2),g=n(h),p=r(3),v=n(p),m=r(50),y=n(m),_=r(1),E=n(_),T=r(4),b=n(T),S=r(6),R=r(19),A=n(R),w=r(23),I=n(w);i.__dashjs_factory_name="SegmentBaseLoader",t.default=E.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){R={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"},CueBlockNumber:{tag:21368}}}}},Void:{tag:236,required:!0}}}function t(){w=(0,v.default)(p).getInstance(),I=(0,y.default)(p).getInstance(),D=(0,A.default)(p).create({errHandler:w,metricsModel:O,requestModifier:I})}function r(e){if(!e.baseURLController||!e.metricsModel)throw new Error("Missing config parameter(s)");P=e.baseURLController,O=e.metricsModel}function n(e){var t=[],r=void 0,n=void 0,i=void 0,a=(0,d.default)(p).create({data:e}),o=void 0;for(a.consumeTag(R.Segment.Cues),n=a.getMatroskaCodedNum();a.moreData()&&a.consumeTagAndSize(R.Segment.Cues.CuePoint,!0);){for(r={},r.CueTime=a.parseTag(R.Segment.Cues.CuePoint.CueTime),r.CueTracks=[];a.moreData()&&a.consumeTagAndSize(R.Segment.Cues.CuePoint.CueTrackPositions,!0);){if(i={},i.Track=a.parseTag(R.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=a.parseTag(R.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),a.getPos()+4>n||!a.consumeTag(R.Segment.Cues.CuePoint.CueTrackPositions.CueBlockNumber,!0)?r.CueTracks.push(i):(o=a.getMatroskaCodedNum(),i.BlockNumber=a.getMatroskaUint(o),r.CueTracks.push(i))}if(0===r.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(r)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}function i(e,t,r,i){var a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0;for(o=n(e),s=[],l=0,d=o.length;l<d;l+=1)u=new E.default,a=0,a=l<o.length-1?o[l+1].CueTime-o[l].CueTime:i-o[l].CueTime,u.duration=a,u.startTime=o[l].CueTime,u.timescale=1e3,f=o[l].CueTracks[0].ClusterPosition+t,c=l<o.length-1?o[l+1].CueTracks[0].ClusterPosition+t-1:r-1,u.mediaRange=f+"-"+c,s.push(u);return m("Parsed cues: "+s.length+" cues."),s}function a(e,t,r,n){var a=(0,d.default)(p).create({data:e}),o=void 0,s=void 0,u=r.split("-"),l=null,f={url:t,range:{start:parseFloat(u[0]),end:parseFloat(u[1])},request:l},h=void 0,g=void 0;for(m("Parse EBML header: "+f.url),a.skipOverElement(R.EBML),a.consumeTag(R.Segment),h=a.getMatroskaCodedNum(),h+=a.getPos(),g=a.getPos();a.moreData()&&!a.consumeTagAndSize(R.Segment.Info,!0);)if(!(a.skipOverElement(R.Segment.SeekHead,!0)||a.skipOverElement(R.Segment.Tracks,!0)||a.skipOverElement(R.Segment.Cues,!0)||a.skipOverElement(R.Void,!0)))throw new Error("no valid top level element found");for(;void 0===o;){var v=a.getMatroskaCodedNum(!0),y=a.getMatroskaCodedNum();switch(v){case R.Segment.Info.Duration.tag:o=a[R.Segment.Info.Duration.parse](y);break;default:a.setPos(a.getPos()+y)}}l=c(f);var _=function(e){s=i(e,g,h,o),n(s)},E=function(){m("Download Error: Cues "+f.url),n(null)};D.load({request:l,success:_,error:E}),m("Perform cues load: "+f.url+" bytes="+f.range.start+"-"+f.range.end)}function s(e,t){var r=null,n=P.resolve(e.path),i=n?n.url:void 0,a=e.range.split("-"),s=t||{range:{start:parseFloat(a[0]),end:parseFloat(a[1])},request:r,url:i,init:!0};m("Start loading initialization."),r=c(s);var u=function(){_.trigger(o.default.INITIALIZATION_LOADED,{representation:e})},l=function(){_.trigger(o.default.INITIALIZATION_LOADED,{representation:e})};D.load({request:r,success:u,error:l}),m("Perform init load: "+s.url)}function l(e,t,r,n){var i=null,o=P.resolve(e.path),s=o?o.url:void 0,u=8192,l={bytesLoaded:0,bytesToLoad:u,range:{start:0,end:u},request:i,url:s,init:!1};n=n?n:f,i=c(l),m("Parsing ebml header");var d=function(i){a(i,s,r,function(r){n(r,e,t)})},h=function(){n(null,e,t)};D.load({request:i,success:d,error:h})}function f(e,t,r){e?_.trigger(o.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:r}):_.trigger(o.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:r,error:new Error(null,"error loading segments",null)})}function c(e){var t=new S.default;return t.type=e.init?T.HTTPRequest.INIT_SEGMENT_TYPE:T.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}function h(){w=null,I=null,m=null}var p=this.context,m=(0,g.default)(p).getInstance().log,_=(0,u.default)(p).getInstance(),b=void 0,R=void 0,w=void 0,I=void 0,O=void 0,D=void 0,P=void 0;return b={setConfig:r,initialize:t,loadInitialization:s,loadSegments:l,reset:h},e(),b}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a),s=r(3),u=n(s),l=r(186),d=n(l),f=r(1),c=n(f),h=r(4),g=n(h),p=r(12),v=n(p),m=r(35),y=n(m),_=r(42),E=n(_),T=r(6),b=r(19),S=n(b),R=r(23),A=n(R);i.__dashjs_factory_name="WebmSegmentBaseLoader",t.default=c.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){H=null,V=-1,K=!0,q=[],W=(0,c.default)(B).getInstance(),X=(0,v.default)(B).getInstance(),$=(0,g.default)(B).getInstance(),J=(0,y.default)(B).getInstance(),Z=(0,E.default)(B).getInstance(),ee=(0,R.default)(B).getInstance(),te=(0,d.default)(B).getInstance(),re=(0,o.default)(B).getInstance(),ne=(0,u.default)(B).getInstance(),ie=(0,b.default)(B).getInstance(),j.on(P.default.QUALITY_CHANGE_REQUESTED,F,G),j.on(P.default.REPRESENTATION_UPDATED,L,G),j.on(P.default.WALLCLOCK_TIME_UPDATED,k,G),j.on(P.default.BUFFER_LEVEL_UPDATED,x,G)}function t(e){e.abrController&&(W=e.abrController)}function r(e){z=e,Q=z.getIndexHandler()}function n(){return z}function i(){return H}function a(){return V}function s(){return K}function l(){return Y}function f(){j.off(P.default.QUALITY_CHANGE_REQUESTED,F,G),j.off(P.default.REPRESENTATION_UPDATED,L,G),j.off(P.default.WALLCLOCK_TIME_UPDATED,k,G),j.off(P.default.BUFFER_LEVEL_UPDATED,x,G),H=null,V=-1,K=!0,q=[],W=null,X=null,$=null,J=null,Z=null,ee=null,te=null,re=null,ne=null,ie=null}function h(e,t,r){var n,i,a=null,o=z.getStreamInfo(),s=W.getTopQualityIndexFor(r,o.id);if(K=!0,j.trigger(P.default.DATA_UPDATE_STARTED,{sender:this}),q=A(t),null===H&&"fragmentedText"!==r?(i=W.getAverageThroughput(r),a=i||W.getInitialBitrateFor(r,o),n=W.getQualityForBitrate(z.getMediaInfo(),a)):n=W.getQualityFor(r,o),n>s&&(n=s),Y=_(n),H=e,"video"!==r&&"audio"!==r&&"fragmentedText"!==r)return K=!1,void j.trigger(P.default.DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:Y});for(var u=0;u<q.length;u++)Q.updateRepresentation(q[u],!0)}function p(){var e=new Date,t=l(),r=1e3*$.getTime();Z.addRepresentationSwitch(t.adaptation.type,e,r,t.id)}function m(){var e=te.calcSegmentAvailabilityRange(Y,z.isDynamic());Z.addDVRInfo(z.getType(),$.getTime(),z.getStreamInfo().manifestInfo,e)}function _(e){return q[e]}function T(e){return q.indexOf(e)}function S(){for(var e=0,t=q.length;e<t;e++){var r=q[e].segmentInfoType;if(null===q[e].segmentAvailabilityRange||!N.default.hasInitialization(q[e])||("SegmentBase"===r||"BaseURL"===r)&&!q[e].segments)return!1}return!0}function A(e){var t,r=J.getValue();return V=re.getIndexForAdaptation(H,r,e.period.index),t=re.getRepresentationsForAdaptation(r,e)}function I(e){for(var t,r=0,n=q.length;r<n;r++)t=q[r],t.segmentAvailabilityRange=te.calcSegmentAvailabilityRange(t,e)}function D(){q.forEach(function(e){e.segmentAvailabilityRange=null})}function C(e){var t=e,r=function(){if(!s()){K=!0,j.trigger(P.default.DATA_UPDATE_STARTED,{sender:G}),D();for(var e=0;e<q.length;e++)Q.updateRepresentation(q[e],!0)}};K=!1,j.trigger(M.default.AST_IN_FUTURE,{delay:t}),setTimeout(r,t)}function L(e){if(e.sender.getStreamProcessor()===z&&s()){var t,r,n,i=e.representation,a=Z.getMetricsFor("stream"),o=Z.getMetricsFor(l().adaptation.type),u=ne.getCurrentManifestUpdate(a),d=!1,f=0;if("dynamic"===i.adaptation.period.mpd.manifest.type){var c=i.segmentAvailabilityRange.end-i.segmentAvailabilityRange.start,h=$.computeLiveDelay(Y.segmentDuration,z.getStreamInfo().manifestInfo.DVRWindowSize);f=1e3*(h-c)}if(f>0)return m(),C(f),r=new w.default(U,"Segments update failed",null),void j.trigger(P.default.DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:Y,error:r});if(u){for(var g=0;g<u.trackInfo.length;g++)if(t=u.trackInfo[g],t.index===i.index&&t.mediaType===z.getType()){d=!0;break}d||Z.addManifestUpdateRepresentationInfo(u,i.id,i.index,i.adaptation.period.index,z.getType(),i.presentationTimeOffset,i.startNumber,i.segmentInfoType)}S()&&(K=!1,W.setPlaybackQuality(z.getType(),z.getStreamInfo(),T(Y)),Z.updateManifestUpdateInfo(u,{latency:Y.segmentAvailabilityRange.end-$.getTime()}),n=ne.getCurrentRepresentationSwitch(o),n||p(),j.trigger(P.default.DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:Y}))}}function k(e){e.isDynamic&&I(e.isDynamic)}function x(e){e.sender.getStreamProcessor()===z&&m()}function F(e){e.mediaType===z.getType()&&z.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality&&(Y=_(e.newQuality),ee.setSavedBitrateSettings(e.mediaType,Y.bandwidth),p())}var U=1,B=this.context,j=(0,O.default)(B).getInstance(),G=void 0,H=void 0,V=void 0,K=void 0,q=void 0,Y=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,$=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,re=void 0,ne=void 0,ie=void 0;return G={initialize:r,setConfig:t,getData:i,getDataIndex:a,isUpdating:s,updateData:h,getStreamProcessor:n,getCurrentRepresentation:l,getRepresentationForQuality:_,reset:f},e(),G}Object.defineProperty(t,"__esModule",{value:!0});var a=r(13),o=n(a),s=r(11),u=n(s),l=r(40),d=n(l),f=r(14),c=n(f),h=r(9),g=n(h),p=r(24),v=n(p),m=r(33),y=n(m),_=r(10),E=n(_),T=r(5),b=n(T),S=r(51),R=n(S),A=r(8),w=n(A),I=r(3),O=n(I),D=r(2),P=n(D),C=r(22),M=n(C),L=r(1),k=n(L),x=r(41),N=n(x);i.__dashjs_factory_name="RepresentationController",t.default=k.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){s=[new y.default,new E.default,new b.default,new v.default],u=new g.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:s}),l=new c.default([new R.default,new w.default])}function t(e,t){var r;try{var a=window.performance.now();if(r=u.xml_str2json(e),!r)throw new Error("parser error");var o=window.performance.now();l.run(r);var d=window.performance.now();t.setMatchers(s),t.setIron(l),n("Parsing complete: ( xml2json: "+(o-a).toPrecision(3)+"ms, objectiron: "+(d-o).toPrecision(3)+"ms, total: "+((d-a)/1e3).toPrecision(3)+"s)")}catch(t){return i.manifestError("parsing the manifest failed","parse",e,t),null}return r}var r=this.context,n=(0,d.default)(r).getInstance().log,i=(0,o.default)(r).getInstance(),a=void 0,s=void 0,u=void 0,l=void 0;return a={parse:t},e(),a}Object.defineProperty(t,"__esModule",{value:!0});var a=r(12),o=n(a),s=r(1),u=n(s),l=r(4),d=n(l),f=r(99),c=n(f),h=r(39),g=n(h),p=r(113),v=n(p),m=r(111),y=n(m),_=r(110),E=n(_),T=r(112),b=n(T),S=r(108),R=n(S),A=r(109),w=n(A);i.__dashjs_factory_name="DashParser",t.default=u.default.getClassFactory(i),e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n){r(this,e);var i=function(e){return e&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()};this._name=t,this._merge=void 0!==n?n:i(t)}return n(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(60),u=n(s),l=function(e){function t(){i(this,t);var e=["profiles","width","height","sar","frameRate","audioSamplingRate","mimeType","segmentProfiles","codecs","maximumSAPPeriod","startWithSAP","maxPlayoutRate","codingDependency","scanType","FramePacking","AudioChannelConfiguration","ContentProtection","EssentialProperty","SupplementalProperty","InbandEventStream"];o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"AdaptationSet",e,[new u.default("Representation",e,[new u.default("SubRepresentation",e)])])}return a(t,e),t}(u.default);t.default=l,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(60),u=n(s),l=function(e){function t(){i(this,t);var e=["SegmentBase","SegmentTemplate","SegmentList"];o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Period",e,[new u.default("AdaptationSet",e,[new u.default("Representation",e)])])}return a(t,e),t}(u.default);t.default=l,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(28),u=n(s),l=60,d=60,f=1e3,c=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,h=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return c.test(e.value)},function(e){var t=c.exec(e),r=void 0;if(r=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&parseFloat(t[7])*f||0),t[9]&&t[10]){var n=parseInt(t[9],10)*d+parseInt(t[10],10);r+=("+"===t[8]?-1:1)*n*l*f}return new Date(r)})}return a(t,e),t}(u.default);t.default=h,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(28),u=n(s),l=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,d=31536e3,f=2592e3,c=86400,h=3600,g=60,p=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){for(var t=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],r=t.length,n=0;n<r;n++)if(e.nodeName===t[n])return l.test(e.value);return!1},function(e){var t=l.exec(e),r=parseFloat(t[2]||0)*d+parseFloat(t[4]||0)*f+parseFloat(t[6]||0)*c+parseFloat(t[8]||0)*h+parseFloat(t[10]||0)*g+parseFloat(t[12]||0);return void 0!==t[1]&&(r=-r),r})}return a(t,e),t}(u.default);t.default=p,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(28),u=n(s),l=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,d=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return l.test(e.value)},function(e){return parseFloat(e)})}return a(t,e),t}(u.default);t.default=d,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(28),u=n(s),l=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e,t){var r={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value","id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};if(r.hasOwnProperty(t)){var n=r[t];return void 0!==n&&n.indexOf(e.name)>=0}return!1},function(e){return String(e)})}return a(t,e),t}(u.default);t.default=l,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.boxParser&&(i=e.boxParser)}function t(e){var t,r,n,a,o,s,u,l,d,f,c,h,g,p=i.parse(e),v=p.getBox("tfhd"),m=p.getBox("tfdt"),y=p.getBox("trun"),_=p.getBox("moof"),E=p.getBox("mfhd"),T=p.getBox("subs");for(c=E.sequence_number,n=y.sample_count,o=m.baseMediaDecodeTime,f=(v.base_data_offset||0)+(y.data_offset||0),s=[],g=0,l=0;l<n;l++){u=y.samples[l],t=void 0!==u.sample_duration?u.sample_duration:v.default_sample_duration,a=void 0!==u.sample_size?u.sample_size:v.default_sample_size,r=void 0!==u.sample_composition_time_offset?u.sample_composition_time_offset:0;var b={dts:o,cts:o+r,duration:t,offset:_.offset+f,size:a,subSizes:[a]};if(T&&g<T.samples_with_subsamples.length&&T.samples_with_subsamples[g].nr==l+1){for(b.subSizes=[],d=0;d<T.samples_with_subsamples[g].subsamples.length;d++){var S=T.samples_with_subsamples[g].subsamples[d].size;b.subSizes.push(S)}g++}s.push(b),f+=a,o+=t}return h=o-m.baseMediaDecodeTime,{sampleList:s,sequenceNumber:c,totalDuration:h}}function r(e){var t=i.parse(e),r=t.getBox("mdhd");return r?r.timescale:NaN}var n=void 0,i=void 0;return n={getSamplesInfo:t,getMediaTimescaleFromMoov:r,setConfig:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="FragmentedTextBoxParser",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function r(e,r,i,a){var o,u,l,d,f,c,h,g=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,p=g.SegmentURL_asArray.length,v=[];for(h=e.startNumber,d=(0,s.decideSegmentListRangeForTemplate)(n,t,e,r,i,a),f=Math.max(d.start,0),c=Math.min(d.end,g.SegmentURL_asArray.length-1),o=f;o<=c;o++)l=g.SegmentURL_asArray[o],u=(0,s.getIndexBasedSegment)(n,t,e,o),u.replacementTime=(h+o-1)*e.segmentDuration,u.media=l.media?l.media:"",u.mediaRange=l.mediaRange,u.index=l.index,u.indexRange=l.indexRange,v.push(u),u=null;return e.availableSegmentsNumber=p,v}var n=e.timelineConverter,i=void 0;return i={getSegments:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(29);i.__dashjs_factory_name="ListSegmentsGetter";var u=o.default.getClassFactory(i);t.default=u,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function r(){s=(0,u.default)(a).create(e,t),l=(0,d.default)(a).create(e,t),f=(0,c.default)(a).create(e,t)}function n(e,t,r,n,a){var o,u=e.segmentInfoType;return"SegmentBase"!==u&&"BaseURL"!==u&&i(e,r)?("SegmentTimeline"===u?o=s.getSegments(e,t,r,a):"SegmentTemplate"===u?o=l.getSegments(e,t,r,a):"SegmentList"===u&&(o=f.getSegments(e,t,r,a)),n&&n(e,o)):o=e.segments,o}function i(e,t){var r,n,i=e.segments,a=!1;return i&&0!==i.length?(n=i[0].availabilityIdx,r=i[i.length-1].availabilityIdx,a=t<n||t>r):a=!0,a}var a=this.context,o=void 0,s=void 0,l=void 0,f=void 0;return o={getSegments:n},r(),o}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(118),u=n(s),l=r(117),d=n(l),f=r(115),c=n(f);i.__dashjs_factory_name="SegmentsGetter";var h=o.default.getClassFactory(i);t.default=h,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function r(e,r,i,a){var o,u,l,d,f,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,h=e.segmentDuration,g=e.segmentAvailabilityRange,p=[],v=null,m=null;for(f=e.startNumber,o=isNaN(h)&&!t?{start:f,end:f}:(0,s.decideSegmentListRangeForTemplate)(n,t,e,r,i,a),l=o.start,d=o.end,u=l;u<=d;u++)m=(0,s.getIndexBasedSegment)(n,t,e,u),m.replacementTime=(f+u-1)*e.segmentDuration,v=c.media,v=(0,s.replaceTokenForTemplate)(v,"Number",m.replacementNumber),v=(0,s.replaceTokenForTemplate)(v,"Time",m.replacementTime),m.media=v,p.push(m),m=null;return isNaN(h)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((g.end-g.start)/h),p}var n=e.timelineConverter,i=void 0;return i={getSegments:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(29);i.__dashjs_factory_name="TemplateSegmentsGetter";var u=o.default.getClassFactory(i);t.default=u,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function r(e,r,i,a){var o,u,l,d,f,c,h,g,p,v,m,y,_,E,T=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,b=T.SegmentTimeline,S=T.SegmentURL_asArray,R=e.availableSegmentsNumber>0,A=10,w=0,I=0,O=-1,D=[],P=!1,C=function(r,i){var a=T.media,o=r.mediaRange;return S&&(a=S[i].media||"",o=S[i].mediaRange),(0,s.getTimeBasedSegment)(n,t,e,w,r.d,E,a,o,O)};for(E=e.timescale,o=b.S_asArray,p=(0,s.decideSegmentListRangeForTimeline)(n,t,r,i,a),p?(y=p.start,_=p.end):m=n.calcMediaTimeFromPresentationTime(r||0,e),l=0,d=o.length;l<d;l++){if(u=o[l],c=0,u.hasOwnProperty("r")&&(c=u.r),u.hasOwnProperty("t")&&(w=u.t,I=w/E),c<0){if(g=o[l+1],g&&g.hasOwnProperty("t"))h=g.t/E;else{var M=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:n.calcSegmentAvailabilityRange(e,t).end;h=n.calcMediaTimeFromPresentationTime(M,e),e.segmentDuration=u.d/E}c=Math.ceil((h-I)/(u.d/E))-1}if(v){if(R)break;O+=c+1}else for(f=0;f<=c;f++){if(O++,p){if(O>_){if(v=!0,R)break;continue}O>=y&&D.push(C(u,O))}else{if(D.length>A){if(v=!0,R)break;continue}P?D.push(C(u,O)):I>=m-u.d/E*1.5&&(P=!0,D.push(C(u,O)))}w+=u.d,I=w/E}}return R||(e.availableSegmentsNumber=O+1),D}var n=e.timelineConverter,i=void 0;return i={getSegments:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(29);i.__dashjs_factory_name="TimelineSegmentsGetter";var u=o.default.getClassFactory(i);t.default=u,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.period=null,this.index=-1,this.type=null};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};n.DEFAULT_ID="defaultId",t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){h=(0,o.default)(s).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}function r(e){var t=function(t){l.trigger(g.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var r=new u.default(e.url);h.load({request:r,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)}function n(e){var t=function(t,r){l.trigger(g.default.LOADING_COMPLETED,{request:e,response:t||null,error:r||null,sender:f})};e?h.load({request:e,progress:function(){l.trigger(g.default.LOADING_PROGRESS,{request:e})},success:function(e){t(e)},error:function(e,r,n){t(void 0,new d.default(m,n,r))}}):t(void 0,new d.default(y,_))}function i(){h&&h.abort()}function a(){h&&(h.abort(),h=null)}var s=this.context,l=(0,c.default)(s).getInstance(),f=void 0,h=void 0;return f={checkForExistence:r,load:n,abort:i,reset:a},t(),f}Object.defineProperty(t,"__esModule",{value:!0});var a=r(23),o=n(a),s=r(193),u=n(s),l=r(8),d=n(l),f=r(3),c=n(f),h=r(2),g=n(h),p=r(1),v=n(p),m=1,y=2,_="request is null";i.__dashjs_factory_name="FragmentLoader";var E=v.default.getClassFactory(i);E.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=m,E.FRAGMENT_LOADER_ERROR_NULL_REQUEST=y,t.default=E,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){s.on(_.default.XLINK_READY,r,h),v=(0,u.default)(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),y=(0,o.default)(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}function r(e){s.trigger(_.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function n(e){var t=new c.default(e,p.HTTPRequest.MPD_TYPE);v.load({request:t,success:function(t,r,n){var i,a;n.responseURL&&n.responseURL!==e?(a=l.parseBaseUrl(n.responseURL),i=n.responseURL):(l.isRelative(e)&&(e=l.resolve(e,window.location.href)),a=l.parseBaseUrl(e));var o=f.parse(t,y);o?(o.url=i||e,o.originalUrl||(o.originalUrl=o.url),o.baseUri=a,o.loadedTime=new Date,y.resolveManifestOnLoad(o)):s.trigger(_.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new g.default(b,R)})},error:function(t,r,n){s.trigger(_.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new g.default(S,"Failed loading manifest: "+e+", "+n)})}})}function i(){s.off(_.default.XLINK_READY,r,h),y&&(y.reset(),y=null),v&&(v.abort(),v=null)}var a=this.context,s=(0,m.default)(a).getInstance(),l=(0,d.default)(a).getInstance(),f=e.parser,h=void 0,v=void 0,y=void 0;return h={load:n,reset:i},t(),h}Object.defineProperty(t,"__esModule",{value:!0});var a=r(138),o=n(a),s=r(23),u=n(s),l=r(26),d=n(l),f=r(77),c=n(f),h=r(8),g=n(h),p=r(6),v=r(3),m=n(v),y=r(2),_=n(y),E=r(1),T=n(E),b=1,S=2,R="parsing failed";
i.__dashjs_factory_name="ManifestLoader";var A=T.default.getClassFactory(i);A.MANIFEST_LOADER_ERROR_PARSING_FAILURE=b,A.MANIFEST_LOADER_ERROR_LOADING_FAILURE=S,t.default=A,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&(e.manifestModel&&(I=e.manifestModel),e.dashManifestModel&&(O=e.dashManifestModel))}function t(e){w=e,b=NaN,S=null,A=!1,R=!0,D=(0,c.default)(y).getInstance(),E.on(u.default.STREAMS_COMPOSED,m,this),E.on(u.default.PLAYBACK_STARTED,p,this),E.on(u.default.PLAYBACK_PAUSED,v,this),E.on(u.default.INTERNAL_MANIFEST_LOADED,h,this)}function r(e){d(e)}function n(){return w}function i(){E.off(u.default.PLAYBACK_STARTED,p,this),E.off(u.default.PLAYBACK_PAUSED,v,this),E.off(u.default.STREAMS_COMPOSED,m,this),E.off(u.default.INTERNAL_MANIFEST_LOADED,h,this),a(),R=!0,A=!1,b=NaN,D=null}function a(){null!==S&&(clearInterval(S),S=null)}function s(){a(),isNaN(b)||(_("Refresh manifest in "+b+" seconds."),S=setTimeout(f,1e3*b))}function l(){A=!0;var e=I.getValue(),t=e.url,r=O.getLocation(e);r&&(t=r),w.load(t)}function d(e){I.setValue(e);var t=new Date,r=(t.getTime()-e.loadedTime.getTime())/1e3;b=O.getManifestUpdatePeriod(e,r),E.trigger(u.default.MANIFEST_UPDATED,{manifest:e}),_("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),R||s()}function f(){R&&!D.getScheduleWhilePaused()||A||l()}function h(e){e.error||d(e.manifest)}function p(){R=!1,s()}function v(){R=!0,a()}function m(){A=!1}var y=this.context,_=(0,g.default)(y).getInstance().log,E=(0,o.default)(y).getInstance(),T=void 0,b=void 0,S=void 0,R=void 0,A=void 0,w=void 0,I=void 0,O=void 0,D=void 0;return T={initialize:t,setManifest:r,getManifestLoader:n,refreshManifest:l,setConfig:e,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=n(a),s=r(2),u=n(s),l=r(1),d=n(l),f=r(5),c=n(f),h=r(4),g=n(h);i.__dashjs_factory_name="ManifestUpdater",t.default=d.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t,r){if(!e||"VIDEO"!==e.nodeName)return null;if(e._dashjs_player)return e._dashjs_player;var i,a=e.id||e.name||"video element";if(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==n})[0],!t&&e.src)t=document.createElement("source"),t.src=e.src;else if(!t&&!e.src)return null;return r=r||{},i=(0,u.default)(r).create(),i.initialize(e,t.src,e.autoplay),i.getDebug().log("Converted "+a+" to dash.js player and added content: "+t.src),e._dashjs_player=i,i}function t(t,i){var a=[];t=t||"[data-dashjs-player]",i=i||document;for(var o=i.querySelectorAll(t),s=0;s<o.length;s++){var u=e(o[s],null);a.push(u)}for(var l=i.querySelectorAll('source[type="'+n+'"]'),s=0;s<l.length;s++){var d=r(l[s]),u=e(d,null);a.push(u)}return a}function r(e){for(var t=!0;t;){var r=e;if(t=!1,"video"===r.nodeName.toLowerCase())return r;e=r.parentNode,t=!0}}var n="application/dash+xml";return{create:e,createAll:t}}function a(){window.removeEventListener("load",a),l.createAll()}function o(){window.dashjs&&(window.clearInterval(d),l.createAll())}Object.defineProperty(t,"__esModule",{value:!0});var s=r(64),u=n(s),l=i(),d=void 0,f="undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate;!f&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?l.createAll():d=window.setInterval(o,500):window.addEventListener("load",a)),t.default=l,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){le=[],de=!1,fe=!1,ce=null,he={},ge=!1,pe=!1,me=(0,o.default)(J).getInstance(),ye=(0,b.default)(J).getInstance(),be=(0,v.default)(J).getInstance(),_e=(0,d.default)(J).getInstance(),Ee=(0,g.default)(J).create(),Se=(0,j.default)(J).getInstance(),ee.on(k.default.BUFFERING_COMPLETED,Y,ue),ee.on(k.default.DATA_UPDATE_COMPLETED,z,ue)}function r(e,t){ce=e,ve=t,ve&&(ee.on(k.default.KEY_ERROR,D,ue),ee.on(k.default.SERVER_CERTIFICATE_UPDATED,D,ue),ee.on(k.default.LICENSE_REQUEST_COMPLETE,D,ue),ee.on(k.default.KEY_SYSTEM_SELECTED,D,ue),ee.on(k.default.KEY_SESSION_CREATED,D,ue))}function n(e){de||(ee.on(k.default.CURRENT_TRACK_CHANGED,x,ue),H(e),de=!0)}function i(){for(var e=le.length,t=0;t<e;t++)le[t].reset();le=[],de=!1,fe=!1,S(),ee.off(k.default.CURRENT_TRACK_CHANGED,x,ue)}function a(){ye&&(ye.pause(),ye=null),Ee&&(Ee.reset(),Ee=null),i(),_e=null,be=null,re=null,te=null,ne=null,ie=null,Z=null,ae=null,ge=!1,pe=!1,he={},ee.off(k.default.DATA_UPDATE_COMPLETED,z,ue),ee.off(k.default.BUFFERING_COMPLETED,Y,ue),ee.off(k.default.KEY_ERROR,D,ue),ee.off(k.default.SERVER_CERTIFICATE_UPDATED,D,ue),ee.off(k.default.LICENSE_REQUEST_COMPLETE,D,ue),ee.off(k.default.KEY_SYSTEM_SELECTED,D,ue),ee.off(k.default.KEY_SESSION_CREATED,D,ue)}function s(){return ce.duration}function l(){return ce.start}function f(){return ce.index}function h(){return ce.id}function p(){return ce}function m(e){return null!==K(e)}function _(e){var t=K(e);return be.getBitrateList(t)}function T(){Te&&Te.start()}function S(){Te&&Te.clear()}function A(){return de}function I(){return pe}function D(e){e.error&&(ae.mediaKeySessionError(e.error),Z(e.error),a())}function C(e){return"text"===e.type?e.mimeType:e.type}function L(e,t,r){var n,i,a=e.type;if("muxed"===a&&e)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",Z(i),ae.manifestError(i,"multiplexedrep",te.getValue()),!1;if("text"===a||"fragmentedText"===a||"embeddedText"===a)return!0;if(n=e.codec,Z(a+" codec: "+n),e.contentProtection&&!ie.supportsEncryptedMedia())ae.capabilityError("encryptedmedia");else if(!ie.supportsCodec((0,y.default)(J).getInstance().getElement(),n))return i=a+"Codec ("+n+") is not supported.",ae.manifestError(i,"codec",r),Z(i),!1;return!0}function x(e){if(e.newMediaInfo.streamInfo.id===ce.id){var t=W(e.oldMediaInfo);if(t){var r=ye.getTime(),n=t.getBuffer(),i=e.newMediaInfo,a=te.getValue(),o=le.indexOf(t),s=t.getMediaSource();"fragmentedText"!==i.type?(t.reset(!0),B(i,a,s,{buffer:n,replaceIdx:o,currentTime:r}),ye.seek(ye.getTime())):t.updateMediaInfo(a,i)}}}function F(e){var t=e.split("/")[1];return"webm"===t.toLowerCase()}function U(e){var t=F(e.mimeType)?(0,O.default)(J).getInstance():(0,w.default)(J).getInstance();t.setConfig({baseURLController:se,metricsModel:(0,E.default)(J).getInstance()}),t.initialize();var r=(0,R.default)(J).create({segmentBaseLoader:t,timelineConverter:oe,dashMetrics:(0,P.default)(J).getInstance(),metricsModel:(0,E.default)(J).getInstance(),baseURLController:se});return r}function B(e,t,r,n){var i=(0,u.default)(J).create({indexHandler:U(e),timelineConverter:oe,adapter:ne,manifestModel:te}),a=ne.getAllMediaInfoForType(t,ce,e.type);if(i.initialize(C(e),Ee,r,ue,Te),be.updateTopQualityIndex(e),n?(i.setBuffer(n.buffer),i.getIndexHandler().setCurrentTime(n.currentTime),le[n.replaceIdx]=i):le.push(i),"text"===e.type||"fragmentedText"===e.type){for(var o,s=0;s<a.length;s++)a[s].index===e.index&&(o=s),i.updateMediaInfo(t,a[s]);"fragmentedText"===e.type&&i.updateMediaInfo(t,a[o])}else i.updateMediaInfo(t,e);return i}function G(e,t){var r,n=te.getValue(),i=ne.getAllMediaInfoForType(n,ce,e),a=null;if(!i||0===i.length)return void Z("No "+e+" data.");for(var o=0,s=i.length;o<s;o++)if(a=i[o],"embeddedText"===e)Se.addEmbeddedTrack(a);else{if(!L(a,t,n))continue;_e.isMultiTrackSupportedByType(a.type)&&_e.addTrack(a,ce)}"embeddedText"!==e&&0!==_e.getTracksFor(e,ce).length&&(_e.checkInitialMediaSettingsForType(e,ce),r=_e.getCurrentTrackFor(e,ce),B(r,n,t))}function H(e){var t,r=te.getValue();if(Te=(0,c.default)(J).getInstance(),Te.initialize(),Te.setConfig({manifestModel:te,manifestUpdater:re}),t=ne.getEventsFor(r,ce),Te.addInlineEvents(t),ge=!0,G("video",e),G("audio",e),G("text",e),G("fragmentedText",e),G("embeddedText",e),G("muxed",e),q(),fe=!0,ge=!1,0===le.length){var n="No streams to play.";ae.manifestError(n,"nostreams",r),Z(n)}else me.initialize(oe,le[0]),V()}function V(){var e=le.length,t=!!he.audio||!!he.video,r=t?new Error($,"Data update failed",null):null,n=0;for(n;n<e;n++)if(le[n].isUpdating()||ge)return;pe=!0,fe&&(ve&&ve.initialize(te.getValue(),K("audio"),K("video")),ee.trigger(k.default.STREAM_INITIALIZED,{streamInfo:ce,error:r}))}function K(e){for(var t=le.length,r=null,n=0;n<t;n++)if(r=le[n],r.getType()===e)return r.getMediaInfo();return null}function q(){for(var e=0,t=le.length;e<t;e++)le[e].createBuffer()}function Y(e){if(e.streamInfo===ce){var t=Q(),r=t.length,n=0;for(n;n<r;n++)if(!t[n].isBufferingCompleted())return;ee.trigger(k.default.STREAM_BUFFERING_COMPLETED,{streamInfo:ce})}}function z(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===ce&&(he[t.getType()]=e.error,V())}function W(e){if(!e)return!1;var t=Q();return t.filter(function(t){return t.getType()===e.type})[0]}function Q(){var e,t,r=le.length,n=[],i=0;for(i;i<r;i++)t=le[i],e=t.getType(),"audio"!==e&&"video"!==e&&"fragmentedText"!==e||n.push(t);return n}function X(e){Z("Manifest updated... updating data system wide.");var t=te.getValue();if(de=!1,ge=!0,pe=!1,ce=e,Te){var r=ne.getEventsFor(t,ce);Te.addInlineEvents(r)}for(var n=0,i=le.length;n<i;n++){var a=le[n],o=ne.getMediaInfoForType(t,ce,a.getType());be.updateTopQualityIndex(o),a.updateMediaInfo(t,o)}ge=!1,V()}var $=1,J=this.context,Z=(0,N.default)(J).getInstance().log,ee=(0,M.default)(J).getInstance(),te=e.manifestModel,re=e.manifestUpdater,ne=e.adapter,ie=e.capabilities,ae=e.errHandler,oe=e.timelineConverter,se=e.baseURLController,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,ge=void 0,pe=void 0,ve=void 0,me=void 0,ye=void 0,_e=void 0,Ee=void 0,Te=void 0,be=void 0,Se=void 0;return ue={initialize:r,activate:n,deactivate:i,getDuration:s,getStartTime:l,getStreamIndex:f,getId:h,getStreamInfo:p,hasMedia:m,getBitrateListFor:_,startEventController:T,isActivated:A,isInitialized:I,updateData:X,reset:a,getProcessors:Q},t(),ue}Object.defineProperty(t,"__esModule",{value:!0});var a=r(52),o=n(a),s=r(128),u=n(s),l=r(15),d=n(l),f=r(132),c=n(f),h=r(133),g=n(h),p=r(14),v=n(p),m=r(18),y=n(m),_=r(10),E=n(_),T=r(9),b=n(T),S=r(102),R=n(S),A=r(103),w=n(A),I=r(104),O=n(I),D=r(11),P=n(D),C=r(3),M=n(C),L=r(2),k=n(L),x=r(4),N=n(x),F=r(1),U=n(F),B=r(16),j=n(B);i.__dashjs_factory_name="Stream",t.default=U.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){re=[]}function r(e,t,r,n,i){te=e,ne=n,ie=i,le=t,Z=ne.getStreamInfo().manifestInfo.isDynamic,W.initialize(this),ae=(0,o.default)(z).getInstance(),ae.initialize(te,this),oe=Y(e),se=(0,v.default)(z).create({metricsModel:(0,b.default)(z).getInstance(),manifestModel:$,adapter:X,dashMetrics:(0,k.default)(z).getInstance(),dashManifestModel:(0,M.default)(z).getInstance(),timelineConverter:Q,rulesController:(0,y.default)(z).getInstance(),mediaPlayerModel:(0,E.default)(z).getInstance()}),oe.initialize(te,r,this),se.initialize(te,this),de=(0,R.default)(z).create({metricsModel:(0,b.default)(z).getInstance(),errHandler:(0,U.default)(z).getInstance(),requestModifier:(0,w.default)(z).getInstance()}),fe=se.getFragmentModel(),fe.setLoader(de),ue=(0,N.default)(z).create(),ue.initialize(this)}function n(e){W.reset(),oe&&(oe.reset(e),oe=null),se&&(se.reset(),se=null),ue&&(ue.reset(),ue=null),le=null,de=null,ie=null,ne=null,Z=null,ee=null,re=[],te=null}function i(){return ue.isUpdating()}function a(){return te}function s(){return ae}function l(){return ue}function f(){return de}function h(){return W}function p(){return le}function m(){return oe.getBuffer()}function _(e){oe.setBuffer(e)}function T(){return oe}function S(){return fe}function A(){return ne?ne.getStreamInfo():null}function I(e,t){t===ee||t&&ee&&t.type!==ee.type||(ee=t),re.indexOf(t)===-1&&re.push(t),X.updateData(e,this)}function D(){return re}function C(){return ee}function L(){return oe.getMediaSource()}function x(){return se}function F(){return ie}function B(){se.start()}function j(){se.stop()}function G(){return X.getCurrentRepresentationInfo($.getValue(),ue)}function H(e){return X.getRepresentationInfoForQuality($.getValue(),ue,e)}function V(){return oe.getIsBufferingCompleted()}function K(){return oe.getBuffer()||oe.createBuffer(ee)}function q(){return Z}function Y(e){var t=null;return t="video"===e||"audio"===e||"fragmentedText"===e?(0,u.default)(z).create({metricsModel:(0,b.default)(z).getInstance(),manifestModel:$,sourceBufferController:(0,O.default)(z).getInstance(),errHandler:(0,U.default)(z).getInstance(),streamController:(0,d.default)(z).getInstance(),mediaController:(0,c.default)(z).getInstance(),adapter:X,textSourceBuffer:(0,P.default)(z).getInstance()}):(0,g.default)(z).create({errHandler:(0,U.default)(z).getInstance(),sourceBufferController:(0,O.default)(z).getInstance()})}var z=this.context,W=e.indexHandler,Q=e.timelineConverter,X=e.adapter,$=e.manifestModel,J=void 0,Z=void 0,ee=void 0,te=void 0,re=void 0,ne=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0;return J={initialize:r,isUpdating:i,getType:a,getBufferController:T,getABRController:s,getFragmentLoader:f,getFragmentModel:S,getScheduleController:x,getEventController:F,getFragmentController:p,getRepresentationController:l,getIndexHandler:h,getCurrentRepresentationInfo:G,getRepresentationInfoForQuality:H,isBufferingCompleted:V,createBuffer:K,getStreamInfo:A,updateMediaInfo:I,getMediaInfoArr:D,getMediaInfo:C,getMediaSource:L,getBuffer:m,setBuffer:_,start:B,stop:j,isDynamic:q,reset:n},t(),J}Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=n(a),s=r(17),u=n(s),l=r(24),d=n(l),f=r(15),c=n(f),h=r(136),g=n(h),p=r(135),v=n(p),m=r(72),y=n(m),_=r(5),E=n(_),T=r(10),b=n(T),S=r(123),R=n(S),A=r(35),w=n(A),I=r(30),O=n(I),D=r(16),P=n(D),C=r(13),M=n(C),L=r(11),k=n(L),x=r(105),N=n(x),F=r(12),U=n(F),B=r(1),j=n(B);i.__dashjs_factory_name="StreamProcessor",t.default=j.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,r){var i=function(n,i){t.resolved=!0,t.resolvedContent=n?n:null,a.trigger(p.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:r,error:n||i?null:new o.default(y,"Failed loading Xlink element: "+e)})};if(e===n)i(null,!0);else{var u=new f.default(e,l.HTTPRequest.XLINK_TYPE);s.load({request:u,success:function(e){i(e)},error:function(){i(null)}})}}function r(){s&&(s.abort(),s=null)}var n="urn:mpeg:dash:resolve-to-zero:2013",i=this.context,a=(0,h.default)(i).getInstance(),s=(0,u.default)(i).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),d=void 0;return d={load:t,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=n(a),s=r(23),u=n(s),l=r(6),d=r(77),f=n(d),c=r(3),h=n(c),g=r(2),p=n(g),v=r(1),m=n(v),y=1;i.__dashjs_factory_name="XlinkLoader";var _=m.default.getClassFactory(i);_.XLINK_LOADER_ERROR_LOADING_FAILURE=y,t.default=_,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){p.invalidateSelectedIndexes(e.entry)}function t(){p=(0,o.default)(f).create(),m=(0,u.default)(f).create(),h.on(y.default.SERVICE_LOCATION_BLACKLIST_CHANGED,e,l)}function r(e){e.baseURLTreeModel&&(p=e.baseURLTreeModel),e.baseURLSelector&&(m=e.baseURLSelector)}function n(e){p.update(e),m.chooseSelectorFromManifest(e)}function i(e){var t=p.getForPath(e),r=t.reduce(function(e,t){var r=m.select(t);return r?(g.isRelative(r.url)?e.url=g.resolve(r.url,e.url):(e.url=r.url,e.serviceLocation=r.serviceLocation),e):new c.default},new c.default);if(!g.isRelative(r.url))return r}function a(){p.reset(),m.reset()}function s(e){n(e)}var l=void 0,f=this.context,h=(0,v.default)(f).getInstance(),g=(0,d.default)(f).getInstance(),p=void 0,m=void 0;return l={reset:a,initialize:s,resolve:i,setConfig:r},t(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=r(158),o=n(a),s=r(184),u=n(s),l=r(26),d=n(l),f=r(61),c=n(f),h=r(1),g=n(h),p=r(3),v=n(p),m=r(2),y=n(m);i.__dashjs_factory_name="BaseURLController",t.default=g.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){return!!(o.length&&e&&e.length)&&o.indexOf(e)!==-1}function r(e){o.indexOf(e)===-1&&(o.push(e),s.trigger(l,{entry:e}))}function n(e){e.error&&r(e.request.serviceLocation)}function i(){d&&s.on(d,n,this)}function a(){o=[]}var o=[],s=(0,u.default)(this.context).getInstance(),l=e.updateEventName,d=e.loadFailedEventName;return i(),{add:r,contains:t,reset:a}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(3),u=n(s);i.__dashjs_factory_name="BlackListController",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){D=!1,E={},T={},b={},S=null,R=100,A=R/1e3,O=(0,o.default)(v).getInstance()}function t(){null!==S&&D&&(clearInterval(S),S=null,D=!1)}function r(){m("Start Event Controller"),D||isNaN(R)||(D=!0,S=setInterval(s,R))}function n(e){if(E={},e)for(var t=0;t<e.length;t++){var r=e[t];E[r.id]=r,m("Add inline event with id "+r.id)}m("Added "+e.length+" inline events")}function i(e){for(var t=0;t<e.length;t++){var r=e[t];r.id in T?m("Repeated event with id "+r.id):(T[r.id]=r,m("Add inband event with id "+r.id))}}function a(){if(b)for(var e=O.getTime(),t=Object.keys(b),r=0;r<t.length;r++){var n=t[r],i=b[n];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(m("Remove Event "+n+" at time "+e),i=null,delete b[n])}}function s(){l(T),l(E),a()}function u(){var e=w.getValue(),t=e.url;e.hasOwnProperty("Location")&&(t=e.Location),m("Refresh manifest @ "+t),I.getManifestLoader().load(t)}function l(e){var t,r=O.getTime();if(e)for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],o=e[a];void 0!==o&&(t=o.presentationTime/o.eventStream.timescale,(0===t||t<=r&&t+A>r)&&(m("Start Event "+a+" at "+r),o.duration>0&&(b[a]=o),o.eventStream.schemeIdUri==g&&o.eventStream.value==p?u():y.trigger(o.eventStream.schemeIdUri,{event:o}),delete e[a]))}}function f(e){e&&(e.manifestModel&&(w=e.manifestModel),e.manifestUpdater&&(I=e.manifestUpdater))}function h(){t(),E=null,T=null,b=null,O=null}var g="urn:mpeg:dash:event:2012",p=1,v=this.context,m=(0,d.default)(v).getInstance().log,y=(0,c.default)(v).getInstance(),_=void 0,E=void 0,T=void 0,b=void 0,S=void 0,R=void 0,A=void 0,w=void 0,I=void 0,O=void 0,D=void 0;return _={initialize:e,addInlineEvents:n,addInbandEvents:i,clear:t,start:r,setConfig:f,reset:h}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(9),o=n(a),s=r(1),u=n(s),l=r(4),d=n(l),f=r(3),c=n(f);i.__dashjs_factory_name="EventController",t.default=u.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){v={},c.on(p.default.FRAGMENT_LOADING_COMPLETED,o,g)}function t(e){var t=v[e];return t||(t=(0,l.default)(u).create({metricsModel:(0,f.default)(u).getInstance()}),v[e]=t),t}function r(e){return e&&e.type&&e.type===a.HTTPRequest.INIT_SEGMENT_TYPE}function n(){c.off(p.default.FRAGMENT_LOADING_COMPLETED,o,this);for(var e in v)v[e].reset();v={}}function i(e,t,r){var n=new s.default;return n.streamId=r,n.mediaInfo=t.mediaInfo,n.segmentType=t.type,n.start=t.startTime,n.duration=t.duration,n.end=n.start+n.duration,n.bytes=e,n.index=t.index,n.quality=t.quality,n}function o(e){if(v[e.request.mediaType]===e.sender){var t=e.sender.getScheduleController(),n=e.request,a=e.response,o=r(n),s=t.getStreamProcessor().getStreamInfo();if(!a||!s)return void d("No "+n.mediaType+" bytes to push or stream is inactive.");var u=i(a,n,s.id);c.trigger(o?p.default.INIT_FRAGMENT_LOADED:p.default.MEDIA_FRAGMENT_LOADED,{chunk:u,fragmentModel:e.sender})}}var u=this.context,d=(0,_.default)(u).getInstance().log,c=(0,h.default)(u).getInstance(),g=void 0,v=void 0;return g={getModel:t,isInitializationRequest:r,reset:n},e(),g}Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),o=r(192),s=n(o),u=r(32),l=n(u),d=r(10),f=n(d),c=r(3),h=n(c),g=r(2),p=n(g),v=r(1),m=n(v),y=r(4),_=n(y);i.__dashjs_factory_name="FragmentController",t.default=m.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return t?new MediaSource:e?new WebKitMediaSource:null}function t(e,t){var r=window.URL.createObjectURL(e);return t.setSource(r),r}function r(e){e.setSource(null)}function n(e,t){return e.duration!=t&&(e.duration=t),e.duration}function i(e){var t=e.sourceBuffers,r=t.length,n=0;if("open"===e.readyState){for(n;n<r;n++){if(t[n].updating)return;if(0===t[n].buffered.length)return}e.endOfStream()}}var a=void 0;return a={createMediaSource:e,attachMediaSource:t,detachMediaSource:r,setDuration:n,signalEndOfStream:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="MediaSourceController",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){be=!0,Ve=NaN,Ge=NaN,He={},Ke=[],Se=!1,Re=null,Ae=null,we=!0,Ie=!1,Oe=0,Pe=NaN}function r(e,t){ye=e,ke=t,Ce=(0,s.default)(se).getInstance(),Me=(0,h.default)(se).getInstance(),Le=(0,l.default)(se).getInstance(),xe=(0,B.default)(se).getInstance(),Ne=ke.getFragmentController(),Fe=ke.getBufferController(),_e=Ne.getModel(ye),_e.setScheduleController(this),Ee=ke.isDynamic(),je=ve.getScheduleWhilePaused(),Ue=(0,p.default)(se).create({dashMetrics:(0,A.default)(se).getInstance(),metricsModel:(0,T.default)(se).getInstance(),textSourceBuffer:(0,_.default)(se).getInstance()}),Be=(0,m.default)(se).create({adapter:(0,I.default)(se).getInstance(),sourceBufferController:(0,D.default)(se).getInstance(),textSourceBuffer:(0,_.default)(se).getInstance()}),ge.getIsTextTrack(ye)&&le.on(x.default.TIMED_TEXT_REQUESTED,q,this),le.on(x.default.QUALITY_CHANGE_REQUESTED,E,this),le.on(x.default.DATA_UPDATE_STARTED,U,this),le.on(x.default.DATA_UPDATE_COMPLETED,R,this),le.on(x.default.FRAGMENT_LOADING_COMPLETED,M,this),le.on(x.default.STREAM_COMPLETED,P,this),le.on(x.default.STREAM_INITIALIZED,w,this),le.on(x.default.BUFFER_LEVEL_STATE_CHANGED,H,this),le.on(x.default.BUFFER_CLEARED,j,this),le.on(x.default.BYTES_APPENDED,N,this),le.on(x.default.INIT_REQUESTED,g,this),le.on(x.default.QUOTA_EXCEEDED,V,this),le.on(x.default.BUFFER_LEVEL_STATE_CHANGED,H,this),le.on(x.default.PLAYBACK_SEEKING,z,this),le.on(x.default.PLAYBACK_STARTED,Y,this),le.on(x.default.PLAYBACK_RATE_CHANGED,W,this),le.on(x.default.PLAYBACK_TIME_UPDATED,k,this),le.on(x.default.URL_RESOLUTION_FAILED,K,this),le.on(x.default.FRAGMENT_LOADING_ABANDONED,F,this)}function n(){Te&&!Fe.getIsBufferingCompleted()&&(ae(),Se=!1,be?(be=!1,v(Te.quality)):c(0),ue("Schedule controller starting for "+ye))}function i(){Se||(Se=!0,clearTimeout(De),ue("Schedule controller stopping for "+ye))}function o(e,t){He[t]=He[t]||{};var r=Le.getTopQualityIndexFor(e,t);return He[t][e]!=r&&(ue("Top quality"+e+" index has changed from "+He[t][e]+" to "+r),He[t][e]=r,!0)}function u(){if(!(Se||Ie||!Fe||Ce.isPaused()&&!je)){d();var e=Ke.length>0;if(e||o(Te.mediaInfo.type,ke.getStreamInfo().id)||Ue.execute(ke,ye,xe.isVideoTrackPresent())){var t=function(){if(Te.quality!==Ve)Ve=Te.quality,Fe.switchInitData(ke.getStreamInfo().id,Te.quality);else{var e=Ke.shift();if(Ne.isInitializationRequest(e))v(e.quality);else{var t=Be.execute(ke,e);t?_e.executeRequest(t):(Ie=!1,c(500))}}};Ie=!0,e?t():(Le.getPlaybackQuality(ke),t())}else c(500)}}function d(){var e=1.5*Te.fragmentDuration,t=_e.getRequests({state:S.default.FRAGMENT_MODEL_EXECUTED,time:Ce.getTime()+e,threshold:0})[0];t&&Ke.indexOf(t)===-1&&!ge.getIsTextTrack(ye)&&(!Me.isCurrentTrack(t.mediaInfo)||ve.getFastSwitchEnabled()&&t.quality<Te.quality&&Fe.getBufferLevel()>=e&&Le.getAbandonmentStateFor(ye)!==l.default.ABANDON_LOAD?(y(t),ue("Reloading outdated fragment at index: ",t.index)):t.quality>Te.quality&&X(Ce.getTime()+Fe.getBufferLevel()))}function c(e){clearTimeout(De),De=setTimeout(u,e)}function g(e){e.sender.getStreamProcessor()===ke&&v(Te.quality)}function v(e){Ve=e;var t=ce.getInitRequest(ke,e);t&&(Ie=!0,_e.executeRequest(t))}function y(e){Ke.push(e)}function E(e){if(ye===e.mediaType&&ke.getStreamInfo().id===e.streamInfo.id){if(Te=ke.getRepresentationInfoForQuality(e.newQuality),null===Te||void 0===Te)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");ie(new Date,a.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ae()}}function b(e){var t=_e.getRequests({state:S.default.FRAGMENT_MODEL_EXECUTED,time:Ce.getTime(),threshold:0})[0];t&&Ce.getTime()>=t.startTime&&(t.quality!==Ge&&e&&le.trigger(x.default.QUALITY_CHANGE_RENDERED,{mediaType:ye,oldQuality:Ge,newQuality:t.quality}),Ge=t.quality)}function R(e){e.error||e.sender.getStreamProcessor()!==ke||(Te=ce.convertDataToTrack(fe.getValue(),e.currentRepresentation))}function w(e){e.error||ke.getStreamInfo().id!==e.streamInfo.id||(Te=ke.getCurrentRepresentationInfo(),Ee&&be&&(pe.setTimeSyncCompleted(!0),O()),Se&&n())}function O(){var e=(0,C.default)(se).getInstance().getLiveEdge(),t=Te.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,r=e-Ce.computeLiveDelay(Te.fragmentDuration,t),n=ce.getFragmentRequestForTime(ke,Te,r,{ignoreIsFinished:!0});Pe=Ce.getLiveStartTime(),(isNaN(Pe)||n.startTime>Pe)&&(Ce.setLiveStartTime(n.startTime),Pe=n.startTime);var i=he.getCurrentManifestUpdate(de.getMetricsFor("stream"));de.updateManifestUpdateInfo(i,{currentTime:Pe,presentationStartTime:e,latency:e-Pe,clientTimeOffset:pe.getClientTimeOffset()})}function P(e){e.fragmentModel===_e&&(i(),Ie=!1,ue("Stream is complete"))}function M(e){e.sender===_e&&(ge.getIsTextTrack(ye)&&(Ie=!1),e.error&&e.request.serviceLocation&&!Se&&(y(e.request),Ie=!1,c(0)))}function k(){b(!0)}function N(e){e.sender.getStreamProcessor()===ke&&(Ie=!1,c(0))}function F(e){e.streamProcessor===ke&&(y(e.request),Ie=!1,c(0))}function U(e){e.sender.getStreamProcessor()===ke&&i()}function j(e){e.sender.getStreamProcessor()===ke&&(_e.removeExecutedRequestsBeforeTime(e.to),e.hasEnoughSpaceToAppend&&Se&&n())}function H(e){e.sender.getStreamProcessor()!==ke||e.state!==f.default.BUFFER_EMPTY||Ce.isSeeking()||(ue("Buffer is empty! Stalling!"),ie(new Date,a.PlayListTrace.REBUFFERING_REASON))}function V(e){e.sender.getStreamProcessor()===ke&&i()}function K(){_e.abortRequests(),i()}function q(e){e.sender.getStreamProcessor()===ke&&v(e.index)}function Y(){!Se&&je||n()}function z(e){Pe=e.seekTime,J(0),Se&&n();var t=he.getCurrentManifestUpdate(de.getMetricsFor("stream")),r=Te.DVRWindow?Te.DVRWindow.end-Ce.getTime():NaN;de.updateManifestUpdateInfo(t,{latency:r})}function W(e){Ae&&(Ae.playbackspeed=e.playbackRate.toString())}function Q(){return Pe}function X(e){Pe=e}function $(){return _e}function J(e){Oe=e}function Z(){return Oe}function ee(){return ke}function te(){return Ue.getBufferTarget(ke,ye,xe.isVideoTrackPresent())}function re(e){Re=e}function ne(e,t){ie(e,t),Re=null}function ie(e,t){if(Re&&we===!1){var r=Ae.start,n=e.getTime()-r.getTime();Ae.duration=n,Ae.stopreason=t,Re.trace.push(Ae),we=!0}}function ae(){Re&&we===!0&&Te&&(we=!1,Ae=new a.PlayListTrace,Ae.representationid=Te.id,Ae.start=new Date,Ae.mstart=1e3*Ce.getTime(),Ae.playbackspeed=Ce.getPlaybackRate().toString())}function oe(){le.off(x.default.DATA_UPDATE_STARTED,U,this),le.off(x.default.DATA_UPDATE_COMPLETED,R,this),le.off(x.default.BUFFER_LEVEL_STATE_CHANGED,H,this),le.off(x.default.QUALITY_CHANGE_REQUESTED,E,this),le.off(x.default.FRAGMENT_LOADING_COMPLETED,M,this),le.off(x.default.STREAM_COMPLETED,P,this),le.off(x.default.STREAM_INITIALIZED,w,this),le.off(x.default.QUOTA_EXCEEDED,V,this),le.off(x.default.BYTES_APPENDED,N,this),le.off(x.default.BUFFER_CLEARED,j,this),le.off(x.default.INIT_REQUESTED,g,this),le.off(x.default.PLAYBACK_RATE_CHANGED,W,this),le.off(x.default.PLAYBACK_SEEKING,z,this),le.off(x.default.PLAYBACK_STARTED,Y,this),le.off(x.default.PLAYBACK_TIME_UPDATED,k,this),le.off(x.default.URL_RESOLUTION_FAILED,K,this),le.off(x.default.FRAGMENT_LOADING_ABANDONED,F,this),ge.getIsTextTrack(ye)&&le.off(x.default.TIMED_TEXT_REQUESTED,q,this),i(),b(!1),Ie=!1,Oe=0,Pe=NaN,Ce=null,Re=null}var se=this.context,ue=(0,G.default)(se).getInstance().log,le=(0,L.default)(se).getInstance(),de=e.metricsModel,fe=e.manifestModel,ce=e.adapter,he=e.dashMetrics,ge=e.dashManifestModel,pe=e.timelineConverter,ve=e.mediaPlayerModel,me=void 0,ye=void 0,_e=void 0,Ee=void 0,Te=void 0,be=void 0,Se=void 0,Re=void 0,Ae=void 0,we=void 0,Ie=void 0,Oe=void 0,De=void 0,Pe=void 0,Ce=void 0,Me=void 0,Le=void 0,ke=void 0,xe=void 0,Ne=void 0,Fe=void 0,Ue=void 0,Be=void 0,je=void 0,Ge=void 0,He=void 0,Ve=void 0,Ke=void 0;return me={initialize:r,getStreamProcessor:ee,getSeekTarget:Q,setSeekTarget:X,getFragmentModel:$,setTimeToLoadDelay:J,getTimeToLoadDelay:Z,replaceRequest:y,start:n,stop:i,reset:oe,setPlayList:re,getBufferTarget:te,finalisePlayList:ne},t(),me}Object.defineProperty(t,"__esModule",{value:!0});var a=r(78),o=r(9),s=n(o),u=r(14),l=n(u),d=r(17),f=n(d),c=r(15),h=n(c),g=r(182),p=n(g),v=r(183),m=n(v),y=r(16),_=n(y),E=r(10),T=n(E),b=r(32),S=n(b),R=r(11),A=n(R),w=r(21),I=n(w),O=r(30),D=n(O),P=r(52),C=n(P),M=r(3),L=n(M),k=r(2),x=n(k),N=r(1),F=n(N),U=r(24),B=n(U),j=r(4),G=n(j);i.__dashjs_factory_name="ScheduleController",t.default=F.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){E=!1,T=null,b=null,S=null,R=null,A=null,_=!1,p.on(u.default.DATA_UPDATE_COMPLETED,f,this),p.on(u.default.INIT_FRAGMENT_LOADED,c,this)}function r(e,t,r){S=e,s(t),R=r,A=R.getRepresentationController()}function n(e){try{b=v.createSourceBuffer(T,e),E||(b.hasOwnProperty("initialize")&&b.initialize(S,this),E=!0)}catch(e){m.mediaSourceError("Error creating "+S+" source buffer.")}return b}function i(){return b}function a(e){b=e}function s(e){T=e}function l(){return R}function d(e){p.off(u.default.DATA_UPDATE_COMPLETED,f,this),p.off(u.default.INIT_FRAGMENT_LOADED,c,this),e||(v.abort(T,b),v.removeSourceBuffer(T,b))}function f(e){e.sender.getStreamProcessor()===R&&p.trigger(u.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}function c(e){e.fragmentModel===R.getFragmentModel()&&e.chunk.bytes&&v.append(b,e.chunk)}function h(){return _}var g=this.context,p=(0,o.default)(g).getInstance(),v=e.sourceBufferController,m=e.errHandler,y=void 0,_=void 0,E=void 0,T=void 0,b=void 0,S=void 0,R=void 0,A=void 0;return y={initialize:r,createBuffer:n,getBuffer:i,setBuffer:a,getStreamProcessor:l,getIsBufferingCompleted:h,setMediaSource:s,reset:d},t(),y}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=n(a),s=r(2),u=n(s),l=r(1),d=n(l);i.__dashjs_factory_name="TextController",t.default=d.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){L=t,P=0,C=!1,M=!1,k={"urn:mpeg:dash:utc:http-head:2014":T,"urn:mpeg:dash:utc:http-xsdate:2014":E.bind(null,c),"urn:mpeg:dash:utc:http-iso:2014":E.bind(null,h),"urn:mpeg:dash:utc:direct:2014":_,"urn:mpeg:dash:utc:http-head:2012":T,"urn:mpeg:dash:utc:http-xsdate:2012":E.bind(null,c),"urn:mpeg:dash:utc:http-iso:2012":E.bind(null,h),"urn:mpeg:dash:utc:direct:2012":_,"urn:mpeg:dash:utc:http-ntp:2014":y,"urn:mpeg:dash:utc:ntp:2014":y,"urn:mpeg:dash:utc:sntp:2014":y},i()||(R(e),a(!0))}function t(e){e&&(e.metricsModel&&(x=e.metricsModel),e.dashMetrics&&(N=e.dashMetrics))}function r(){return l()}function n(e){C=e}function i(){return C}function a(e){M=e}function s(e){P=e}function l(){return P}function f(e){var t,r,n=60,i=60,a=1e3,o=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,s=o.exec(e);
return t=Date.UTC(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10),s[6]&&(parseInt(s[6],10)||0),s[7]&&parseFloat(s[7])*a||0),s[9]&&s[10]&&(r=parseInt(s[9],10)*i+parseInt(s[10],10),t+=("+"===s[8]?-1:1)*r*n*a),new Date(t).getTime()}function c(e){var t=Date.parse(e);return isNaN(t)&&(t=f(e)),t}function h(e){return Date.parse(e)}function m(e){return Date.parse(e)}function y(e,t,r){r()}function _(e,t,r){var n=c(e);return isNaN(n)?void r():void t(n)}function E(e,t,r,n,i){var a,o,s=!1,u=new XMLHttpRequest,l=i?"HEAD":"GET",d=t.match(/\S+/g);t=d.shift(),a=function(){s||(s=!0,d.length?E(e,d.join(" "),r,n,i):n())},o=function(){var t,n;200===u.status&&(t=i?u.getResponseHeader("Date"):u.response,n=e(t),isNaN(n)||(r(n),s=!0))},u.open(l,t),u.timeout=v||0,u.onload=o,u.onloadend=a,u.send()}function T(e,t,r){E(m,e,t,r,!0)}function b(){var e=x.getReadOnlyMetricsFor("stream"),t=N.getLatestMPDRequestHeaderValueByID(e,"Date"),r=null!==t?new Date(t).getTime():Number.NaN;isNaN(r)?S(!0):(s(r-(new Date).getTime()),S(!1,r/1e3,P))}function S(e,t,r){n(!1),O.trigger(d.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:r,error:e?new o.default(p):null})}function R(e,t){var r=t||0,i=e[r],a=function(e,t){var r=!e||!t;r&&L?b():S(r,e,t)};n(!0),i?k.hasOwnProperty(i.schemeIdUri)?k[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),r=e-t;s(r),I("Local time:      "+new Date(t)),I("Server time:     "+new Date(e)),I("Difference (ms): "+r),a(e,r)},function(){R(e,r+1)}):R(e,r+1):(s(0),a())}function A(){a(!1),n(!1)}var w=this.context,I=(0,g.default)(w).getInstance().log,O=(0,u.default)(w).getInstance(),D=void 0,P=void 0,C=void 0,M=void 0,L=void 0,k=void 0,x=void 0,N=void 0;return D={initialize:e,getOffsetToDeviceTimeMs:r,setConfig:t,reset:A}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=n(a),s=r(3),u=n(s),l=r(2),d=n(l),f=r(1),c=n(f),h=r(4),g=n(h),p=1,v=5e3;i.__dashjs_factory_name="TimeSyncController";var m=c.default.getSingletonFactory(i);m.TIME_SYNC_FAILED_ERROR_CODE=p,m.HTTP_TIMEOUT_MS=v,t.default=m,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){w.on(d.default.XLINK_ELEMENT_LOADED,l,O),L=(0,o.default)(A).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}function r(e){D=e}function n(e){P=e}function i(e){var t;M=new g.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:D}),C=e,t=c(C.Period_asArray,C,_,m),s(t,_,m)}function a(){w.off(d.default.XLINK_ELEMENT_LOADED,l,O),L&&(L.reset(),L=null)}function s(e,t,r){var n,i,a,o={};for(o.elements=e,o.type=t,o.resolveType=r,0===o.elements.length&&f(o),a=0;a<o.elements.length;a++)n=o.elements[a],i=I.isHTTPURL(n.url)?n.url:n.originalContent.BaseURL+n.url,L.load(i,n,o)}function l(e){var t,r,n,i="<response>",a="</response>",o="";t=e.element,r=e.resolveObject,t.resolvedContent&&(n=t.resolvedContent.indexOf(">")+1,o=t.resolvedContent.substr(0,n)+i+t.resolvedContent.substr(n)+a,t.resolvedContent=M.xml_str2json(o)),S(r)&&f(r)}function f(e){var t,r,n=[];if(h(e),e.resolveType===y&&w.trigger(d.default.XLINK_READY,{manifest:C}),e.resolveType===m)switch(e.type){case _:for(t=0;t<C[_+"_asArray"].length;t++)r=C[_+"_asArray"][t],r.hasOwnProperty(E+"_asArray")&&(n=n.concat(c(r[E+"_asArray"],r,E,m))),r.hasOwnProperty(T+"_asArray")&&(n=n.concat(c(r[T+"_asArray"],r,T,m)));s(n,E,m);break;case E:w.trigger(d.default.XLINK_READY,{manifest:C})}}function c(e,t,r,n){var i,a,o,s=[];for(a=e.length-1;a>=0;a--)i=e[a],i.hasOwnProperty("xlink:href")&&i["xlink:href"]===b&&e.splice(a,1);for(a=0;a<e.length;a++)i=e[a],i.hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===n&&(o=p(i["xlink:href"],t,r,a,n,i),s.push(o));return s}function h(e){var t,r,n,i,a,o,s=[];for(i=e.elements.length-1;i>=0;i--){if(t=e.elements[i],r=t.type+"_asArray",!t.resolvedContent||R())delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],s.push(t.originalContent);else if(t.resolvedContent)for(a=0;a<t.resolvedContent[r].length;a++)n=t.resolvedContent[r][a],s.push(n);for(t.parentElement[r].splice(t.index,1),o=0;o<s.length;o++)t.parentElement[r].splice(t.index+o,0,s[o]);s=[]}e.elements.length>0&&P.run(C)}function p(e,t,r,n,i,a){return{url:e,parentElement:t,type:r,index:n,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}function S(e){var t,r;for(t=0;t<e.elements.length;t++)if(r=e.elements[t],r.resolved===!1)return!1;return!0}function R(){return!1}var A=this.context,w=(0,u.default)(A).getInstance(),I=(0,v.default)(A).getInstance(),O=void 0,D=void 0,P=void 0,C=void 0,M=void 0,L=void 0;return O={resolveManifestOnLoad:i,setMatchers:r,setIron:n,reset:a},t(),O}Object.defineProperty(t,"__esModule",{value:!0});var a=r(129),o=n(a),s=r(3),u=n(s),l=r(2),d=n(l),f=r(1),c=n(f),h=r(39),g=n(h),p=r(26),v=n(p),m="onLoad",y="onActuate",_="Period",E="AdaptationSet",T="EventStream",b="urn:mpeg:dash:resolve-to-zero:2013";i.__dashjs_factory_name="XlinkController",t.default=c.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return a=(0,o.default)(n).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel}),(0,d.default)(n).create(e)}function t(){return(0,g.default)(n).getInstance()}function r(){return(0,c.default)(n).getInstance()}var n=this.context,i=void 0,a=void 0;return i={createMetricsReporting:e,getReportingFactory:t,getMetricsHandlerFactory:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(150),o=n(a),s=r(31),u=n(s),l=r(140),d=n(l),f=r(65),c=n(f),h=r(66),g=n(h),p=r(1),v=n(p);i.__dashjs_factory_name="MetricsReporting";var m=v.default.getClassFactory(i);m.events=u.default,t.default=m,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){if(!t.error){var r=Object.keys(i),n=(0,u.default)(a).getInstance({dashManifestModel:e.dashManifestModel}).getMetrics(t.manifest);n.forEach(function(t){var n=JSON.stringify(t);if(i.hasOwnProperty(n))r.splice(n,1);else try{var s=(0,o.default)(a).create(e);s.initialize(t),i[n]=s}catch(e){}}),r.forEach(function(e){i[e].reset(),delete i[e]}),s.trigger(c.default.METRICS_INITIALISATION_COMPLETE)}}function r(){Object.keys(i).forEach(function(e){i[e].reset()}),i={}}function n(){s.on(g.default.MANIFEST_UPDATED,t),s.on(g.default.STREAM_TEARDOWN_COMPLETE,r)}var i={},a=this.context,s=e.eventBus;return n(),{}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(141),o=n(a),s=r(151),u=n(s),l=r(1),d=n(l),f=r(31),c=n(f),h=r(2),g=n(h);i.__dashjs_factory_name="MetricsCollectionController",t.default=d.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){try{a=(0,u.default)(s).create({mediaElement:e.mediaElement}),a.initialize(t.Range),i=(0,d.default)(s).create({log:e.log}),i.initialize(t.Reporting,a),n=(0,c.default)(s).create({log:e.log,eventBus:e.eventBus}),n.initialize(t.metrics,i)}catch(e){throw r(),e}}function r(){n&&n.reset(),i&&i.reset(),a&&a.reset()}var n=void 0,i=void 0,a=void 0,o=void 0,s=this.context;return o={initialize:t,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(143),u=n(s),l=r(144),d=n(l),f=r(142),c=n(f);i.__dashjs_factory_name="MetricsController",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){i.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}function r(e,r){e.split(",").forEach(function(e,t,n){var a;if(e.indexOf("(")!==-1&&e.indexOf(")")===-1){var o=n[t+1];o&&o.indexOf("(")===-1&&o.indexOf(")")!==-1&&(e+=","+o,delete n[t+1])}a=l.create(e,r),a&&i.push(a)}),u.on(d.default.METRIC_ADDED,t,a),u.on(d.default.METRIC_UPDATED,t,a)}function n(){u.off(d.default.METRIC_ADDED,t,a),u.off(d.default.METRIC_UPDATED,t,a),i.forEach(function(e){return e.reset()}),i=[]}var i=[],a=void 0,s=this.context,u=e.eventBus,l=(0,o.default)(s).getInstance({log:e.log,eventBus:e.eventBus});return a={initialize:r,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(65),o=n(a),s=r(1),u=n(s),l=r(22),d=n(l);i.__dashjs_factory_name="MetricsHandlersController",t.default=u.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,r=t+e.duration;l.add(t,r)}),a=!!e[0]._useWallClockTime)}function r(){l.clear()}function n(){l=(0,u.default)(o).create()}function i(){var e,t=l.length;if(!t)return!0;e=a?(new Date).getTime()/1e3:d.currentTime;for(var r=0;r<t;r+=1){var n=l.start(r),i=l.end(r);if(n<=e&&e<i)return!0}return!1}var a=!1,o=this.context,s=void 0,l=void 0,d=e.mediaElement;return s={initialize:t,reset:r,isEnabled:i},n(),s}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(75),u=n(s);i.__dashjs_factory_name="RangeController",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){e.some(function(e){var r=o.create(e,t);if(r)return i.push(r),!0})}function r(){i.forEach(function(e){return e.reset()}),i=[]}function n(e,t){i.forEach(function(r){return r.report(e,t)})}var i=[],a=void 0,o=(0,u.default)(this.context).getInstance({log:e.log});return a={initialize:t,reset:r,report:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(66),u=n(s);i.__dashjs_factory_name="ReportingController",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){try{return Object.keys(g).map(function(e){return g[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}function t(){var t=e();t&&f!==t.t&&(f=t.t,o.report(l,t))}function r(e,r,n){r&&(s=h.validateN(n),o=r,l=h.reconstructFullMetricName(e,n),d=setInterval(t,s))}function n(){clearInterval(d),d=null,s=0,o=null,f=null}function i(e,t,r){"BufferLevel"===e&&(g[r]=t)}var a=void 0,o=void 0,s=void 0,l=void 0,d=void 0,f=void 0,c=this.context,h=(0,u.default)(c).getInstance(),g=[];return a={initialize:r,reset:n,handleNewMetric:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(67),u=n(s);i.__dashjs_factory_name="BufferLevelHandler",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){s.off(u.default.METRICS_INITIALISATION_COMPLETE,t,this),s.trigger(u.default.BECAME_REPORTING_PLAYER)}function r(e,r){r&&(o=r,s.on(u.default.METRICS_INITIALISATION_COMPLETE,t,this))}function n(){o=null}function i(e,t){"DVBErrors"===e&&o&&o.report(e,t)}var a=void 0,o=void 0,s=e.eventBus;return a={initialize:r,reset:n,handleNewMetric:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(31),u=n(s);t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){i=e,a=t}function t(){a=null,i=void 0}function r(e,t){e===i&&a&&a.report(i,t)}var n=void 0,i=void 0,a=void 0;return n={initialize:e,reset:t,handleNewMetric:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="GenericMetricHandler",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){var e=f;e.length&&a&&a.report(l,e),f=[]}function t(t,r,n,i){r&&(o=c.validateN(n),a=r,i&&i.length&&(s=i),l=c.reconstructFullMetricName(t,n,i),d=setInterval(e,o))}function r(){clearInterval(d),d=null,o=null,s=null,f=[],a=null}function n(e,t){"HttpList"===e&&(s&&s!==t.type||f.push(t))}var i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,d=void 0,f=[],c=(0,u.default)(this.context).getInstance();return i={initialize:t,reset:r,handleNewMetric:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(67),u=n(s);i.__dashjs_factory_name="HttpListHandler",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t,r){var n=new XMLHttpRequest,i=function(){var e=v.indexOf(n);e!==-1&&(v.splice(e,1),n.status>=200&&n.status<300?t&&t():r&&r())};v.push(n);try{n.open("GET",e),n.onloadend=i,n.onerror=i,n.send()}catch(e){n.onerror()}}function t(t,r){Array.isArray(r)||(r=[r]),f&&g.isEnabled()&&r.forEach(function(r){var n=o.serialise(r);l&&"DVBErrors"!==t&&(n="metricname="+t+"&"+n),n=h+"?"+n,e(n,null,function(){f=!1})})}function r(e,t){var r;if(g=t,h=e["dvb:reportingUrl"],!h)throw new Error("required parameter missing (dvb:reportingUrl)");c||(r=e["dvb:probability"]||e["dvb:priority"]||0,r&&(1e3===r||r/1e3>=s.random())&&(f=!0),c=!0)}function n(){p||(v.forEach(function(e){return e.abort()}),v=[]),c=!1,f=!1,h=null,g=null}var i=void 0,a=this.context,o=(0,u.default)(a).getInstance(),s=(0,d.default)(a).getInstance(),l=!0,f=!1,c=!1,h=null,g=null,p=!0,v=[];return i={report:t,initialize:r,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(152),u=n(s),l=r(153),d=n(l);i.__dashjs_factory_name="DVBReporting",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=new o.default;if(m){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.mpdurl||(t.mpdurl=m.originalUrl||m.url),t.terror||(t.terror=new Date),v.addDVBErrors(t)}}function r(e){e.error||(m=e.manifest)}function n(e){t({errorcode:o.default.BASE_URL_CHANGED,servicelocation:e.entry})}function i(){t({errorcode:o.default.BECAME_REPORTER})}function a(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&t({errorcode:e.responsecode||o.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function s(e){switch(e.metric){case"HttpList":a(e.value)}}function l(e){var r,n=e.error?e.error.code:0;switch(n){case MediaError.MEDIA_ERR_NETWORK:r=o.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:r=o.default.CORRUPT_MEDIA_OTHER;break;default:return}t({errorcode:r})}function f(){p.on(u.default.MANIFEST_UPDATED,r,g),p.on(u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,n,g),p.on(d.default.METRIC_ADDED,s,g),p.on(d.default.METRIC_UPDATED,s,g),p.on(d.default.PLAYBACK_ERROR,l,g),p.on(c.default.BECAME_REPORTING_PLAYER,i,g)}function h(){p.off(u.default.MANIFEST_UPDATED,r,g),p.off(u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,n,g),p.off(d.default.METRIC_ADDED,s,g),p.off(d.default.METRIC_UPDATED,s,g),p.off(d.default.PLAYBACK_ERROR,l,g),p.off(c.default.BECAME_REPORTING_PLAYER,i,g)}var g=void 0,p=e.eventBus,v=e.metricsModel,m=void 0;return g={initialise:f,reset:h},f(),g}Object.defineProperty(t,"__esModule",{value:!0});var a=r(154),o=n(a),s=r(2),u=n(s),l=r(22),d=n(l),f=r(31),c=n(f),h=r(1),g=n(h);i.__dashjs_factory_name="DVBErrorsTranslator",t.default=g.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,r){var n,a,o=i.getMpd(e),s=0;return t?s=o.availabilityStartTime.getTime()/1e3:(n=this.getRegularPeriods(e,o),n.length&&(s=n[0].start)),a=s,r&&r.hasOwnProperty("starttime")&&(a+=r.starttime),a}function r(e){var r=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach(function(n){var a=new o.default,s=i.getIsDynamic(e);n.hasOwnProperty("metrics")&&(a.metrics=n.metrics,n.Range_asArray&&n.Range_asArray.forEach(function(r){var n=new u.default;n.starttime=t(e,s,r),r.hasOwnProperty("duration")?n.duration=r.duration:n.duration=i.getDuration(e),n._useWallClockTime=s,a.Range.push(n)}),n.Reporting_asArray&&(n.Reporting_asArray.forEach(function(e){var t=new d.default;if(e.hasOwnProperty("schemeIdUri")){t.schemeIdUri=e.schemeIdUri;for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);a.Reporting.push(t)}}),r.push(a)))}),r}var n=void 0,i=e.dashManifestModel;return n={getMetrics:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(155),o=n(a),s=r(156),u=n(s),l=r(157),d=n(l),f=r(1),c=n(f);i.__dashjs_factory_name="ManifestParsing",t.default=c.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(t){var r,n,i=[],a=[];for(r in t)if(t.hasOwnProperty(r)&&0!==r.indexOf("_")){if(n=t[r],void 0!==n&&null!==n||(n=""),Array.isArray(n)){if(!n.length)continue;a=[],n.forEach(function(t){var r="Object"!==Object.prototype.toString.call(t).slice(8,-1);a.push(r?t:e(t))}),n=a.map(encodeURIComponent).join(",")}else"string"==typeof n?n=encodeURIComponent(n):n instanceof Date?n=n.toISOString():"number"==typeof n&&(n=Math.round(n));i.push(r+"="+n)}return i.join("&")}return{serialise:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="MetricSerialiser",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){r&&(o||(o=new n(a)),r.getRandomValues(o),s=0)}function t(t,n){var a;return t||(t=0),n||(n=1),r?(s===o.length&&e(),a=o[s]/i,s+=1):a=Math.random(),a*(n-t)+t}var r=window.crypto||window.msCrypto,n=Uint32Array,i=Math.pow(2,8*n.BYTES_PER_ELEMENT)-1,a=10,o=void 0,s=void 0,u=void 0;return u={random:t},e(),u}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="RNG",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};n.SSL_CONNECTION_FAILED_PREFIX="SSL",n.DNS_RESOLUTION_FAILED="C00",n.HOST_UNREACHABLE="C01",n.CONNECTION_REFUSED="C02",n.CONNECTION_ERROR="C03",n.CORRUPT_MEDIA_ISOBMFF="M00",n.CORRUPT_MEDIA_OTHER="M01",n.BASE_URL_CHANGED="F00",n.BECAME_REPORTER="S00",t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.metrics="",this.Range=[],this.Reporting=[]};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.schemeIdUri="",this.value=""};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){function e(){f=new h}function t(e,t,r){var n=p.getBaseURLsFromElement(r);e[t]?v.areSimpleEquivalent(n,e[t].data.baseUrls)||(e[t].data.baseUrls=n,e[t].data.selectedIdx=c):e[t]=new h(n)}function r(e){var r=p.getBaseURLsFromElement(e);v.areSimpleEquivalent(r,f.data.baseUrls)||(f.data.baseUrls=r,f.data.selectedIdx=c),e.Period_asArray&&e.Period_asArray.forEach(function(e,r){t(f.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,n){t(f.children[r].children,n,e),e.Representation_asArray&&e.Representation_asArray.sort(p.getRepresentationSortFunction()).forEach(function(e,i){t(f.children[r].children[n].children,i,e)})})})}function n(e,t){var r=t||f;e(r.data),r.children&&r.children.forEach(function(t){return n(e,t)})}function i(e){n(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=c)})}function a(e){r(e)}function o(){f=new h}function u(e){var t=f,r=[t.data];return e.forEach(function(e){t=t.children[e],t&&r.push(t.data)}),r.filter(function(e){return e.baseUrls.length})}var d=void 0,f=void 0,g=this.context,p=(0,s.default)(g).getInstance(),v=(0,l.default)(g).getInstance();return d={reset:o,update:a,getForPath:u,invalidateSelectedIndexes:i},e(),d}Object.defineProperty(t,"__esModule",{value:!0});var o=r(13),s=n(o),u=r(188),l=n(u),d=r(1),f=n(d),c=NaN,h=function e(t,r){i(this,e),this.data={baseUrls:t||null,selectedIdx:r||c},this.children=[]};a.__dashjs_factory_name="BaseURLTreeModel",t.default=f.default.getClassFactory(a),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(27),u=n(s),l=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return a(t,e),t}(u.default),d=new l;t.default=d,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){D=S.getKeySystems(),P=[],k=!1,x="temporary",N="",u.default.extend(v.default.events)}function r(e,t,r){if(!k){var n;t||r||(n=A.getStreamsInfo(e)[0]),C=t||(n?A.getMediaInfoForType(e,n,"audio"):null),M=r||(n?A.getMediaInfoForType(e,n,"video"):null);var i=M?M:C,a=S.getSupportedKeySystemsFromContentProtection(i.contentProtection);a&&a.length>0&&_(a,!0),k=!0}}function n(e){var t=o.default.getPSSHForKeySystem(F,e);if(t){for(var r=R.getAllInitData(),n=0;n<r.length;n++)if(S.initDataEquals(t,r[n]))return void I("DRM: Ignoring initData because we have already seen it!");try{R.createKeySession(t,x)}catch(e){w.trigger(u.default.KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+e.message})}}else w.trigger(u.default.KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+F.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function i(e){R.loadKeySession(e)}function a(e){R.removeKeySession(e)}function s(e){R.closeKeySession(e)}function l(e){R.setServerCertificate(e)}function f(e){e?(R.setMediaElement(e),w.on(u.default.NEED_KEY,b,this),w.on(u.default.INTERNAL_KEY_MESSAGE,T,this)):null===e&&(R.setMediaElement(e),w.off(u.default.NEED_KEY,b,this),w.off(u.default.INTERNAL_KEY_MESSAGE,T,this))}function h(e){x=e}function g(e){N=e}function p(e){L=e}function m(){f(null),F=void 0,R&&(R.reset(),R=null)}function y(e){var t=null,r=e.systemString;return L&&(t=r in L?L[r]:null),t}function _(e,t){var r=this,i=[],a=[];M&&a.push(new d.default(M.codec,N)),C&&i.push(new d.default(C.codec,N));var o,s=new c.default(i,a,"optional","temporary"===x?"optional":"required",[x]),l=[];if(F){for(o=0;o<e.length;o++)if(F===e[o].ks){var f=function(){l.push({ks:e[o].ks,configs:[s]});var i=function i(a){w.off(u.default.KEY_SYSTEM_ACCESS_COMPLETE,i,r),a.error?t||w.trigger(u.default.KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+a.error}):(I("DRM: KeySystem Access Granted"),w.trigger(u.default.KEY_SYSTEM_SELECTED,{data:a.data}),n(e[o].initData))};return w.on(u.default.KEY_SYSTEM_ACCESS_COMPLETE,i,r),R.requestKeySystemAccess(l),"break"}();if("break"===f)break}}else if(void 0===F){F=null,P.push(e);for(var h=0;h<e.length;h++)l.push({ks:e[h].ks,configs:[s]});var g,p=function e(n){w.off(u.default.KEY_SYSTEM_ACCESS_COMPLETE,e,r),n.error?(F=void 0,w.off(u.default.INTERNAL_KEY_SYSTEM_SELECTED,v,r),t||w.trigger(u.default.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+n.error})):(g=n.data,I("DRM: KeySystem Access Granted ("+g.keySystem.systemString+")!  Selecting key system..."),R.selectKeySystem(g))},v=function e(i){if(w.off(u.default.INTERNAL_KEY_SYSTEM_SELECTED,e,r),w.off(u.default.KEY_SYSTEM_ACCESS_COMPLETE,p,r),i.error)F=void 0,t||w.trigger(u.default.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+i.error});else{F=R.getKeySystem(),w.trigger(u.default.KEY_SYSTEM_SELECTED,{data:g});for(var a=0;a<P.length;a++)for(o=0;o<P[a].length;o++)if(F===P[a][o].ks){n(P[a][o].initData);break}}};w.on(u.default.INTERNAL_KEY_SYSTEM_SELECTED,v,r),w.on(u.default.KEY_SYSTEM_ACCESS_COMPLETE,p,r),R.requestKeySystemAccess(l)}else P.push(e)}function E(e,t){w.trigger(u.default.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function T(e){if(I("DRM: onKeyMessage"),e.error)return void I(e.error);var t=e.data;w.trigger(u.default.KEY_MESSAGE,{data:t});var r=t.messageType?t.messageType:"license-request",n=t.message,i=t.sessionToken,a=y(F),s=F.systemString,l=S.getLicenseServer(F,a,r),d={sessionToken:i,messageType:r};if(!l)return I("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+i.getSessionID()),void E(d);if(S.isClearKey(F)){var f=S.processClearKeyLicenseRequest(a,n);if(f)return I("DRM: ClearKey license request handled by application!"),E(d),void R.updateKeySession(i,f)}var c=new XMLHttpRequest,h=null;if(a&&a.serverURL){var g=a.serverURL;"string"==typeof g&&""!==g?h=g:"object"==typeof g&&g.hasOwnProperty(r)&&(h=g[r])}else a&&a.laURL&&""!==a.laURL?h=a.laURL:(h=F.getLicenseServerURLFromInitData(o.default.getPSSHData(i.initData)),h||(h=e.data.laURL));if(h=l.getServerURLFromMessage(h,n,r),!h)return void E(d,"DRM: No license server URL specified!");c.open(l.getHTTPMethod(r),h,!0),c.responseType=l.getResponseType(s,r),c.onload=function(){200==this.status?(E(d),R.updateKeySession(i,l.getLicenseMessage(this.response,s,r))):E(d,"DRM: "+s+' update, XHR status is "'+this.statusText+'" ('+this.status+"), expected to be 200. readyState is "+this.readyState+".  Response is "+(this.response?l.getErrorResponse(this.response,s,r):"NONE"))},c.onabort=function(){E(d,"DRM: "+s+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},c.onerror=function(){E(d,"DRM: "+s+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var p=function(e){var t;if(e)for(t in e)"authorization"===t.toLowerCase()&&(c.withCredentials=!0),c.setRequestHeader(t,e[t])};a&&p(a.httpRequestHeaders),p(F.getRequestHeadersFromMessage(n)),a&&a.withCredentials&&(c.withCredentials=!0),c.send(F.getLicenseRequestFromMessage(n))}function b(e){if(I("DRM: onNeedKey"),"cenc"!==e.key.initDataType)return void I("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);var t=e.key.initData;ArrayBuffer.isView(t)&&(t=t.buffer),I("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(t)));var r=S.getSupportedKeySystems(t,L);return 0===r.length?void I("DRM: Received needkey event with initData, but we don't support any of the key systems!"):void _(r,!1)}var S=e.protectionKeyController,R=e.protectionModel,A=e.adapter,w=e.eventBus,I=e.log,O=void 0,D=void 0,P=void 0,C=void 0,M=void 0,L=void 0,k=void 0,x=void 0,N=void 0,F=void 0;return O={initialize:r,createKeySession:n,loadKeySession:i,removeKeySession:a,closeKeySession:s,setServerCertificate:l,setMediaElement:f,setSessionType:h,setRobustnessLevel:g,setProtectionData:p,reset:m},t(),O}Object.defineProperty(t,"__esModule",{value:!0});var a=r(25),o=n(a),s=r(2),u=n(s),l=r(171),d=n(l),f=r(48),c=n(f),h=r(1),g=n(h),p=r(68),v=n(p);i.__dashjs_factory_name="ProtectionController",t.default=g.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var r=null;if(e){for(var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<n.kids.length;a++){var s=n.kids[a],l=e.clearkeys.hasOwnProperty(s)?e.clearkeys[s]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+s+") is not known!");i.push(new o.default(s,l))}r=new u.default(i)}return r}function t(e){return d.default.parseInitDataFromContentProtection(e)}function r(){return null}function n(e){return new Uint8Array(e)}function i(){return null}var a=void 0;return a={uuid:h,schemeIdURI:p,systemString:g,getInitData:t,getRequestHeadersFromMessage:r,getLicenseRequestFromMessage:n,getLicenseServerURLFromInitData:i,getClearKeysFromProtectionData:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(70),o=n(a),s=r(69),u=n(s),l=r(25),d=n(l),f=r(1),c=n(f),h="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",g="org.w3.clearkey",p="urn:uuid:"+h;i.__dashjs_factory_name="KeySystemClearKey",t.default=c.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var t,r,n={},i=new DOMParser,a="utf16"===s?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,a),r=i.parseFromString(t,"application/xml");for(var o=r.getElementsByTagName("name"),u=r.getElementsByTagName("value"),l=0;l<o.length;l++)n[o[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return n.hasOwnProperty("Content")&&(n["Content-Type"]=n.Content,delete n.Content),n}function t(e){var t,r,n=null,i=new DOMParser,a="utf16"===s?new Uint16Array(e):new Uint8Array(e);if(t=String.fromCharCode.apply(null,a),r=i.parseFromString(t,"application/xml"),r.getElementsByTagName("Challenge")[0]){var o=r.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;o&&(n=c.default.decode(o))}return n}function r(e){if(e)for(var t=new DataView(e),r=t.getUint16(4,!0),n=6,i=new DOMParser,a=0;a<r;a++){var o=t.getUint16(n,!0);n+=2;var s=t.getUint16(n,!0);if(n+=2,1===o){var u=e.slice(n,n+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),d=i.parseFromString(l,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var f=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(f)return f}if(d.getElementsByTagName("LUI_URL")[0]){var c=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(c)return c}}else n+=s}return null}function n(e){var t,r,n,i,a,s=new Uint8Array([112,115,115,104,0,0,0,0]),u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=0,d=null;
if("pssh"in e)return o.default.parseInitDataFromContentProtection(e);if("pro"in e)d=c.default.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;d=c.default.decodeArray(e.prheader.__text)}return t=d.length,r=4+s.length+u.length+4+t,n=new ArrayBuffer(r),i=new Uint8Array(n),a=new DataView(n),a.setUint32(l,r),l+=4,i.set(s,l),l+=s.length,i.set(u,l),l+=u.length,a.setUint32(l,t),l+=4,i.set(d,l),l+=t,i.buffer}function i(e){if("utf8"!==e&&"utf16"!==e)throw new u.default("Illegal PlayReady message format! -- "+e);s=e}var a=void 0,s="utf16";return a={uuid:h,schemeIdURI:p,systemString:g,getInitData:n,getRequestHeadersFromMessage:e,getLicenseRequestFromMessage:t,getLicenseServerURLFromInitData:r,setPlayReadyMessageFormat:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(25),o=n(a),s=r(8),u=n(s),l=r(1),d=n(l),f=r(38),c=n(f),h="9a04f079-9840-4286-ab92-e65be0885f95",g="com.microsoft.playready",p="urn:uuid:"+h;i.__dashjs_factory_name="KeySystemPlayReady",t.default=d.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return o.default.parseInitDataFromContentProtection(e)}function t(){return null}function r(e){return new Uint8Array(e)}function n(){return null}var i=void 0;return i={uuid:l,schemeIdURI:f,systemString:d,getInitData:e,getRequestHeadersFromMessage:t,getLicenseRequestFromMessage:r,getLicenseServerURLFromInitData:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(25),o=n(a),s=r(1),u=n(s),l="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",d="com.widevine.alpha",f="urn:uuid:"+l;i.__dashjs_factory_name="KeySystemWidevine",t.default=u.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){P=null,C=null,k=[],x=[],M=(0,o.default)(A).getInstance(),L=(0,E.default)(A).getInstance(),F=b()}function r(){P&&R();for(var e=0;e<x.length;e++)p(x[e]);w.trigger(y.default.TEARDOWN_COMPLETE)}function n(){return C}function i(){for(var e=[],t=0;t<k.length;t++)e.push(k[t].initData);for(var t=0;t<x.length;t++)e.push(x[t].initData);return e}function a(e){var t=P;t||(t=document.createElement("video"));for(var r=!1,n=0;n<e.length;n++)for(var i=e[n].ks.systemString,a=e[n].configs,o=null,s=null,u=0;u<a.length;u++){var l=a[u].videoCapabilities;if(l&&0!==l.length){s=[];for(var d=0;d<l.length;d++)""!==t.canPlayType(l[d].contentType,i)&&s.push(l[d])}if(!(!o&&!s||o&&0===o.length||s&&0===s.length)){r=!0;var f=new g.default(o,s),c=M.getKeySystemBySystemString(i);w.trigger(y.default.KEY_SYSTEM_ACCESS_COMPLETE,{data:new v.default(c,f)});break}}r||w.trigger(y.default.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function s(e){C=e.keySystem,w.trigger(y.default.INTERNAL_KEY_SYSTEM_SELECTED)}function l(e){P!==e&&(P&&R(),P=e,P&&(P.addEventListener(O.keyerror,F),P.addEventListener(O.needkey,F),P.addEventListener(O.keymessage,F),P.addEventListener(O.keyadded,F),w.trigger(y.default.VIDEO_ELEMENT_SELECTED)))}function f(e){if(!C)throw new Error("Can not create sessions until you have selected a key system");if(N||0===x.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return k.push(t),P[O.generateKeyRequest](C.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")}function h(e,t){var r=e.sessionID;if(M.isClearKey(C))for(var n=0;n<t.keyPairs.length;n++)P[O.addKey](C.systemString,t.keyPairs[n].key,t.keyPairs[n].keyID,r);else P[O.addKey](C.systemString,new Uint8Array(t),e.initData,r)}function p(e){P[O.cancelKeyRequest](C.systemString,e.sessionID)}function m(){}function _(){}function T(){}function b(){return{handleEvent:function(e){var t=null;switch(e.type){case O.needkey:var r=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;w.trigger(y.default.NEED_KEY,{key:new u.default(r,"cenc")});break;case O.keyerror:if(t=S(x,e.sessionId),t||(t=S(k,e.sessionId)),t){var n="";switch(e.errorCode.code){case 1:n+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:n+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:n+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:n+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:n+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:n+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}n+="  System Code = "+e.systemCode,w.trigger(y.default.KEY_ERROR,{data:new d.default(t,n)})}else I("No session token found for key error");break;case O.keyadded:t=S(x,e.sessionId),t||(t=S(k,e.sessionId)),t?(I("DRM: Key added."),w.trigger(y.default.KEY_ADDED,{data:t})):I("No session token found for key added");break;case O.keymessage:if(N=null!==e.sessionId&&void 0!==e.sessionId,N?(t=S(x,e.sessionId),!t&&k.length>0&&(t=k.shift(),x.push(t),t.sessionID=e.sessionId)):k.length>0&&(t=k.shift(),x.push(t),0!==k.length&&L.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),t){var i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=i,w.trigger(y.default.INTERNAL_KEY_MESSAGE,{data:new c.default(t,i,e.defaultURL)})}else I("No session token found for key message")}}}}function S(e,t){if(t&&e){for(var r=e.length,n=0;n<r;n++)if(e[n].sessionID==t)return e[n];return null}return null}function R(){P.removeEventListener(O.keyerror,F),P.removeEventListener(O.needkey,F),P.removeEventListener(O.keymessage,F),P.removeEventListener(O.keyadded,F)}var A=this.context,w=e.eventBus,I=e.log,O=e.api,D=void 0,P=void 0,C=void 0,M=void 0,L=void 0,k=void 0,x=void 0,N=void 0,F=void 0;return D={getAllInitData:i,requestKeySystemAccess:a,getKeySystem:n,selectKeySystem:s,setMediaElement:l,createKeySession:f,updateKeySession:h,closeKeySession:p,setServerCertificate:m,loadKeySession:_,removeKeySession:T,reset:r},t(),D}Object.defineProperty(t,"__esModule",{value:!0});var a=r(34),o=n(a),s=r(49),u=n(s),l=r(45),d=n(l),f=r(46),c=n(f),h=r(48),g=n(h),p=r(47),v=n(p),m=r(2),y=n(m),_=r(12),E=n(_),T=r(1),b=n(T);i.__dashjs_factory_name="ProtectionModel_01b",t.default=b.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){w=null,I=null,O=null,D=[],C=(0,o.default)(M).getInstance(),P=b()}function r(){var e,t=D.length;if(0!==t)for(var r=function(e){S(e),0===D.length&&(I?(I.removeEventListener("encrypted",P),I.setMediaKeys(null).then(function(){L.trigger(v.default.TEARDOWN_COMPLETE)})):L.trigger(v.default.TEARDOWN_COMPLETE))},n=0;n<t;n++)e=D[n],function(t){e.session.closed.then(function(){r(t)}),T(e).catch(function(){r(t)})}(e);else L.trigger(v.default.TEARDOWN_COMPLETE)}function n(){return w}function i(){for(var e=[],t=0;t<D.length;t++)e.push(D[t].initData);return e}function a(e){E(e,0)}function s(e){e.mksa.createMediaKeys().then(function(t){w=e.keySystem,O=t,I&&I.setMediaKeys(O),L.trigger(v.default.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){L.trigger(v.default.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})}function l(e){I!==e&&(I&&(I.removeEventListener("encrypted",P),I.setMediaKeys(null)),I=e,I&&(I.addEventListener("encrypted",P),O&&I.setMediaKeys(O)))}function f(e){if(!w||!O)throw new Error("Can not set server certificate until you have selected a key system");O.setServerCertificate(e).then(function(){k("DRM: License server certificate successfully updated."),L.trigger(v.default.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){L.trigger(v.default.SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+e.name})})}function h(e,t){if(!w||!O)throw new Error("Can not create sessions until you have selected a key system");var r=O.createSession(t),n=R(r,e,t);r.generateRequest("cenc",e).then(function(){k("DRM: Session created.  SessionID = "+n.getSessionID()),L.trigger(v.default.KEY_SESSION_CREATED,{data:n})}).catch(function(e){S(n),L.trigger(v.default.KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+e.name})})}function p(e,t){var r=e.session;C.isClearKey(w)&&(t=t.toJWK()),r.update(t).catch(function(t){L.trigger(v.default.KEY_ERROR,{data:new d.default(e,"Error sending update() message! "+t.name)})})}function m(e){if(!w||!O)throw new Error("Can not load sessions until you have selected a key system");var t=O.createSession();t.load(e).then(function(r){if(r){var n=R(t);k("DRM: Session created.  SessionID = "+n.getSessionID()),L.trigger(v.default.KEY_SESSION_CREATED,{data:n})}else L.trigger(v.default.KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+e+")"})}).catch(function(t){L.trigger(v.default.KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+e+")! "+t.name})})}function y(e){var t=e.session;t.remove().then(function(){k("DRM: Session removed.  SessionID = "+e.getSessionID()),L.trigger(v.default.KEY_SESSION_REMOVED,{data:e.getSessionID()})},function(t){L.trigger(v.default.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})})}function _(e){T(e).catch(function(t){S(e),L.trigger(v.default.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})})}function E(e,t){!function(t){var r=e[t].ks,n=e[t].configs;navigator.requestMediaKeySystemAccess(r.systemString,n).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new g.default(r,t);n.mksa=e,L.trigger(v.default.KEY_SYSTEM_ACCESS_COMPLETE,{data:n})}).catch(function(){++t<e.length?E(e,t):L.trigger(v.default.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied!"})})}(t)}function T(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function b(){return{handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;L.trigger(v.default.NEED_KEY,{key:new u.default(t,e.initDataType)})}}}}}function S(e){for(var t=0;t<D.length;t++)if(D[t]===e){D.splice(t,1);break}}function R(e,t,r){var n={session:e,initData:t,handleEvent:function(e){switch(e.type){case"keystatuseschange":L.trigger(v.default.KEY_STATUSES_CHANGED,{data:this});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;L.trigger(v.default.INTERNAL_KEY_MESSAGE,{data:new c.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getSessionType:function(){return r}};return e.addEventListener("keystatuseschange",n),e.addEventListener("message",n),e.closed.then(function(){S(n),k("DRM: Session closed.  SessionID = "+n.getSessionID()),L.trigger(v.default.KEY_SESSION_CLOSED,{data:n.getSessionID()})}),D.push(n),n}var A,w,I,O,D,P,C,M=this.context,L=e.eventBus,k=e.log;return A={getAllInitData:i,requestKeySystemAccess:a,getKeySystem:n,selectKeySystem:s,setMediaElement:l,setServerCertificate:f,createKeySession:h,updateKeySession:p,loadKeySession:m,removeKeySession:y,closeKeySession:_,reset:r},t(),A}Object.defineProperty(t,"__esModule",{value:!0});var a=r(34),o=n(a),s=r(49),u=n(s),l=r(45),d=n(l),f=r(46),c=n(f),h=r(47),g=n(h),p=r(2),v=n(p),m=r(1),y=n(m);i.__dashjs_factory_name="ProtectionModel_21Jan2015",t.default=y.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){D=null,P=null,C=null,M=null,L=[],x=(0,o.default)(R).getInstance(),k=T()}function r(){try{for(var e=0;e<L.length;e++)p(L[e]);D&&D.removeEventListener(I.needkey,k),A.trigger(y.default.TEARDOWN_COMPLETE)}catch(e){A.trigger(y.default.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function n(){return P}function i(){for(var e=[],t=0;t<L.length;t++)e.push(L[t].initData);return e}function a(e){for(var t=!1,r=0;r<e.length;r++)for(var n=e[r].ks.systemString,i=e[r].configs,a=null,o=null,s=0;s<i.length;s++){var u=i[s].audioCapabilities,l=i[s].videoCapabilities;if(u&&0!==u.length){a=[];for(var d=0;d<u.length;d++)window[I.MediaKeys].isTypeSupported(n,u[d].contentType)&&a.push(u[d])}if(l&&0!==l.length){o=[];for(var f=0;f<l.length;f++)window[I.MediaKeys].isTypeSupported(n,l[f].contentType)&&o.push(l[f])}if(!(!a&&!o||a&&0===a.length||o&&0===o.length)){t=!0;var c=new g.default(a,o),h=x.getKeySystemBySystemString(n);A.trigger(y.default.KEY_SYSTEM_ACCESS_COMPLETE,{data:new v.default(h,c)});break}}t||A.trigger(y.default.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function s(e){try{C=e.mediaKeys=new window[I.MediaKeys](e.keySystem.systemString),P=e.keySystem,M=e,D&&b(),A.trigger(y.default.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){A.trigger(y.default.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+P.systemString+")! Could not create MediaKeys -- TODO"})}}function l(e){D!==e&&(D&&D.removeEventListener(I.needkey,k),D=e,D&&(D.addEventListener(I.needkey,k),C&&b()))}function f(e){if(!P||!C||!M)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(null!==M.ksConfiguration.videoCapabilities&&M.ksConfiguration.videoCapabilities.length>0&&(t=M.ksConfiguration.videoCapabilities[0]),null===t&&null!==M.ksConfiguration.audioCapabilities&&M.ksConfiguration.audioCapabilities.length>0&&(t=M.ksConfiguration.audioCapabilities[0]),null===t)throw new Error("Can not create sessions for unknown content types.");var r=t.contentType,n=C.createSession(r,new Uint8Array(e)),i=S(n,e);n.addEventListener(I.error,i),n.addEventListener(I.message,i),n.addEventListener(I.ready,i),n.addEventListener(I.close,i),L.push(i),w("DRM: Session created.  SessionID = "+i.getSessionID()),A.trigger(y.default.KEY_SESSION_CREATED,{data:i})}function h(e,t){var r=e.session;x.isClearKey(P)?r.update(new Uint8Array(t.toJWK())):r.update(new Uint8Array(t))}function p(e){var t=e.session;t.removeEventListener(I.error,e),t.removeEventListener(I.message,e),t.removeEventListener(I.ready,e),t.removeEventListener(I.close,e);for(var r=0;r<L.length;r++)if(L[r]===e){L.splice(r,1);break}t[I.release]()}function m(){}function _(){}function E(){}function T(){return{handleEvent:function(e){switch(e.type){case I.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;A.trigger(y.default.NEED_KEY,{key:new u.default(t,"cenc")})}}}}}function b(){var e=null,t=function(){D.removeEventListener("loadedmetadata",e),D[I.setMediaKeys](C),A.trigger(y.default.VIDEO_ELEMENT_SELECTED)};D.readyState>=1?t():(e=t.bind(this),D.addEventListener("loadedmetadata",e))}function S(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case I.error:var t="KeyError";A.trigger(y.default.KEY_ERROR,{data:new d.default(this,t)});break;case I.message:var r=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;A.trigger(y.default.INTERNAL_KEY_MESSAGE,{data:new c.default(this,r,e.destinationURL)});break;case I.ready:w("DRM: Key added."),A.trigger(y.default.KEY_ADDED);break;case I.close:w("DRM: Session closed.  SessionID = "+this.getSessionID()),A.trigger(y.default.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}var R=this.context,A=e.eventBus,w=e.log,I=e.api,O=void 0,D=void 0,P=void 0,C=void 0,M=void 0,L=void 0,k=void 0,x=void 0;return O={getAllInitData:i,requestKeySystemAccess:a,getKeySystem:n,selectKeySystem:s,setMediaElement:l,createKeySession:f,updateKeySession:h,closeKeySession:p,setServerCertificate:m,loadKeySession:_,removeKeySession:E,reset:r},t(),O}Object.defineProperty(t,"__esModule",{value:!0});var a=r(34),o=n(a),s=r(49),u=n(s),l=r(45),d=n(l),f=r(46),c=n(f),h=r(48),g=n(h),p=r(47),v=n(p),m=r(2),y=n(m),_=r(1),E=n(_);i.__dashjs_factory_name="ProtectionModel_3Feb2014",t.default=E.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var n=0;n<r.kids.length;n++)e+=r.kids[n]+"&";return e=e.substring(0,e.length-1)}function t(){return"GET"}function r(){return"json"}function n(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],r=0;r<e.keys.length;r++){var n=e.keys[r],i=n.kid.replace(/=/g,""),a=n.k.replace(/=/g,"");t.push(new o.default(i,a))}return new u.default(t)}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var a=void 0;return a={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:r,getLicenseMessage:n,getErrorResponse:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(70),o=n(a),s=r(69),u=n(s),l=r(1),d=n(l);i.__dashjs_factory_name="ClearKey",t.default=d.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return e}function t(){return"POST"}function r(e){return a[e].responseType}function n(e,t){return a[t].getLicenseMessage(e)}function i(e,t){return a[t].getErrorResponse(e)}var a={"com.widevine.alpha":{responseType:"json",getLicenseMessage:function(e){return u.default.decodeArray(e.license)},getErrorResponse:function(e){return e}},"com.microsoft.playready":{responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}},o=void 0;return o={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:r,getLicenseMessage:n,getErrorResponse:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(38),u=n(s);i.__dashjs_factory_name="DRMToday",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return e}function t(){return"POST"}function r(){return"arraybuffer"}function n(e){return e}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var a=void 0;return a={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:r,getLicenseMessage:n,getErrorResponse:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="PlayReady",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return e}function t(){return"POST"}function r(){return"arraybuffer"}function n(e){return e}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var a=void 0;return a={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:r,getLicenseMessage:n,getErrorResponse:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="Widevine",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,n){r(this,e),this.contentType=t,this.robustness=n};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var r=t.droppedVideoFrames-i;i=t.droppedVideoFrames;var o=t.totalVideoFrames-a;a=t.totalVideoFrames,n[e]?(n[e].droppedVideoFrames+=r,n[e].totalVideoFrames+=o):n[e]={droppedVideoFrames:r,totalVideoFrames:o}}function t(){return n}function r(e){n=[],i=e.droppedVideoFrames,a=e.totalVideoFrames}var n=[],i=0,a=0;return{push:e,getFrameHistory:t,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="DroppedFramesHistory";var s=o.default.getClassFactory(i);t.default=s,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){n[e.oldValue]||(n[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,r=t<0?1:0,a=r?-t:0,o=r?0:1;if(n[e.oldValue].drops+=r,n[e.oldValue].dropSize+=a,n[e.oldValue].noDrops+=o,i.push({idx:e.oldValue,noDrop:o,drop:r,dropSize:a}),i.length>s){var u=i.shift();n[u.idx].drops-=u.drop,n[u.idx].dropSize-=u.dropSize,n[u.idx].noDrops-=u.noDrop}}function t(){return n}function r(){n=[],i=[]}var n=[],i=[];return{push:e,getSwitchRequests:t,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=8;i.__dashjs_factory_name="SwitchRequestHistory";var u=o.default.getClassFactory(i);t.default=u,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){p={},m={},y=[],_=(0,u.default)(h).getInstance(),E=(0,d.default)(h).getInstance(),T=(0,c.default)(h).getInstance()}function t(e,t){p[e]=p[e]||{},p[e][t]=p[e][t]||{}}function r(e,t){y[e]=y[e]||[],y[e].push(t)}function n(e){var n=e.getMediaInfo(),a=n.type,u=e.getCurrentRequest(),d=(0,o.default)(h).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name});if(!isNaN(u.index)){t(a,u.index);var c=_.getStableBufferTime(),v=E.getCurrentBufferLevel(T.getReadOnlyMetricsFor(a));if(v>c)return d;var b=p[a][u.index];if(null===b||null===u.firstByteDate||m.hasOwnProperty(b.id))return d;if(void 0===b.firstByteTime&&(y[a]=[],b.firstByteTime=u.firstByteDate.getTime(),b.segmentDuration=u.duration,b.bytesTotal=u.bytesTotal,b.id=u.index),b.bytesLoaded=u.bytesLoaded,b.elapsedTime=(new Date).getTime()-b.firstByteTime,b.bytesLoaded>0&&b.elapsedTime>0&&r(a,Math.round(8*b.bytesLoaded/b.elapsedTime)),y[a].length>=f&&b.elapsedTime>l&&b.bytesLoaded<b.bytesTotal){var S=y[a].reduce(function(e,t){return e+t},0);if(b.measuredBandwidthInKbps=Math.round(S/y[a].length),b.estimatedTimeOfDownload=+(8*b.bytesTotal/b.measuredBandwidthInKbps/1e3).toFixed(2),b.estimatedTimeOfDownload<b.segmentDuration*s||0===e.getTrackInfo().quality)return d;if(!m.hasOwnProperty(b.id)){var R=e.getStreamProcessor().getABRController(),A=b.bytesTotal-b.bytesLoaded,w=R.getBitrateList(n),I=R.getQualityForBitrate(n,b.measuredBandwidthInKbps*_.getBandwidthSafetyFactor()),O=b.bytesTotal*w[I].bitrate/w[R.getQualityFor(a,n.streamInfo)].bitrate;A>O&&(d.value=I,d.reason.throughput=b.measuredBandwidthInKbps,d.reason.fragmentID=b.id,m[b.id]=b,g("AbandonRequestsRule ( ",a,"frag id",b.id,") is asking to abandon and switch to quality to ",I," measured bandwidth was",b.measuredBandwidthInKbps),delete p[a][b.id])}}else b.bytesLoaded===b.bytesTotal&&delete p[a][b.id]}return d}function a(){e()}var s=1.8,l=500,f=5,h=this.context,g=(0,v.default)(h).getInstance().log,p=void 0,m=void 0,y=void 0,_=void 0,E=void 0,T=void 0,b={shouldAbandon:n,reset:a};return e(),b}Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),o=n(a),s=r(5),u=n(s),l=r(11),d=n(l),f=r(10),c=n(f),h=r(1),g=n(h),p=r(4),v=n(p);i.__dashjs_factory_name="AbandonRequestsRule",t.default=g.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){y={},_=(0,u.default)(f).getInstance()}function r(e,t,r){y[e]={index:t,quality:r}}function n(e,t,r){var n=y[e];return!n||(t!==n.index||r<n.quality)}function a(e){var t=e.getMediaInfo(),a=t.type,s=v.getReadOnlyMetricsFor(a),u=e.getCurrentRequest(),c=(0,o.default)(f).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name});if(0===s.BolaState.length)return h("WARNING: executing BolaAbandonRule before initializing BolaRule"),y[a]=null,c;var m=s.BolaState[0]._s,_=u.index,E=u.quality;if(isNaN(_)||0===E||!n(a,_,E)||!u.firstByteDate)return c;var T=Date.now(),b=T-u.firstByteDate.getTime(),S=u.bytesLoaded,R=u.bytesTotal,A=R-S,w=u.duration,I=p.getCurrentBufferLevel(s)?p.getCurrentBufferLevel(s):0,O=I+m.placeholderBuffer,D=8*S/(.001*b),P=m.bandwidthSafetyFactor*D,C=.001*(u.firstByteDate.getTime()-u.requestStartDate.getTime());C<.001*d&&(C=.001*d);var M=C+8*R/P,L="";g.default.BOLA_DEBUG&&(L="index="+_+" quality="+E+" bytesLoaded/bytesTotal="+S+"/"+R+" bufferLevel="+I+" timeSince1stByte="+(b/1e3).toFixed(3)+" estThroughput="+(P/1e6).toFixed(3)+" latency="+C.toFixed(3));var k=R*m.bitrates[0]/m.bitrates[E],x=A-C*P/8;if(x<1&&(x=1),b<l||A<=k||I>m.bufferTarget||x<=k||M<=w)return c;var N=O-C;N<0&&(N=0);for(var F=0;F+1<E&&R*m.bitrates[F+1]/m.bitrates[E]<x;)++F;var U=E;if(m.state===g.default.BOLA_STATE_STARTUP){U=0;for(var B=0;B<=F&&(k=R*m.bitrates[B]/m.bitrates[E],!(8*k/w>P));++B)U=B}else for(var j=(m.Vp*(m.utilities[E]+m.gp)-N)/x,B=0;B<=F;++B){k=R*m.bitrates[B]/m.bitrates[E];var G=(m.Vp*(m.utilities[B]+m.gp)-N)/k;G>j&&(U=B,j=G)}var H=m.rebufferSafetyFactor*D*(I-C)/8;if(U===E&&x>H&&(U=F),U===E)return c;for(;U>0&&(k=R*m.bitrates[U]/m.bitrates[E],!(k<=H));)--U;var V=NaN;if(U>0){var K=m.utilities[U],q=m.utilities[U-1],G=m.bitrates[U],Y=m.bitrates[U-1];V=m.Vp*((G*q-Y*K)/(G-Y)+m.gp)}else{var K=m.utilities[0],q=m.utilities[1],G=m.bitrates[0],Y=m.bitrates[1];V=m.Vp*((G*q-Y*K)/(G-Y)+m.gp),V-=w}return O>V&&(m.placeholderBuffer=V-I,m.placeholderBuffer<0&&(m.placeholderBuffer=0)),m.lastQuality=U,v.updateBolaState(a,m),g.default.BOLA_DEBUG&&h("BolaDebug "+a+" BolaAbandonRule abandon to "+U+" - "+L),r(a,_,E),c.value=U,c.reason.state=m.state,c.reason.throughput=D,c.reason.bufferLevel=I,c.reason.bytesLoaded=u.bytesLoaded,c.reason.bytesTotal=u.bytesTotal,c.reason.elapsedTimeMs=b,c}function s(){y={}}var l=500,d=200,f=this.context,h=(0,c.default)(f).getInstance().log,p=e.dashMetrics,v=e.metricsModel,m=void 0,y=void 0,_=void 0;return m={shouldAbandon:a,reset:s},t(),m}Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),o=n(a),s=r(5),u=n(s),l=r(1),d=n(l),f=r(4),c=n(f),h=r(74),g=n(h);i.__dashjs_factory_name="BolaAbandonRule",t.default=d.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var a=e.getDroppedFramesHistory();if(a){for(var o=a.getFrameHistory(),s=0,l=0,d=u.default.NO_CHANGE,f=1;f<o.length;f++)if(o[f]&&(s=o[f].droppedVideoFrames,l=o[f].totalVideoFrames,l>i&&s/l>n)){d=f-1,r("DroppedFramesRule, index: "+d+" Dropped Frames: "+s+" Total Frames: "+l);break}return(0,u.default)(t).create(d,{droppedFrames:s})}return(0,u.default)(t).create()}var t=this.context,r=(0,d.default)(t).getInstance().log,n=.15,i=375;return{getMaxIndex:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(7),u=n(s),l=r(4),d=n(l);i.__dashjs_factory_name="DroppedFramesRule";var f=o.default.getClassFactory(i);t.default=f,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){p={},m=0,y=1e3,f.on(d.default.PLAYBACK_SEEKING,i,h)}function r(e){var t=(new Date).getTime(),r=e.getMediaInfo().type,i=c.getReadOnlyMetricsFor(r),a=i.BufferState.length>0?i.BufferState[i.BufferState.length-1]:null,u=(0,v.default)(s).create();return t-m<y||null===a?u:(n(r,a.state),a.state===o.default.BUFFER_EMPTY&&void 0!==p[r].firstBufferLoadedEvent&&(l("Switch to index 0; buffer is empty."),u.value=0,u.reason="InsufficientBufferRule: Buffer is empty"),m=t,u)}function n(e,t){p[e]=p[e]||{},p[e].state=t,t!==o.default.BUFFER_LOADED||p[e].firstBufferLoadedEvent||(p[e].firstBufferLoadedEvent=!0)}function i(){p={}}function a(){f.off(d.default.PLAYBACK_SEEKING,i,h),p={},m=0}var s=this.context,l=(0,g.default)(s).getInstance().log,f=(0,u.default)(s).getInstance(),c=e.metricsModel,h=void 0,p=void 0,m=void 0,y=void 0;return h={getMaxIndex:r,reset:a},t(),h}Object.defineProperty(t,"__esModule",{value:!0});var a=r(17),o=n(a),s=r(3),u=n(s),l=r(2),d=n(l),f=r(1),c=n(f),h=r(4),g=n(h),p=r(7),v=n(p);i.__dashjs_factory_name="InsufficientBufferRule",t.default=c.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){for(var a=e.getSwitchHistory(),o=a.getSwitchRequests(),s=0,u=0,l=0,f=(0,d.default)(t).create(),c=0;c<o.length;c++)if(void 0!==o[c]&&(s+=o[c].drops,u+=o[c].noDrops,l+=o[c].dropSize,s+u>=i&&s/u>n)){f.value=c>0?c-1:0,f.reason={index:f.value,drops:s,noDrops:u,dropSize:l},r("Switch history rule index: "+f.value+" samples: "+(s+u)+" drops: "+s);break}return f}var t=this.context,r=(0,u.default)(t).getInstance().log,n=.075,i=6;return{getMaxIndex:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(4),u=n(s),l=r(7),d=n(l);i.__dashjs_factory_name="SwitchRequest";var f=o.default.getClassFactory(i);t.default=f,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){D=[],P=[],C=(0,d.default)(A).getInstance()}function r(e,t){D[e]=D[e]||[],D[e].push(t)}function n(e,t){if(P[e]||(P[e]=[]),P[e].push(t),P[e].length>_)return P[e].shift()}function i(e){var t=void 0;return P[e]&&P[e].length>0&&(t=P[e].reduce(function(e,t){return e+t})/P[e].length),t}function a(e,t){var r=Math.min(D[e].length,t?v:y),n=D[e].slice(r*-1,D[e].length);return n.length>1&&n.reduce(function(e,t){return(e*R<=t||e>=t*S)&&r++,t}),r=Math.min(D[e].length,r),D[e].slice(r*-1,D[e].length)}function s(e,t){var r=a(e,t),n=0;if(r.length>0){var i=r.reduce(function(e,t){return e+t},0);n=i/r.length}return D[e].length>=g&&D[e].shift(),n/1e3*C.getBandwidthSafetyFactor()}function l(e,t,r){var n=!1;if(e<b&&(n=!0),!n)switch(r){case"video":n=t<E;break;case"audio":n=t<T}return n}function c(e){var t=e.getMediaInfo(),a=t.type,d=O.getReadOnlyMetricsFor(a),c=e.getStreamProcessor(),h=c.getABRController(),g=c.isDynamic(),p=I.getCurrentHttpRequest(d),v=d.BufferState.length>0?d.BufferState[d.BufferState.length-1]:null,y=e.hasRichBuffer(),_=(0,m.default)(A).create();if(!d||!p||p.type!==f.HTTPRequest.MEDIA_SEGMENT_TYPE||!v||y)return _;var E=void 0,T=void 0;if(p.trace&&p.trace.length){T=p.tresponse.getTime()-p.trequest.getTime()||1,E=p._tfinish.getTime()-p.tresponse.getTime()||1;var b=p.trace.reduce(function(e,t){return e+t.b[0]},0),S=Math.round(8*b/(E/1e3)),R=void 0,C=void 0;l(T,E,a)?D[a]&&P[a]?(R=s(a,g),C=i(a)):(R=S/1e3,C=T):(r(a,S),R=s(a,g),n(a,T),C=i(a,g)),h.setAverageThroughput(a,R),h.getAbandonmentStateFor(a)!==u.default.ABANDON_LOAD&&(v.state===o.default.BUFFER_LOADED||g)&&(_.value=h.getQualityForBitrate(t,R,C),c.getScheduleController().setTimeToLoadDelay(0),w("ThroughputRule requesting switch to index: ",_.value,"type: ",a,"Average throughput",Math.round(R),"kbps"),_.reason={throughput:R,latency:C})}return _}function h(){t()}var g=20,v=3,y=4,_=y,E=50,T=5,b=50,S=1.3,R=1.3,A=this.context,w=(0,p.default)(A).getInstance().log,I=e.dashMetrics,O=e.metricsModel,D=void 0,P=void 0,C=void 0,M={getMaxIndex:c,reset:h};return t(),M}Object.defineProperty(t,"__esModule",{value:!0});var a=r(17),o=n(a),s=r(14),u=n(s),l=r(5),d=n(l),f=r(6),c=r(1),h=n(c),g=r(4),p=n(g),v=r(7),m=n(v);i.__dashjs_factory_name="ThroughputRule",t.default=h.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t,r=0;return e&&e.some(function(e,t){return r=t,!n.contains(e.serviceLocation)})&&(t=e[r]),t}var r=void 0,n=e.blacklistController;return r={select:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="BasicSelector",t.default=o.default.getClassFactory(i),
e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=[],r=function(e){return!t.length||!e.dvb_priority||t.indexOf(e.dvb_priority)===-1},n=function(e){return!a.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)};return e.filter(n).filter(r)}function r(e){var t,r,n=function(e,t){var r=e.dvb_priority-t.dvb_priority;return isNaN(r)?0:r},i=function(e,t,r){return!t||r[0].dvb_priority&&e.dvb_priority&&r[0].dvb_priority===e.dvb_priority},a=0,o=[],s=0;if(r=e.sort(n).filter(i),r.length)return r.length>1&&(r.forEach(function(e){a+=e.dvb_weight,o.push(a)}),t=Math.floor(Math.random()*(a-1)),o.every(function(e,r){return s=r,!(t<e)})),r[s]}function n(e){return e&&r(t(e))}var i=void 0,a=e.blacklistController;return i={select:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="DVBSelector",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){d=(0,o.default)(i).getInstance(),f=(0,u.default)(i).getInstance()}function r(e,t,r){var i=a.getCurrentBufferLevel(s.getReadOnlyMetricsFor(t));return i<n(e,t,r)}function n(e,t,r){var n=NaN,i=e.getCurrentRepresentationInfo();if("fragmentedText"===t)n=l.getAllTracksAreDisabled()?0:i.fragmentDuration;else if("audio"===t&&r){var o=a.getCurrentBufferLevel(s.getReadOnlyMetricsFor("video"));n=Math.floor(Math.max(o,i.fragmentDuration))}else{var u=i.mediaInfo.streamInfo,f=e.getABRController();if(f.isPlayingAtTopQuality(u)){var c=u.manifestInfo.duration>=d.getLongFormContentDurationThreshold();n=c?d.getBufferTimeAtTopQualityLongForm():d.getBufferTimeAtTopQuality()}else n=d.getStableBufferTime()}return n}var i=this.context,a=e.dashMetrics,s=e.metricsModel,l=e.textSourceBuffer,d=void 0,f=void 0,c={execute:r,getBufferTarget:n};return t(),c}Object.defineProperty(t,"__esModule",{value:!0});var a=r(5),o=n(a),s=r(9),u=n(s),l=r(1),d=n(l);i.__dashjs_factory_name="BufferLevelRule",t.default=d.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){var r=e.getCurrentRepresentationInfo(),o=r.mediaInfo,u=o.type,l=e.getScheduleController(),d=l.getSeekTarget(),f=!isNaN(d),c=e.getBuffer(),h=f?d:i.getIndexHandlerTime(e);if(isNaN(h)||"fragmentedText"===u&&s.getAllTracksAreDisabled())return null;if(f&&l.setSeekTarget(NaN),c){var g=a.getBufferRange(e.getBuffer(),h);null!==g&&(n("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",h," was changed to ",g.end),h=g.end)}var p=void 0;return t?(h=t.startTime+t.duration/2,p=i.getFragmentRequestForTime(e,r,h,{timeThreshold:0,ignoreIsFinished:!0})):(p=i.getFragmentRequestForTime(e,r,h,{keepIdx:!f}),p&&e.getFragmentModel().isFragmentLoaded(p)&&(p=i.getNextFragmentRequest(e,r)),p&&(i.setIndexHandlerTime(e,p.startTime+p.duration),p.delayLoadingTime=(new Date).getTime()+l.getTimeToLoadDelay(),l.setTimeToLoadDelay(0))),p}var r=this.context,n=(0,o.default)(r).getInstance().log,i=e.adapter,a=e.sourceBufferController,s=e.textSourceBuffer,u={execute:t};return u}Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),o=n(a),s=r(1),u=n(s);i.__dashjs_factory_name="NextFragmentRequestRule",t.default=u.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){h=(0,c.default)(a).create({updateEventName:u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,loadFailedEventName:u.default.FRAGMENT_LOADING_COMPLETED}),p=(0,v.default)(a).create({blacklistController:h}),m=(0,g.default)(a).create({blacklistController:h}),y=p}function t(e){e.selector&&(y=e.selector)}function r(e){y=l.getIsDVB(e)?m:p}function n(e){var t=e.baseUrls,r=e.selectedIdx;if(!isNaN(r))return t[r];var n=y.select(t);return n?(e.selectedIdx=t.indexOf(n),n):void s.trigger(u.default.URL_RESOLUTION_FAILED,{error:new Error(_,E)})}function i(){h.reset()}var a=this.context,s=(0,o.default)(a).getInstance(),l=(0,d.default)(a).getInstance(),f=void 0,h=void 0,p=void 0,m=void 0,y=void 0;return f={chooseSelectorFromManifest:r,select:n,reset:i,setConfig:t},e(),f}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=n(a),s=r(2),u=n(s),l=r(13),d=n(l),f=r(131),c=n(f),h=r(181),g=n(h),p=r(180),v=n(p),m=r(1),y=n(m),_=1,E="Failed to resolve a valid URL";i.__dashjs_factory_name="BaseURLSelector";var T=y.default.getClassFactory(i);T.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=_,T.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=E,t.default=T,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){o=!1}function t(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function r(){return o}function n(e){o=e}function i(e,t){var r=e.canPlayType(t);return"probably"===r||"maybe"===r}var a=void 0,o=void 0;return a={supportsMediaSource:t,supportsEncryptedMedia:r,supportsCodec:i,setEncryptedMediaSupported:n},e(),a}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="Capabilities",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){return g}function r(e){g=e}function n(e,t){var r=!0,n=0,i=void 0,a=void 0;if(void 0===t&&(t=!1),e.tag>16777215?(h.getUint32(g)!==e.tag&&(r=!1),n=4):e.tag>65535?(i=h.getUint16(g),a=h.getUint8(g+2),256*i+a!==e.tag&&(r=!1),n=3):e.tag>255?(h.getUint16(g)!==e.tag&&(r=!1),n=2):(h.getUint8(g)!==e.tag&&(r=!1),n=1),!r&&e.required&&!t)throw new u.default("required tag not found");return r&&(g+=n),r}function i(e,t){var r=n(e,t);return r&&s(),r}function a(e){var t=void 0;return n(e),t=s(),c[e.parse](t)}function o(e,t){var r=n(e,t),i=void 0;return r&&(i=s(),g+=i),r}function s(e){var t=1,r=128,n=8,i=-1,a=0,o=h.getUint8(g),s=void 0;for(s=0;s<n;s+=1){if((o&r)===r){a=void 0===e?o&~r:o,i=s;break}r>>=1}for(s=0;s<i;s+=1,t+=1)a=a<<8|255&h.getUint8(g+t);return g+=t,a}function l(e){var t=void 0;switch(e){case 4:t=h.getFloat32(g),g+=4;break;case 8:t=h.getFloat64(g),g+=8}return t}function d(e){var t=0,r=void 0;for(r=0;r<e;r+=1)t<<=8,t|=255&h.getUint8(g+r);return g+=e,t}function f(){return g<h.byteLength}var c=void 0,h=new DataView(e.data),g=0;return c={getPos:t,setPos:r,consumeTag:n,consumeTagAndSize:i,parseTag:a,skipOverElement:o,getMatroskaCodedNum:s,getMatroskaFloat:l,getMatroskaUint:d,moreData:f}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(8),u=n(s);i.__dashjs_factory_name="EBMLParser",t.default=o.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return e&&d&&d.boxes&&0!==d.boxes.length?u(d.fetch(e)):null}function t(e){for(var t,r=d.fetchAll(e),n=[],i=0,a=r.length;i<a;i++)t=u(r[i]),t&&n.push(t);return n}function r(e){d=e}function n(){if(!d||!d.boxes||!d.boxes.length)return null;var e=d.boxes[d.boxes.length-1].type,r=t(e);return r[r.length-1]}function i(){return d._cursor.offset}function a(){f={offset:"_offset",size:"size",type:"type"},c={references:"references",timescale:"timescale",earliest_presentation_time:"earliest_presentation_time",first_offset:"first_offset"},h={reference_type:"reference_type",referenced_size:"referenced_size",subsegment_duration:"subsegment_duration"},g={id:"id",value:"value",timescale:"timescale",scheme_id_uri:"scheme_id_uri",presentation_time_delta:"presentation_time_delta",event_duration:"event_duration",message_data:"message_data"},p={timescale:"timescale"},v={sequence_number:"sequence_number"},m={samples_with_subsamples:"samples_with_subsamples"},y={base_data_offset:"base_data_offset",sample_description_index:"sample_description_index",default_sample_duration:"default_sample_duration",default_sample_size:"default_sample_size",default_sample_flags:"default_sample_flags",flags:"flags"},_={version:"version",baseMediaDecodeTime:"baseMediaDecodeTime",flags:"flags"},E={sample_count:"sample_count",first_sample_flags:"first_sample_flags",data_offset:"data_offset",flags:"flags",samples:"samples"},T={sample_size:"sample_size",sample_duration:"sample_duration",sample_composition_time_offset:"sample_composition_time_offset"}}function s(e,t,r){for(var n in r)t[n]=e[r[n]]}function u(e){if(!e)return null;var t,r,n=new o.default;switch(s(e,n,f),e.hasOwnProperty("_incomplete")&&(n.isComplete=!e._incomplete),n.type){case"sidx":if(s(e,n,c),n.references)for(t=0,r=n.references.length;t<r;t++)s(e.references[t],n.references[t],h);break;case"emsg":s(e,n,g);break;case"mdhd":s(e,n,p);break;case"mfhd":s(e,n,v);break;case"subs":s(e,n,m);break;case"tfhd":s(e,n,y);break;case"tfdt":s(e,n,_);break;case"trun":if(s(e,n,E),n.samples)for(t=0,r=n.samples.length;t<r;t++)s(e.samples[t],n.samples[t],T)}return n}var l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,g=void 0,p=void 0,v=void 0,m=void 0,y=void 0,_=void 0,E=void 0,T=void 0;return l={getBox:e,getBoxes:t,setData:r,getLastBox:n,getOffset:i},a(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=r(194),o=n(a),s=r(1),u=n(s);i.__dashjs_factory_name="IsoFile",t.default=u.default.getClassFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){return JSON.stringify(e)===JSON.stringify(t)}var t=void 0;return t={areSimpleEquivalent:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a);i.__dashjs_factory_name="ObjectUtils",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.videoModel&&(ne=e.videoModel)}function t(e){if(e.hasOwnProperty("begin")&&e.hasOwnProperty("end")){var t=g(e.begin),r=g(e.end);return[t,r]}return null}function r(){var e="cue_TTML_"+ae;return ae++,e}function n(e,t,r){function n(e,t){if(e.hasOwnProperty(t)){var r=e[t];a.indexOf(r)<0&&a.push(r)}}for(var i=[],a=[],o=[],s=0;s<e.length;s++){var u=e[s];n(u,"begin"),n(u,"end")}if(0===a.length)return o;if("undefined"!=typeof t&&"undefined"!=typeof r){for(var s=0;s<a.length;s++){var l=g(a[s]);t<l&&l<r&&i.push(l)}i.push(t),i.push(r)}else for(var s=0;s<a.length;s++)i.push(g(a[s]));i.sort(function(e,t){return e-t});for(var s=0;s<i.length-1;s++)o.push([i[s],i[s+1]]);return o}function i(e,t){return"undefined"!=typeof startInterval&&e<t&&(e=t),e}function a(e,t){return"undefined"!=typeof t&&e>t&&(e=t),e}function o(e,t,r){var n=g(e.begin),o=g(e.end);return n=i(n,t),o=a(o,r),"undefined"!=typeof t&&"undefined"!=typeof r&&(o<t||n>r)?(B("TTML: Cue "+n+"-"+o+" outside interval "+t+"-"+r),null):[n,o]}function s(e,r){var n=!0;if(e.hasOwnProperty("span")){var i=t(e.span);null!==i&&(n=i[0]<r[1]&&i[1]>r[0])}return n}function l(e,i,a,u){var l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,g=void 0,m="";if(H=ie.xml_str2json(e),!H)throw new Error("TTML document could not be parsed");if(ne.getTTMLRenderingDiv()&&(h="html"),l=H.tt,!l)throw new Error("TTML document lacks tt element");var y=p(l,"http://www.w3.org/ns/ttml");if(y&&v(l,y),c=l["tts:extent"],d=l.head,!d)throw new Error("TTML document lacks head element");d.layout&&(K=d.layout.region_asArray),d.styling&&(V=d.styling.style_asArray);var _={};if(u)for(g=0;g<u.length;g++){var S="urn:mpeg:14496-30:subs:"+(g+1).toString(),R="data:image/png;base64,"+btoa(u[g]);_[S]=R}if(d.metadata){var A=d.metadata.image_asArray;if(A)for(g=0;g<A.length;g++){var S="#"+A[g]["xml:id"],w=A[g].imagetype.toLowerCase(),R="data:image/"+w+";base64,"+A[g].__text;_[S]=R}}if(f=l.body,!f)throw new Error("TTML document lacks body element");var I=M(),C=ne.getElement().clientWidth,F=ne.getElement().clientHeight,U=[C/I[0],F/I[1]];Q["font-size"]=U[1]+"px;";var j=[];if(K)for(g=0;g<K.length;g++)j.push(D(JSON.parse(JSON.stringify(K[g])),U));var G=p(H.tt,"http://www.w3.org/ns/ttml#parameter");l.hasOwnProperty(G+":frameRate")&&(l.frameRate=parseInt(l[G+":frameRate"],10));for(var W=[],X=l.body_asArray[0].__children,$=0;$<X.length;$++){var J=X[$].div,Z=null;if(null===(Z=t(J))){var ee=J.p_asArray;if(null===Z&&(!ee||0===ee.length))return m="TTML has div that contains no timing and no paragraphs.",B(m),W;for(var te=0;te<ee.length;te++){var re=ee[te],ae=re.span_asArray,oe=[];if(re.hasOwnProperty("begin")&&re.hasOwnProperty("end")){var se=o(re,i,a);null!==se&&oe.push(se)}else oe=n(ae,i,a);if(0!==oe.length)for(var ue=re.__children,le=0;le<oe.length;le++){for(var de=oe[le],fe=[],ce=0;ce<ue.length;ce++){var he=ue[ce];s(he,de)&&fe.push(he)}if(0!==fe.length)if("html"===h){Y={},z={},q={};var ge=x(re,J,U),pe=N(re,U),ve=pe[1];pe=pe[0];var me=document.createElement("div");me.className=ve;var ye=k(fe,U);ye.className="cueDirUniWrapper",E("unicode-bidi",pe)&&(ye.style.cssText+=T("unicode-bidi",pe),b("unicode-bidi",pe)),E("direction",pe)&&(ye.style.cssText+=T("direction",pe),b("direction",pe)),E("padding-left",pe)&&E("padding-right",pe)&&(ye.innerHTML=L(ye,pe)),E("padding-left",pe)&&E("padding-right",pe)&&(b("padding-left",pe),b("padding-right",pe));var _e="";if(E("regionID",ge)){var Ee=T("regionID",ge);_e=Ee.slice(Ee.indexOf(":")+1,Ee.length-1)}pe&&(me.style.cssText=pe.join(" ")+"display:flex;"),ge&&(ge=ge.join(" ")),me.appendChild(ye);var Te=document.createElement("div");Te.appendChild(me),Te.id=r(),Te.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+ge,0===Object.keys(q).length&&(q.defaultFontSize="100"),W.push({start:de[0],end:de[1],type:"html",cueHTMLElement:Te,regions:j,regionID:_e,cueID:Te.id,videoHeight:F,videoWidth:C,cellResolution:I,fontSize:q||{defaultFontSize:"100"},lineHeight:Y,linePadding:z})}else{var be="",Se=fe;Se.length&&Se.forEach(function(e){if(e.hasOwnProperty("span")){var t=e.span.__children;t.forEach(function(e){t.hasOwnProperty("metadata")||(e.hasOwnProperty("#text")?be+=e["#text"].replace(/[\r\n]+/gm," ").trim():"br"in e&&(be+="\n"))})}else be+=e.hasOwnProperty("br")?"\n":e["#text"].replace(/[\r\n]+/gm," ").trim()}),W.push({start:de[0],end:de[1],data:be,type:"text"})}}else m="TTML: Empty paragraph"}}else{var Re=void 0;if(J.region){var Ae=P(K,J.region);Re=O(Ae,c)}Re||(Re=O(J,c));var we=J["smpte:backgroundImage"];void 0!==we&&void 0!==_[we]&&W.push({start:Z[0],end:Z[1],id:r(),data:_[we],type:"image",layout:Re})}}if(""!==m&&B(m),W.length>0)return W;throw new Error(m)}function h(){G=/^([0-9][0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/,q={},Y={},z={},W={top:"auto;",left:"auto;",width:"90%;",height:"10%;","align-items":"flex-start;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"},Q={color:"rgb(255,255,255);",direction:"ltr;","font-family":"monospace, sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"start;","justify-content":"flex-start;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;",width:"100%;"},X={monospace:"font-family: monospace;",sansSerif:"font-family: sans-serif;",serif:"font-family: serif;",monospaceSansSerif:"font-family: monospace, sans-serif;",monospaceSerif:"font-family: monospace, serif;",proportionalSansSerif:"font-family: Arial;",proportionalSerif:"font-family: Times New Roman;",default:"font-family: monospace, sans-serif;"},$={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]},J={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""},Z={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"},ee={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"},te={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"},re={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"},ie=new u.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,matchers:[]})}function g(e){var t,r,n,i=G.test(e);if(!i)return NaN;if(t=e.split(":"),r=parseFloat(t[0])*f+parseFloat(t[1])*c+parseFloat(t[2]),t[3]){if(n=H.tt.frameRate,!n||isNaN(n))return NaN;r+=parseFloat(t[3])/n}return r}function p(e,t){var r=Object.keys(e).filter(function(r){return("xmlns"===r.split(":")[0]||"xmlns"===r.split(":")[1])&&e[r]===t}).map(function(e){return e.split(":")[2]||e.split(":")[1]});return 1!=r.length?null:r[0]}function v(e,t){for(var r in e)if(e.hasOwnProperty(r)){if(("object"==typeof e[r]||e[r]instanceof Object)&&!Array.isArray(e[r]))v(e[r],t);else if(Array.isArray(e[r]))for(var n=0;n<e[r].length;n++)v(e[r][n],t);var i=t+":",a=r.indexOf(i);if(a>=0){var o=r.slice(a+i.length);e[o]=e[r],delete e[r]}}}function m(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function y(e){var t=e.slice(1),r=t.match(/.{2}/g),n=parseFloat(parseInt(parseInt(r[3],16)/255*1e3,10)/1e3),i=r.slice(0,3).map(function(e){return parseInt(e,16)});return"rgba("+i.join(",")+","+n+");"}function _(e){var t=void 0,r=void 0,n=void 0;return t=e.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),r=parseInt(t[t.length-1],10)/255,n="rgba("+t[0]+","+t[1]+","+t[2]+","+r+");"}function E(e,t){for(var r=0;r<t.length;r++)if(t[r].indexOf(e)>-1)return!0;return!1}function T(e,t){for(var r=0;r<t.length;r++)if(t[r].indexOf(e)>-1)return t[r];return null}function b(e,t){t.splice(t.indexOf(T(e,t)),1)}function S(e,t){for(var r=0;r<e.length;r++)for(var n=0;n<t.length;n++)e[r]&&e[r].split(":")[0].indexOf(t[n].split(":")[0])>-1&&e.splice(r,1);return e.concat(t)}function R(e){var t=new Array(2),r=e.indexOf(":")===-1?0:e.indexOf(":"),n=void 0;return e.indexOf("%")===-1?e.indexOf("c")===-1?e.indexOf("p")===-1?t[0]=t[1]=null:(t[0]="p",n=e.indexOf("p")):(t[0]="c",n=e.indexOf("c")):(t[0]="%",n=e.indexOf("%")),t[1]=e.slice(r,n),t}function A(e,t,r){var n,i,a=[];for(var o in e)if(e.hasOwnProperty(o)){var s=o.replace("ebutts:","");s=s.replace("xml:",""),s=s.replace("tts:",""),s=m(s),e[s]=e[o],delete e[o]}if("line-padding"in e){var u=parseFloat(e["line-padding"].slice(e["line-padding"].indexOf(":")+1,e["line-padding"].indexOf("c")));"id"in e&&(z[e.id]=u);var l=u*t[0]+"px;";a.push("padding-left:"+l),a.push("padding-right:"+l)}if("font-size"in e){var d=R(e["font-size"]),f=parseFloat(d[1]);"id"in e&&(q[e.id]=d),"%"===d[0]?n=f/100*t[1]+"px;":"c"===d[0]&&(n=f*t[1]+"px;"),a.push("font-size:"+n)}if("line-height"in e)if("normal"===e["line-height"])a.push("line-height: normal;");else{var c=R(e["line-height"]),h=parseFloat(c[1]);"id"in e&&(Y[e.id]=c),"%"===c[0]?i=h/100*t[1]+"px;":"c"===c[0]&&(i=h*t[1]+"px;"),a.push("line-height:"+i)}"font-family"in e&&(e["font-family"]in X?a.push(X[e["font-family"]]):a.push("font-family:"+e["font-family"]+";")),"text-align"in e&&e["text-align"]in $&&(a.push($[e["text-align"]][0]),a.push($[e["text-align"]][1])),"multi-row-align"in e&&(E("text-align",a)&&"auto"!=e["multi-row-align"]&&b("text-align",a),e["multi-row-align"]in J&&a.push(J[e["multi-row-align"]]));var g;return"background-color"in e&&(g=e["background-color"].indexOf("#")>-1&&e["background-color"].length-1===8?y(e["background-color"]):e["background-color"].indexOf("rgba")>-1?_(e["background-color"]):e["background-color"]+";",a.push("background-color: "+g)),"color"in e&&(g=e.color.indexOf("#")>-1&&e.color.length-1===8?y(e.color):e.color.indexOf("rgba")>-1?_(e.color):e.color+";",a.push("color: "+g)),"wrap-option"in e&&(e["wrap-option"]in Z?a.push(Z[e["wrap-option"]]):a.push("white-space:"+e["wrap-option"])),"unicode-bidi"in e&&(e["unicode-bidi"]in ee?a.push(ee[e["unicode-bidi"]]):a.push("unicode-bidi:"+e["unicode-bidi"])),"font-style"in e&&a.push("font-style:"+e["font-style"]+";"),"font-weight"in e&&a.push("font-weight:"+e["font-weight"]+";"),"direction"in e&&a.push("direction:"+e.direction+";"),"text-decoration"in e&&a.push("text-decoration:"+e["text-decoration"]+";"),r&&(a=a.concat(D(e,t))),H.tt.hasOwnProperty("xml:space")&&"preserve"===H.tt["xml:space"]&&a.push("white-space: pre;"),a}function w(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n["xml:id"]===t||n.id===t)return n}return null}function I(e,t,r){var n=[],i=e.match(/\S+/g);return i.forEach(function(e){var i=w(V,e);if(i){var a=A(JSON.parse(JSON.stringify(i)),t,r);n=n.concat(a)}}),n}function O(e,t){var r=/([\d\.]+)(%|px)\s+([\d\.]+)(%|px)/;if("tts:extent"in e&&"tts:origin"in e){var n=r.exec(e["tts:extent"]),i=r.exec(e["tts:origin"]);if(null===n||null===i)return B("Bad extent or origin: "+e["tts:extent"]+" "+e["tts:origin"]),null;var a=parseFloat(n[1]),o=parseFloat(n[3]),s=parseFloat(i[1]),u=parseFloat(i[3]);if(t){var l=r.exec(t);if(null===l||"px"!==l[2]||"px"!==l[4])return B("Bad tt.extent: "+t),null;var d=parseFloat(l[1]),f=parseFloat(l[3]);"px"===n[2]&&(a=a/d*100),"px"===n[4]&&(o=o/f*100),"px"===i[2]&&(s=s/d*100),"px"===i[4]&&(u=u/f*100)}return{left:s,top:u,width:a,height:o}}return null}function D(e,t){var r=[];for(var n in e){var i=n.replace("tts:","");i=i.replace("xml:",""),i=m(i),e[i]=e[n],i!==n&&delete e[n]}if("extent"in e){var a=e.extent.split(/\s/);r.push("width: "+a[0]+";"),r.push("height: "+a[1]+";")}if("origin"in e){var o=e.origin.split(/\s/);r.push("left: "+o[0]+";"),r.push("top: "+o[1]+";")}if("display-align"in e&&r.push(te[e["display-align"]]),"writing-mode"in e&&r.push(re[e["writing-mode"]]),"style"in e){var s=I(e.style,t,!0);r=r.concat(s)}return"padding"in e&&r.push("padding:"+e.padding+";"),"overflow"in e&&r.push("overflow:"+e.overflow+";"),"show-background"in e&&r.push("show-background:"+e["show-background"]+";"),"id"in e&&r.push("regionID:"+e.id+";"),r}function P(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n["xml:id"]===t||n.id===t)return n}return null}function C(e,t){var r=[],n=e.match(/\S+/g);return n.forEach(function(e){var n=P(K,e);if(n){var i=D(JSON.parse(JSON.stringify(n)),t);r=r.concat(i)}}),r}function M(){var e=[32,15];return H.tt.hasOwnProperty("ttp:cellResolution")?H.tt["ttp:cellResolution"].split(" ").map(parseFloat):e}function L(e,t){for(var r=T("padding-left",t),n=T("padding-right",t),i=r.concat(" "+n+" "),a="",o="",s="",u=Array.prototype.slice.call(e.children),l=e.getElementsByClassName("lineBreak")[0],d=u.indexOf(l),f=[];d!=-1;)f.push(d),d=u.indexOf(l,d+1);var c="</span>",h="<br>",g='<span class="spanPadding" style="-webkit-box-decoration-break: clone; box-decoration-break: clone; ';if(f.length)f.forEach(function(e,t){if(0===t){for(var r="",n=0;n<e;n++)a+=u[n].outerHTML,0===n&&(r=i.concat(u[n].style.cssText));a=g+r+'">'+a}for(var l="",d=e+1;d<u.length;d++)o+=u[d].outerHTML,d===u.length-1&&(l+=i.concat(u[d].style.cssText));o=g+l+'">'+o,a&&o&&t===f.length-1?s+=a+c+h+o+c:a&&o&&t!==f.length-1?s+=a+c+h+o+c+h:a&&!o?s+=a+c:!a&&o&&t===f.length-1?s+=o+c:!a&&o&&t!==f.length-1&&(s+=o+c+h)});else{for(var p="",v=0;v<u.length;v++)p+=u[v].style.cssText;s=g+i+p+'">'+e.innerHTML+c}return s}function k(e,t){var r=document.createElement("div");return e.forEach(function(e){if(!e.hasOwnProperty("metadata"))if(e.hasOwnProperty("span")){var n=e.span.__children,i=document.createElement("span");if(e.span.hasOwnProperty("style")){var a=I(e.span.style,t);i.className="spanPadding "+e.span.style,i.style.cssText=a.join(" ")}n.forEach(function(e){if(!n.hasOwnProperty("metadata"))if(e.hasOwnProperty("#text")){var t=document.createTextNode(e["#text"]);i.appendChild(t)}else if("br"in e){i.hasChildNodes()&&r.appendChild(i);var a=document.createElement("br");a.className="lineBreak",r.appendChild(a);var o=document.createElement("span");o.className=i.className,o.style.cssText=i.style.cssText,i=o}}),r.appendChild(i)}else if(e.hasOwnProperty("br")){var o=document.createElement("br");o.className="lineBreak",r.appendChild(o)}else if(e.hasOwnProperty("#text")){var s=document.createElement("span");s.textContent=e["#text"],r.appendChild(s)}}),r}function x(e,t,r){var n,i,a=[],o=e.region,s=t.region;return s&&(n=C(s,r)),o?(i=a.concat(C(o,r)),a=n?S(n,i):i):n&&(a=n),F(a,W),a}function N(e,t){var r,n,i,a=[],o=e.style,s=H.tt.body.style,u=H.tt.body.div.style,l="";return s&&(r=I(s,t),l="paragraph "+s),u&&(n=I(u,t),r?(n=S(r,n),l+=" "+u):l="paragraph "+u),o?(i=I(o,t),r&&n?(a=S(n,i),l+=" "+o):r?(a=S(r,i),l+=" "+o):n?(a=S(n,i),l+=" "+o):(a=i,l="paragraph "+o)):r&&!n?a=r:!r&&n&&(a=n),F(a,Q),[a,l]}function F(e,t){for(var r in t)t.hasOwnProperty(r)&&(E(r,e)||e.push(r+":"+t[r]))}var U=this.context,B=(0,d.default)(U).getInstance().log,j=void 0,G=void 0,H=void 0,V=void 0,K=void 0,q=void 0,Y=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,$=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,re=void 0,ne=void 0,ie=void 0,ae=0;return j={parse:l,setConfig:e},h(),j}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(39),u=n(s),l=r(4),d=n(l),f=3600,c=60;i.__dashjs_factory_name="TTMLParser",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){d=/(?:\r\n|\r|\n)/gm,f=/-->/,c=/(^[\s]+|[\s]+$)/g,h=/\s\b/g}function t(e){var t,i,o=[];e=e.split(d),t=e.length,i=-1;for(var u=0;u<t;u++){var l=e[u];if(l.length>0&&"WEBVTT"!==l&&l.match(f)){var h=n(l),g=h.cuePoints,p=h.styles,v=a(e,u+1),m=r(g[0].replace(c,"")),y=r(g[1].replace(c,""));!isNaN(m)&&!isNaN(y)&&m>=i&&y>m?""!==v?(i=m,o.push({start:m,end:y,data:v,styles:p})):s("Skipping cue due to empty/malformed cue text"):s("Skipping cue due to incorrect cue timing")}}return o}function r(e){var t=e.split(":"),r=t.length-1;return e=60*parseInt(t[r-1],10)+parseFloat(t[r]),2===r&&(e+=3600*parseInt(t[0],10)),e}function n(e){var t=e.split(f),r=t[1].split(h);return r.shift(),t[1]=r[0],r.shift(),{cuePoints:t,styles:i(r)}}function i(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var r=e.split(/:/)[1];r&&r.search(/%/)!=-1&&(r=parseInt(r.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=r),(e.match(/line/)||e.match(/L/))&&(t.line=r),(e.match(/position/)||e.match(/P/))&&(t.position=r),(e.match(/size/)||e.match(/S/))&&(t.size=r)}}),t}function a(e,t){for(var r,n=t,i="",a="";""!==e[n]&&n<e.length;)n++;if(r=n-t,r>1)for(var o=0;o<r;o++){if(a=e[t+o],a.match(f)){i="";break}i+=a,o!==r-1&&(i+="\n")}else a=e[t],a.match(f)||(i=a);return decodeURI(i)}var o=this.context,s=(0,u.default)(o).getInstance().log,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0;return l={parse:t},e(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),o=n(a),s=r(4),u=n(s);i.__dashjs_factory_name="VTTParser",t.default=o.default.getSingletonFactory(i),e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.qualityIndex=NaN};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0}},s=r(19),u=n(s),l=function(e){function t(e){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return a(t,e),t}(u.default);t.default=l,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.offset=NaN,this.type=null,this.size=NaN,this.isComplete=!0};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[],this.BolaState=[]};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isFirst=!0};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.video=null,this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0
});var n=function e(){r(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this._s=void 0};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.t=null,this.level=null};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(17),o=n(a),s=function e(){i(this,e),this.target=null,this.state=o.default.BUFFER_EMPTY};t.default=s,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.time=null,this.range=null,this.manifestInfo=null};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.time=null,this.droppedFrames=null};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[]},i=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},a=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};t.ManifestUpdate=n,t.ManifestUpdateStreamInfo=i,t.ManifestUpdateTrackInfo=a},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.loadingRequests=[],this.executedRequests=[]};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};t.default=n,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){r(this,e),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};t.default=n,e.exports=t.default},function(e,t,r){function n(e){function t(r,n,o){function s(e){var a=n[e],o=r[e];e in r?u[e]=t(o,a,e):i(a)?u[e]=t({},a,e):u[e]=a}if(Array.isArray(n)&&Array.isArray(r))return e(r,n,o);if(i(n)&&i(r)){var u=a({},r);return Object.keys(n).forEach(s),u}return e(r,n,o)}return t}function i(e){return"object"==typeof e&&null!==e}var a=r(227);e.exports=n},function(e,t,r){e.exports=r.p+"srplayer.swf"},function(e,t,r){e.exports=r.p+"style/liveplayer.css"},function(e,t){this.fitie=function(e){function t(){d.call(e,f+h,t);var o={boxSizing:"content-box",display:"inline-block",overflow:"hidden"};"backgroundColor backgroundImage borderColor borderStyle borderWidth bottom fontSize lineHeight height left opacity margin position right top visibility width".replace(/\w+/g,function(e){o[e]=u[e]}),s.border=s.margin=s.padding=0,s.display="block",s.height=s.width="auto",s.opacity=1;var l=e.videoWidth||e.width,g=e.videoHeight||e.height,p=l/g,v=document.createElement("object-fit");v.appendChild(e.parentNode.replaceChild(v,e));for(var m in o)v.runtimeStyle[m]=o[m];var y;"fill"===r?c?(s.width=n,s.height=i):(s["-ms-transform-origin"]="0% 0%",s["-ms-transform"]="scale("+n/l+","+i/g+")"):(p<a?"contain"===r:"cover"===r)?(y=i*p,s.width=Math.round(y)+"px",s.height=i+"px",s.marginLeft=Math.round((n-y)/2)+"px"):(y=n/p,s.width=n+"px",s.height=Math.round(y)+"px",s.marginTop=Math.round((i-y)/2)+"px")}var r=e.currentStyle["object-fit"];if(r&&/^(contain|cover|fill)$/.test(r)){var n=e.clientWidth,i=e.clientHeight,a=n/i,o=e.nodeName.toLowerCase(),s=e.runtimeStyle,u=e.currentStyle,l=e.addEventListener||e.attachEvent,d=e.removeEventListener||e.detachEvent,f=e.addEventListener?"":"on",c="img"===o,h=c?"load":"loadedmetadata";l.call(e,f+h,t),e.complete&&t()}}},function(e,t){!function(r){if("object"==typeof t&&"undefined"!=typeof e)e.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.Hls=r()}}(function(){var e;return function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[o]={exports:{}};t[o][0].call(d.exports,function(e){var r=t[o][1][e];return i(r?r:e)},d,d.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(r=this._events[e],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(o(r))for(a=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,u=0;u<n;u++)l[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(t,r,n){!function(t){var i=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,a=/^([^\/;?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,u={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),t=t.trim(),!t){if(!r.alwaysNormalize)return e;var n=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return n.path=u.normalizePath(n.path),u.buildURLFromParts(n)}var i=this.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=u.normalizePath(i.path),u.buildURLFromParts(i)):t;var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var s=a.exec(o.path);o.netLoc=s[1],o.path=s[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(l.netLoc=o.netLoc,"/"!==i.path[0]))if(i.path){var d=o.path,f=d.substring(0,d.lastIndexOf("/")+1)+i.path;l.path=u.normalizePath(f)}else l.path=o.path,i.params||(l.params=o.params,i.query||(l.query=o.query));return null===l.path&&(l.path=r.alwaysNormalize?u.normalizePath(i.path):i.path),u.buildURLFromParts(l)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};"object"==typeof n&&"object"==typeof r?r.exports=u:"function"==typeof e&&e.amd?e([],function(){return u}):"object"==typeof n?n.URLToolkit=u:t.URLToolkit=u}(this)},{}],3:[function(e,t,r){var n=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;t.exports=function(e,t){function r(e){v[e]=!0;for(var t in i[e][1]){var n=i[e][1][t];v[n]||r(n)}}for(var s,u=Object.keys(a),l=0,d=u.length;l<d;l++){var f=u[l],c=a[f].exports;if(c===e||c&&c.default===e){s=f;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},l=0,d=u.length;l<d;l++){var f=u[l];h[f]=f}i[s]=[Function(["require","module","exports"],"("+e+")(self)"),h]}var g=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[s]=s,i[g]=[Function(["require"],"var f = require("+o(s)+");(f.default ? f.default : f)(self);"),p];var v={};r(g);var m="("+n+")({"+Object.keys(v).map(function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"}).join(",")+"},{},["+o(g)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([m],{type:"text/javascript"});if(t&&t.bare)return _;var E=y.createObjectURL(_),T=new Worker(E);return T.objectURL=E,T}},{}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.hlsDefaultConfig=void 0;var i=e(5),a=n(i),o=e(8),s=n(o),u=e(9),l=n(u),d=e(10),f=n(d),c=e(58),h=n(c),g=e(7),p=n(g),v=e(6),m=n(v),y=e(50),_=n(y),E=e(16),T=n(E),b=e(15),S=n(b),R=e(14),A=n(R);r.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:h.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:a.default,bufferController:s.default,capLevelController:l.default,fpsController:f.default,audioStreamController:m.default,audioTrackController:p.default,subtitleStreamController:A.default,subtitleTrackController:S.default,timelineController:T.default,cueHandler:_.default,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{10:10,14:14,15:15,16:16,5:5,50:50,58:58,6:6,7:7,8:8,9:9}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),d=e(34),f=n(d),c=e(37),h=n(c),g=e(33),p=e(53),v=e(51),m=n(v),y=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FRAG_LOADING,l.default.FRAG_LOADED,l.default.FRAG_BUFFERED,l.default.ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.onCheck=r._abandonRulesCheck.bind(r),r}return o(t,e),s(t,[{key:"destroy",value:function(){this.clearTimer(),f.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var r=this.hls,n=e.frag.level,i=r.levels[n].details.live,a=r.config,o=void 0,s=void 0;i?(o=a.abrEwmaFastLive,s=a.abrEwmaSlowLive):(o=a.abrEwmaFastVoD,s=a.abrEwmaSlowVoD),this._bwEstimator=new m.default(r,s,o,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,n=r.loader,i=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return p.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var a=n.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var o=performance.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*r.duration/s){var u=e.levels,d=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),f=u[r.level],c=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,g=a.total?a.total:Math.max(a.loaded,Math.round(r.duration*c/8)),v=t.currentTime,m=(g-a.loaded)/d,y=(h.default.bufferInfo(t,v,e.config.maxBufferHole).end-v)/s;if(y<2*r.duration/s&&m>y){var _=void 0,E=void 0;for(E=r.level-1;E>i;E--){var T=u[E].realBitrate?Math.max(u[E].realBitrate,u[E].bitrate):u[E].bitrate;if(_=r.duration*T/(6.4*d),_<y)break}_<m&&(p.logger.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+_.toFixed(1)+"<"+m.toFixed(1)+":"+y.toFixed(1)),e.nextLoadLevel=E,this._bwEstimator.sample(o,a.loaded),n.abort(),this.clearTimer(),e.trigger(l.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:a}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,i=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}}},{key:"onFragBuffered",value:function(e){var t=e.stats,r=e.frag;if(!(t.aborted===!0||1!==r.loadCounter||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&t.tload!==t.tbuffered)){var n=t.tparsed-t.trequest;p.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"_findBestLevel",value:function(e,t,r,n,i,a,o,s,u){for(var l=i;l>=n;l--){var d=u[l],f=d.details,c=f?f.totalduration/f.fragments.length:t,h=!!f&&f.live,g=void 0;g=l<=e?o*r:s*r;var v=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,m=v*c/g;if(p.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(g)+"/"+v+"/"+c+"/"+a+"/"+m),g>v&&(!m||h||m<a))return l}return-1}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(e===-1||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return e!==-1&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,f=(h.default.bufferInfo(a,u,n.maxBufferHole).end-u)/l,c=this._findBestLevel(o,s,d,i,t,f,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(c>=0)return c;p.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var g=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,v=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===f){var y=this.bitrateTestDelay;if(y){var _=s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay;g=_-y,p.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),v=m=1}}return c=this._findBestLevel(o,s,d,i,t,f+g,v,m,r),Math.max(c,0)}}]),t}(f.default);r.default=y},{33:33,34:34,35:35,37:37,51:51,53:53}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(48),l=n(u),d=e(37),f=n(d),c=e(25),h=n(c),g=e(35),p=n(g),v=e(34),m=n(v),y=e(38),_=n(y),E=e(54),T=n(E),b=e(33),S=e(53),R={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},A=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,p.default.MEDIA_ATTACHED,p.default.MEDIA_DETACHING,p.default.AUDIO_TRACKS_UPDATED,p.default.AUDIO_TRACK_SWITCHING,p.default.AUDIO_TRACK_LOADED,p.default.KEY_LOADED,p.default.FRAG_LOADED,p.default.FRAG_PARSING_INIT_SEGMENT,p.default.FRAG_PARSING_DATA,p.default.FRAG_PARSED,p.default.ERROR,p.default.BUFFER_CREATED,p.default.BUFFER_APPENDED,p.default.BUFFER_FLUSHED,p.default.INIT_PTS_FOUND));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=R.STOPPED,r.ontick=r.tick.bind(r),r.initPTS=[],r.waitingFragment=null,r}return o(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),m.default.prototype.destroy.call(this),this.state=R.STOPPED}},{key:"onInitPtsFound",value:function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,S.logger.log("InitPTS for cc:"+r+" found from video track:"+n),this.state===R.WAITING_INIT_PTS&&(S.logger.log("sending pending audio frag to demuxer"),this.state=R.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null))}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&e===-1?(S.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=R.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=R.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=R.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=R.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,r,n=this.hls,i=n.config;switch(this.state){case R.ERROR:case R.PAUSED:case R.BUFFER_FLUSHING:break;case R.STARTING:this.state=R.WAITING_TRACK,this.loadedmetadata=!1;break;case R.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;e=this.loadedmetadata?this.media.currentTime:this.nextLoadPosition;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=f.default.bufferInfo(o,e,i.maxBufferHole),u=s.len,d=s.end,c=this.fragPrevious,h=i.maxMaxBufferLength,g=this.audioSwitch,v=this.trackId;if((u<h||g)&&v<a.length){if(r=a[v].details,"undefined"==typeof r){this.state=R.WAITING_TRACK;break}if(!g&&!r.live&&c&&c.sn===r.endSN&&(!this.media.seeking||this.media.duration-d<c.duration/2)){this.hls.trigger(p.default.BUFFER_EOS,{type:"audio"}),this.state=R.ENDED;break}var m=r.fragments,y=m.length,_=m[0].start,E=m[y-1].start+m[y-1].duration,T=void 0;if(g)if(r.live&&!r.PTSKnown)S.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),d=0;else if(d=e,r.PTSKnown&&e<_){if(!(s.end>_||s.nextStart))return;S.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=_+.05}if(r.initSegment&&!r.initSegment.data)T=r.initSegment;else if(d<=_){if(T=m[0],r.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var A=s.nextStart?s.nextStart:_;return S.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(A+.05)),void(this.media.currentTime=A+.05)}}else{var w=void 0,I=i.maxFragLookUpTolerance,O=c?m[c.sn-m[0].sn+1]:void 0,D=function(e){var t=Math.min(I,e.duration);return e.start+e.duration-t<=d?1:e.start-t>d&&e.start?-1:0};d<E?(d>E-I&&(I=0),w=O&&!D(O)?O:l.default.search(m,D)):w=m[y-1],w&&(T=w,_=w.start,c&&T.level===c.level&&T.sn===c.sn&&(T.sn<r.endSN?(T=m[T.sn+1-r.startSN],S.logger.log("SN just loaded, load next one: "+T.sn)):T=null))}if(T)if(T.decryptdata&&null!=T.decryptdata.uri&&null==T.decryptdata.key)S.logger.log("Loading key for "+T.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+v),this.state=R.KEY_LOADING,n.trigger(p.default.KEY_LOADING,{frag:T});else{if(S.logger.log("Loading "+T.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+v+", currentTime:"+e+",bufferEnd:"+d.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,T.loadCounter){T.loadCounter++;var P=i.fragLoadingLoopThreshold;if(T.loadCounter>P&&Math.abs(this.fragLoadIdx-T.loadIdx)<P)return void n.trigger(p.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:T})}else T.loadCounter=1;T.loadIdx=this.fragLoadIdx,this.fragCurrent=T,this.startFragRequested=!0,isNaN(T.sn)||(this.nextLoadPosition=T.start+T.duration),n.trigger(p.default.FRAG_LOADING,{frag:T}),this.state=R.FRAG_LOADING}}break;case R.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=R.IDLE);break;case R.FRAG_LOADING_WAITING_RETRY:var C=performance.now(),M=this.retryDate;o=this.media;var L=o&&o.seeking;(!M||C>=M||L)&&(S.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=R.IDLE);break;case R.WAITING_INIT_PTS:case R.STOPPED:case R.FRAG_LOADING:case R.PARSING:case R.PARSED:case R.ENDED:}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(S.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===R.ENDED&&(this.state=R.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){S.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.state=R.IDLE,this.fragCurrent=null,this.state=R.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=R.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,r=e.id,n=this.tracks[r],i=t.totalduration,a=0;if(S.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var o=n.details;o&&t.fragments.length>0?(_.default.mergeDetails(o,t),a=t.fragments[0].start,t.PTSKnown?S.logger.log("live audio playlist sliding:"+a.toFixed(3)):S.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,S.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,!this.startFragRequested){if(this.startPosition===-1){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(S.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===R.WAITING_TRACK&&(this.state=R.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===R.KEY_LOADING&&(this.state=R.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===R.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,a=i.totalduration,o=t.level,s=t.sn,u=t.cc,l=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",d=this.stats=e.stats;if("initSegment"===s)this.state=R.IDLE,d.tparsed=d.tbuffered=performance.now(),i.initSegment.data=e.payload,this.hls.trigger(p.default.FRAG_BUFFERED,{stats:d,frag:t,id:"audio"}),this.tick();else{this.state=R.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new h.default(this.hls,"audio"));var f=this.initPTS[u],c=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==f){this.pendingBuffering=!0,S.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o);var g=!1;this.demuxer.push(e.payload,c,l,null,t,a,g,f)}else S.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=e,this.state=R.WAITING_INIT_PTS}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===R.PARSING){var n=e.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec="mp4a.40.2",i.id=e.id,this.hls.trigger(p.default.BUFFER_CODECS,n),S.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");
var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(p.default.BUFFER_APPENDING,o))}this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&n.sn===r.sn&&n.level===r.level&&this.state===R.PARSING){var i=this.trackId,a=this.tracks[i],o=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),S.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),_.default.updateFragPTSDTS(a.details,r,e.startPTS,e.endPTS);var s=this.audioSwitch,u=this.media,l=!1;if(s&&u)if(u.readyState){var d=u.currentTime;S.logger.log("switching audio track : currentTime:"+d),d>=e.startPTS&&(S.logger.log("switching audio track : flushing all audio"),this.state=R.BUFFER_FLUSHING,o.trigger(p.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),l=!0,this.audioSwitch=!1,o.trigger(p.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(p.default.AUDIO_TRACK_SWITCHED,{id:i});var f=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&f.push({type:e.type,data:t,parent:"audio",content:"data"})}),!l&&f.length&&(f.forEach(function(e){t.state===R.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(p.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===R.PARSING&&(this.stats.tparsed=performance.now(),this.state=R.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent){var t=this.state;t!==R.PARSING&&t!==R.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==R.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),r.trigger(p.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;S.logger.log("audio buffered : "+T.default.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(p.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=R.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case b.ErrorDetails.FRAG_LOAD_ERROR:case b.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var n=this.config;if(r<=n.fragLoadingMaxRetry){this.fragLoadError=r,t.loadCounter=0;var i=Math.min(Math.pow(2,r-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);S.logger.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=R.FRAG_LOADING_WAITING_RETRY}else S.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=R.ERROR}break;case b.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case b.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case b.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case b.ErrorDetails.KEY_LOAD_ERROR:case b.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==R.ERROR&&(this.state=e.fatal?R.ERROR:R.IDLE,S.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case b.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===R.PARSING||this.state===R.PARSED)){var a=this.mediaBuffer,o=this.media.currentTime,s=a&&f.default.isBuffered(a,o)&&f.default.isBuffered(a,o+.5);if(s){var u=this.config;u.maxMaxBufferLength>=u.maxBufferLength&&(u.maxMaxBufferLength/=2,S.logger.warn("audio:reduce max buffer length to "+u.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*u.fragLoadingLoopThreshold),this.state=R.IDLE}else S.logger.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=R.BUFFER_FLUSHING,this.hls.trigger(p.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}}},{key:"onBufferFlushed",value:function(){var e=this,t=this.pendingData;t&&t.length?(S.logger.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(p.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=R.PARSED):(this.state=R.IDLE,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,S.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(m.default);r.default=A},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,53:53,54:54}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),d=e(34),f=n(d),c=e(53),h=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.AUDIO_TRACK_LOADED));return r.ticks=0,r.ontick=r.tick.bind(r),r}return o(t,e),s(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,r=e.audioTracks||[],n=!1;this.tracks=r,this.hls.trigger(l.default.AUDIO_TRACKS_UPDATED,{audioTracks:r});var i=0;r.forEach(function(e){return e.default?(t.audioTrack=i,void(n=!0)):void i++}),n===!1&&r.length&&(c.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(c.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,c.logger.log("switching to audioTrack "+e);var t=this.tracks[e],r=this.hls,n=t.type,i=t.url,a={id:e,type:n,url:i};r.trigger(l.default.AUDIO_TRACK_SWITCH,a),r.trigger(l.default.AUDIO_TRACK_SWITCHING,a);var o=t.details;!i||void 0!==o&&o.live!==!0||(c.logger.log("(re)loading playlist for audioTrack "+e),r.trigger(l.default.AUDIO_TRACK_LOADING,{url:i,id:e}))}}},{key:"updateTrack",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,c.logger.log("updating audioTrack "+e);var t=this.tracks[e],r=t.url,n=t.details;!r||void 0!==n&&n.live!==!0||(c.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(l.default.AUDIO_TRACK_LOADING,{url:r,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(f.default);r.default=h},{34:34,35:35,53:53}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),d=e(34),f=n(d),c=e(53),h=e(33),g=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return o(t,e),s(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio,i=Math.abs(n.timestampOffset-e.start);if(i>.1){var a=n.updating;try{n.abort()}catch(e){a=!0,c.logger.warn("can not abort audio buffer: "+e)}a?this.audioTimestampOffset=e.start:(c.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,r=e.video,n=0;e.altAudio&&(t||r)&&(n=(t?1:0)+(r?1:0),c.logger.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(r)}}},{key:"onMediaDetaching",value:function(){c.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){c.logger.log("media source opened"),this.hls.trigger(l.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){c.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){c.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce(function(e,r){return r.parent===t?e+1:e},0);this.hls.trigger(l.default.BUFFER_APPENDED,{parent:t,pending:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){c.logger.error("sourceBuffer error:",e),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var n in e)if(!t[n]){var i=e[n],a=i.levelCodec||i.codec,o=i.container+";codecs="+a;c.logger.log("creating sourceBuffer("+o+")");try{var s=t[n]=r.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[n]={codec:a,container:i.container},i.buffer=s}catch(e){c.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){c.logger.error("sourceBuffer error:",e.event),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,r=e.type;for(var n in t)r&&n!==r||t[n].ended||(t[n].ended=!0,c.logger.log(n+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var r in e){var n=e[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}c.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){c.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,r=this.sourceBuffer,n=this._levelDuration;if(null!==n&&e&&t&&r&&0!==e.readyState&&"open"===t.readyState){for(var i in r)if(r[i].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var a=e.duration;(n>this._msDuration&&n>a||a===1/0||isNaN(a))&&(c.logger.log("Updating mediasource duration to "+n.toFixed(3)),this._msDuration=t.duration=n)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){c.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(l.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var n=r.shift();try{var i=n.type,a=t[i];a?a.updating?r.unshift(n):(a.ended=!1,this.parent=n.parent,a.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){c.logger.error("error while trying to append buffer:"+t.message),r.unshift(n);var o={type:h.ErrorTypes.MEDIA_ERROR,parent:n.parent};if(22===t.code)return this.segments=[],o.details=h.ErrorDetails.BUFFER_FULL_ERROR,o.fatal=!1,void e.trigger(l.default.ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=h.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return c.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],o.fatal=!0,void e.trigger(l.default.ERROR,o);o.fatal=!1,e.trigger(l.default.ERROR,o)}}}}},{key:"flushBuffer",value:function(e,t,r){var n,i,a,o,s,u,l=this.sourceBuffer;if(Object.keys(l).length){if(c.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in l)if(!r||d===r){if(n=l[d],n.ended=!1,n.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<n.buffered.length;i++)if(a=n.buffered.start(i),o=n.buffered.end(i),navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&t===Number.POSITIVE_INFINITY?(s=e,u=t):(s=Math.max(a,e),u=Math.min(o,t)),Math.min(u,o)-s>.5)return this.flushBufferCounter++,c.logger.log("flush "+d+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+this.media.currentTime),n.remove(s,u),!1}catch(e){c.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else c.logger.warn("abort flushing too many retries");c.logger.log("buffer flushed")}return!0}}]),t}(f.default);r.default=g},{33:33,34:34,35:35,53:53}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),d=e(34),f=n(d),c=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FPS_DROP_LEVEL_CAPPING,l.default.MEDIA_ATTACHING,l.default.MANIFEST_PARSED))}return o(t,e),s(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:"getMaxLevel",value:function(e){var t=0,r=void 0,n=void 0,i=this.mediaWidth,a=this.mediaHeight,o=0,s=0;for(r=0;r<=e&&(n=this.levels[r],!this.isLevelRestricted(r))&&(t=r,o=n.width,s=n.height,!(i<=o||a<=s));r++);return t}},{key:"isLevelRestricted",value:function(e){return!(!this.restrictedLevels||this.restrictedLevels.indexOf(e)===-1)}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}},{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=this.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=this.contentScaleFactor),e}}]),t}(f.default);r.default=c},{34:34,35:35}],10:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),d=e(34),f=n(d),c=e(53),h=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING))}return o(t,e),s(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){var r=this.video=e.media instanceof HTMLVideoElement?e.media:null;"function"==typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}}},{key:"checkFPS",value:function(e,t,r){var n=performance.now();if(t){if(this.lastTime){var i=n-this.lastTime,a=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,u=this.hls;if(u.trigger(l.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:r}),s>0&&a>u.config.fpsDroppedMonitoringThreshold*o){var d=u.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=d)&&(d-=1,u.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,u.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}(f.default);r.default=h},{34:34,35:35,53:53}],11:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),d=e(34),f=n(d),c=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_METADATA));return r.id3Track=void 0,r.media=void 0,r}return o(t,e),s(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden")}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onFragParsingMetadata",value:function(e){var t=e.frag,r=e.samples,n=t.start,i=t.start+t.duration;n===i&&(i+=1e-4);for(var a=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,o=0;o<r.length;o++){var s=this.parseID3Frame(r[o].data),u=this.decodeID3Frame(s);if(u){var l=new a(n,i,"");l.value=u,this.id3Track.addCue(l)}}}},{key:"parseID3Frame",value:function(e){if(!(e.length<21)&&73===e[0]&&68===e[1]&&51===e[2]){var t=String.fromCharCode(e[10],e[11],e[12],e[13]);return e=e.subarray(20),{type:t,data:e}}}},{key:"decodeID3Frame",value:function(e){return"TXXX"===e.type?this.decodeTxxxFrame(e):"PRIV"===e.type?this.decodePrivFrame(e):"T"===e.type[0]?this.decodeTextFrame(e):void 0}},{key:"decodeTxxxFrame",value:function(e){if(!(e.size<2)&&3===e.data[0]){var t=1,r=this.utf8ArrayToStr(e.data.subarray(t));t+=r.length+1;var n=this.utf8ArrayToStr(e.data.subarray(t));return{key:"TXXX",description:r,data:n}}}},{key:"decodeTextFrame",value:function(e){if(!(e.size<2)&&3===e.data[0]){var t=e.data.subarray(1);return{key:e.type,data:this.utf8ArrayToStr(t)}}}},{key:"decodePrivFrame",value:function(e){if(!(e.size<2)){var t=this.utf8ArrayToStr(e.data),r=e.data.subarray(t.length+1);return{key:"PRIV",info:t,data:r.buffer}}}},{key:"utf8ArrayToStr",value:function(e){for(var t=void 0,r=void 0,n="",i=0,a=e.length;i<a;){var o=e[i++];switch(o>>4){case 0:return n;case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(o);break;case 12:case 13:t=e[i++],n+=String.fromCharCode((31&o)<<6|63&t);break;case 14:t=e[i++],r=e[i++],n+=String.fromCharCode((15&o)<<12|(63&t)<<6|(63&r)<<0)}}return n}}]),t}(f.default);r.default=c},{34:34,35:35}],12:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),d=e(34),f=n(d),c=e(53),h=e(33),g=e(37),p=n(g),v=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MANIFEST_LOADED,l.default.LEVEL_LOADED,l.default.FRAG_LOADED,l.default.ERROR));return r.ontick=r.tick.bind(r),r._manualLevel=-1,r}return o(t,e),s(t,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,r=[],n=[],i={},a=!1,o=!1,s=this.hls,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),d=function(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach(function(e){e.videoCodec&&(a=!0),u&&e.audioCodec&&e.audioCodec.indexOf("mp4a.40.34")!==-1&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(o=!0);var t=i[e.bitrate];void 0===t?(i[e.bitrate]=r.length,e.url=[e.url],e.urlId=0,r.push(e)):r[t].url.push(e.url)}),a&&o?r.forEach(function(e){e.videoCodec&&n.push(e)}):n=r,n=n.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||d("audio",t))&&(!r||d("video",r))}),n.length){t=n[0].bitrate,n.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=n;for(var f=0;f<n.length;f++)if(n[f].bitrate===t){this._firstLevel=f,c.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}s.trigger(l.default.MANIFEST_PARSED,{levels:n,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:a,altAudio:e.audioTracks.length>0})}else s.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e){c.logger.log("switching to level "+e),this._level=e;var n=t[e];n.level=e,r.trigger(l.default.LEVEL_SWITCH,n),r.trigger(l.default.LEVEL_SWITCHING,n)}var i=t[e],a=i.details;if(!a||a.live===!0){var o=i.urlId;r.trigger(l.default.LEVEL_LOADING,{url:i.url[o],level:e,id:o})}}else r.trigger(l.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t=e.details,r=this.hls,n=void 0,i=void 0,a=!1;switch(t){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:n=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:n=e.context.level,a=!0;break;case h.ErrorDetails.REMUX_ALLOC_ERROR:n=e.level}if(void 0!==n){i=this._levels[n],i.loadError?i.loadError++:i.loadError=1;var o=i.url.length;if(o>1&&i.loadError<o)i.urlId=(i.urlId+1)%o,i.details=void 0,c.logger.warn("level controller,"+t+" for level "+n+": switching to redundant stream id "+i.urlId);else{var s=this._manualLevel===-1&&n;if(s)c.logger.warn("level controller,"+t+": switch-down for next fragment"),r.nextAutoLevel=Math.max(0,n-1);else if(i&&i.details&&i.details.live)c.logger.warn("level controller,"+t+" on live stream, discard"),a&&(this._level=void 0);else if(t===h.ErrorDetails.LEVEL_LOAD_ERROR||t===h.ErrorDetails.LEVEL_LOAD_TIMEOUT){
var u=r.media,l=u&&p.default.isBuffered(u,u.currentTime)&&p.default.isBuffered(u,u.currentTime+.5);if(l){var d=r.config.levelLoadingRetryDelay;c.logger.warn("level controller,"+t+", but media buffered, retry in "+d+"ms"),this.timer=setTimeout(this.ontick,d),e.levelRetry=!0}else c.logger.error("cannot recover "+t+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0}}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if(t&&"main"===t.type){var r=this._levels[t.level];r&&(r.loadError=0)}}},{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var r=this._levels[t];r.loadError=0;var n=e.details;if(n.live){var i=1e3*(n.averagetargetduration?n.averagetargetduration:n.targetduration),a=r.details;a&&n.endSN===a.endSN&&(i/=2,c.logger.log("same live playlist, reload twice faster")),i-=performance.now()-e.stats.trequest,i=Math.max(1e3,Math.round(i)),c.logger.log("live playlist, reload in "+i+" ms"),this.timer=setTimeout(this.ontick,i)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var r=t.urlId;this.hls.trigger(l.default.LEVEL_LOADING,{url:t.url[r],level:e,id:r})}}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),e!==-1&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return this._manualLevel!==-1?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,this._manualLevel===-1&&(this.hls.nextAutoLevel=e)}}]),t}(f.default);r.default=v},{33:33,34:34,35:35,37:37,53:53}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(48),l=n(u),d=e(37),f=n(d),c=e(25),h=n(c),g=e(35),p=n(g),v=e(34),m=n(v),y=e(38),_=n(y),E=e(54),T=n(E),b=e(33),S=e(53),R={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},A=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,p.default.MEDIA_ATTACHED,p.default.MEDIA_DETACHING,p.default.MANIFEST_LOADING,p.default.MANIFEST_PARSED,p.default.LEVEL_LOADED,p.default.KEY_LOADED,p.default.FRAG_LOADED,p.default.FRAG_LOAD_EMERGENCY_ABORTED,p.default.FRAG_PARSING_INIT_SEGMENT,p.default.FRAG_PARSING_DATA,p.default.FRAG_PARSED,p.default.ERROR,p.default.AUDIO_TRACK_SWITCHING,p.default.AUDIO_TRACK_SWITCHED,p.default.BUFFER_CREATED,p.default.BUFFER_APPENDED,p.default.BUFFER_FLUSHED));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=R.STOPPED,r.ontick=r.tick.bind(r),r}return o(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),m.default.prototype.destroy.call(this),this.state=R.STOPPED}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;n===-1&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&e===-1&&(S.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=R.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=R.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.state=R.STOPPED,this.forceStartLoad=!1}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case R.ERROR:break;case R.BUFFER_FLUSHING:this.fragLoadError=0;break;case R.IDLE:this._doTickIdle();break;case R.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=R.IDLE);break;case R.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(S.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=R.IDLE);break;case R.ERROR:case R.STOPPED:case R.FRAG_LOADING:case R.PARSING:case R.PARSED:case R.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0===this.levelLastLoaded||r||!this.startFragRequested&&t.startFragPrefetch){var n=void 0;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i],o=a.bitrate,s=void 0;s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var u=f.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),l=u.len;if(!(l>=s)){S.logger.trace("buffer length of "+l.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var d=a.details;if("undefined"==typeof d||d.live&&this.levelLastLoaded!==i)return void(this.state=R.WAITING_LEVEL);var c=this.fragPrevious;if(!d.live&&c&&c.sn===d.endSN){var h=Math.min(r.duration,c.start+c.duration);if(h-Math.max(u.end,c.start)<=Math.max(.2,c.duration/2)){var g={};return this.altAudio&&(g.type="video"),this.hls.trigger(p.default.BUFFER_EOS,g),void(this.state=R.ENDED)}}this._fetchPayloadOrEos(n,u,d)}}}},{key:"_fetchPayloadOrEos",value:function(e,t,r){var n=this.fragPrevious,i=this.level,a=r.fragments,o=a.length;if(0!==o){var s=a[0].start,u=a[o-1].start+a[o-1].duration,l=t.end,d=void 0;if(r.initSegment&&!r.initSegment.data)d=r.initSegment;else if(r.live){var f=this.config.initialLiveManifestSize;if(o<f)return void S.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+f);if(d=this._ensureFragmentAtLivePoint(r,l,s,u,n,a,o),null===d)return}else l<s&&(d=a[0]);d||(d=this._findFragment(s,n,o,a,l,u,r)),d&&this._loadFragmentOrKey(d,i,r,e,l)}}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,r,n,i,a,o){var s=this.hls.config,u=this.media,l=void 0,d=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-s.maxFragLookUpTolerance,n-d)){var f=this.liveSyncPosition=this.computeLivePosition(r,e);S.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,u&&u.readyState&&u.duration>f&&(u.currentTime=f)}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i){var c=i.sn+1;c>=e.startSN&&c<=e.endSN&&(l=a[c-e.startSN],S.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=a[Math.min(o-1,Math.round(o/2))],S.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l}},{key:"_findFragment",value:function(e,t,r,n,i,a,o){var s=this.hls.config,u=void 0,d=void 0,f=s.maxFragLookUpTolerance,c=t?n[t.sn-n[0].sn+1]:void 0,h=function(e){var t=Math.min(f,e.duration);return e.start+e.duration-t<=i?1:e.start-t>i&&e.start?-1:0};if(i<a?(i>a-f&&(f=0),d=c&&!h(c)?c:l.default.search(n,h)):d=n[r-1],d){u=d;var g=u.sn-o.startSN,p=t&&u.level===t.level,v=n[g-1],m=n[g+1];if(p&&u.sn===t.sn)if(u.sn<o.endSN){var y=t.deltaPTS;y&&y>s.maxBufferHole&&t.dropped&&g?(u=v,S.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(u=m,S.logger.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.dropped&&!p&&(m&&m.backtracked?(S.logger.warn("Already backtracked from fragment "+(g+1)+", will not backtrack to fragment "+g+". Loading fragment "+(g+1)),u=m):(S.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,v?(v.loadCounter&&v.loadCounter--,u=v):u=null))}return u}},{key:"_loadFragmentOrKey",value:function(e,t,r,n,i){var a=this.hls,o=a.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(S.logger.log("Loading "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t+", currentTime:"+n.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var s=o.fragLoadingLoopThreshold;if(e.loadCounter>s&&Math.abs(this.fragLoadIdx-e.loadIdx)<s)return void a.trigger(p.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,a.trigger(p.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new h.default(a,"main")),void(this.state=R.FRAG_LOADING)}S.logger.log("Loading key for "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t),this.state=R.KEY_LOADING,a.trigger(p.default.KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(e){return l.default.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})}},{key:"followingBufferedFrag",value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,r=this.media;if(r&&r.readyState&&r.seeking===!1&&(t=r.currentTime,t>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),f.default.isBuffered(r,t)?e=this.getBufferedFrag(t):f.default.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(p.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(p.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}}},{key:"immediateLevelSwitch",value:function(){if(S.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,f.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,r=void 0,n=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,r=this.getBufferedFrag(e.currentTime),r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;t=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if(n=this.getBufferedFrag(e.currentTime+t),n&&(n=this.followingBufferedFrag(n))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.startPTS,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=R.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(p.default.BUFFER_FLUSHING,r)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(S.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;S.logger.log("media seeking to "+t.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:e,i=f.default.bufferInfo(n,t,this.config.maxBufferHole);if(this.state===R.FRAG_LOADING){var a=this.fragCurrent;if(0===i.len&&a){var o=r.maxFragLookUpTolerance,s=a.start-o,u=a.start+a.duration+o;t<s||t>u?(a.loader&&(S.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=R.IDLE):S.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===R.ENDED&&(0===i.len&&(this.fragPrevious=0),this.state=R.IDLE);e&&(this.lastCurrentTime=t),this.state!==R.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){S.logger.log("media seeked to "+this.media.currentTime.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){S.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){S.logger.log("trigger BUFFER_RESET"),this.hls.trigger(p.default.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,r=!1,n=!1;e.levels.forEach(function(e){t=e.audioCodec,t&&(t.indexOf("mp4a.40.2")!==-1&&(r=!0),t.indexOf("mp4a.40.5")!==-1&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&S.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,r=e.level,n=this.levels[r],i=t.totalduration,a=0;if(S.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),this.levelLastLoaded=r,t.live){var o=n.details;o&&t.fragments.length>0?(_.default.mergeDetails(o,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,o),t.PTSKnown?S.logger.log("live playlist sliding:"+a.toFixed(3)):S.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,S.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,this.hls.trigger(p.default.LEVEL_UPDATED,{details:t,level:r}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var s=t.startTimeOffset;isNaN(s)?t.live?(this.startPosition=this.computeLivePosition(a,t),S.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(s<0&&(S.logger.log("negative start time offset "+s+", count from end of last fragment"),s=a+i+s),S.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===R.WAITING_LEVEL&&(this.state=R.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===R.KEY_LOADING&&(this.state=R.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===R.FRAG_LOADING&&t&&"main"===r.type&&r.level===t.level&&r.sn===t.sn){var n=e.stats,i=this.levels[t.level],a=i.details;if(S.logger.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=n,r.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=R.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(p.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=R.IDLE,n.tparsed=n.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(p.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else{this.state=R.PARSING;var o=a.totalduration,s=t.level,u=t.sn,l=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(S.logger.log("swapping playlist audio codec"),void 0===l&&(l=this.lastAudioCodec),l&&(l=l.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,S.logger.log("Parsing "+u+" of ["+a.startSN+" ,"+a.endSN+"],level "+s+", cc "+t.cc);var d=this.demuxer;d||(d=this.demuxer=new h.default(this.hls,"main"));var f=this.media,c=f&&f.seeking,g=!c&&(a.PTSKnown||!a.live),v=a.initSegment?a.initSegment.data:[];d.push(e.payload,v,l,i.videoCodec,t,o,g,void 0)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===R.PARSING){var n,i,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,i=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(S.logger.log("swapping playlist audio codec"),o=o.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&s.indexOf("firefox")===-1&&(o="mp4a.40.5"),s.indexOf("android")!==-1&&"audio/mpeg"!==i.container&&(o="mp4a.40.2",S.logger.log("Android: force audio codec to "+o)),i.levelCodec=o,i.id=e.id}i=a.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(p.default.BUFFER_CODECS,a);for(n in a){i=a[n],S.logger.log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(p.default.BUFFER_APPENDING,{type:n,data:u,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"main"===e.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===R.PARSING){var i=this.levels[this.level],a=r;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),S.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped){if(!a.backtracked)return a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=R.IDLE,void this.tick();S.logger.warn("Already backtracked on this fragment, appending with the gap")}else a.backtracked=!1;var o=_.default.updateFragPTSDTS(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),s=this.hls;s.trigger(p.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:o,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(r){r&&r.length&&t.state===R.PARSING&&(t.appended=!0,t.pendingBuffering=!0,s.trigger(p.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===R.PARSING&&(this.stats.tparsed=performance.now(),this.state=R.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){S.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(S.logger.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=R.IDLE}var i=this.hls;i.trigger(p.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(p.default.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(S.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,r=void 0,n=void 0,i=!1;for(var a in t){var o=t[a];"main"===o.id?(n=a,r=o,"video"===a&&(this.videoBuffer=t[a].buffer)):i=!0}i&&r?(S.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent){var t=this.state;t!==R.PARSING&&t!==R.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==R.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;S.logger.log("main buffered : "+T.default.toString(t.buffered));var r=this._bufferedFrags.filter(function(e){return f.default.isBuffered(t,(e.startPTS+e.endPTS)/2)});r.push(e),this._bufferedFrags=r.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(p.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=R.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=this.media,n=r&&f.default.isBuffered(r,r.currentTime)&&f.default.isBuffered(r,r.currentTime+.5);switch(e.details){case b.ErrorDetails.FRAG_LOAD_ERROR:case b.ErrorDetails.FRAG_LOAD_TIMEOUT:case b.ErrorDetails.KEY_LOAD_ERROR:case b.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var a=this.config;if(i<=a.fragLoadingMaxRetry||n||t.autoLevel&&t.level){this.fragLoadError=i,t.loadCounter=0;var o=Math.min(Math.pow(2,i-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);S.logger.warn("mediaController: frag loading failed, retry in "+o+" ms"),this.retryDate=performance.now()+o,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=R.FRAG_LOADING_WAITING_RETRY}else S.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=R.ERROR}break;case b.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(n?(this._reduceMaxBufferLength(t.duration),this.state=R.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=R.ERROR));break;case b.ErrorDetails.LEVEL_LOAD_ERROR:case b.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==R.ERROR&&(e.fatal?(this.state=R.ERROR,S.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==R.WAITING_LEVEL||(this.state=R.IDLE));break;case b.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==R.PARSING&&this.state!==R.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=R.IDLE):(S.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,S.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media;if(e&&e.readyState){var t=e.currentTime,r=this.mediaBuffer?this.mediaBuffer:e,n=r.buffered;if(!this.loadedmetadata&&n.length){this.loadedmetadata=!0;var i=e.seeking?t:this.startPosition,a=f.default.isBuffered(r,i);t===i&&a||(S.logger.log("target start position:"+i),a||(i=n.start(0),S.logger.log("target start position not buffered, seek to buffered.start(0) "+i)),S.logger.log("adjust currentTime from "+t+" to "+i),e.currentTime=i)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var o=f.default.bufferInfo(e,t,0),s=!(e.paused||e.ended||0===e.buffered.length),u=.5,l=t!==this.lastCurrentTime,d=this.config;if(l)this.stallReported&&(S.logger.warn("playback not stuck anymore @"+t+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(s){var c=performance.now(),h=this.hls;if(this.stalled){var g=c-this.stalled,v=o.len,m=this.nudgeRetry||0;if(v<=u&&g>1e3*d.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,S.logger.warn("playback stalling in low buffer @"+t),h.trigger(p.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:v}));var y=o.nextStart,_=y-t;if(y&&_<d.maxSeekHole&&_>0){this.nudgeRetry=++m;var E=m*d.nudgeOffset;S.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+y+" + nudge "+E),e.currentTime=y+E,this.stalled=void 0,h.trigger(p.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:y+E-t})}}else if(v>u&&g>1e3*d.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,S.logger.warn("playback stalling in high buffer @"+t),h.trigger(p.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:v})),this.stalled=void 0,this.nudgeRetry=++m,m<d.nudgeMaxRetry){var T=e.currentTime,R=T+m*d.nudgeOffset;S.logger.log("adjust currentTime from "+T+" to "+R),e.currentTime=R,h.trigger(p.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else S.logger.error("still stuck in high buffer @"+t+" after "+d.nudgeMaxRetry+", raise fatal error"),h.trigger(p.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=c,this.stallReported=!1}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=R.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return f.default.isBuffered(e,(t.startPTS+t.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=R.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,S.logger.log("main stream:"+t+"->"+e),this.hls.trigger(p.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(m.default);r.default=A},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,53:53,54:54}],14:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),d=e(34),f=n(d),c=e(53),h=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.ERROR,l.default.SUBTITLE_TRACKS_UPDATED,l.default.SUBTITLE_TRACK_SWITCH,l.default.SUBTITLE_TRACK_LOADED,l.default.SUBTITLE_FRAG_PROCESSED));return r.config=e.config,r.vttFragSNsProcessed={},r.vttFragQueues=void 0,r.currentlyProcessing=null,r.currentTrackId=-1,r}return o(t,e),s(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"clearVttFragQueues",value:function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})}},{key:"nextFrag",value:function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(l.default.FRAG_LOADING,{frag:e})}}},{key:"onSubtitleFragProcessed",value:function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()}},{key:"onError",value:function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())}},{key:"onSubtitleTracksUpdated",value:function(e){var t=this;c.logger.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})}},{key:"onSubtitleTrackSwitch",value:function(e){this.currentTrackId=e.id,this.clearVttFragQueues()}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this.vttFragSNsProcessed[e.id],r=this.vttFragQueues[e.id],n=this.currentlyProcessing?this.currentlyProcessing.sn:-1,i=function(e){return t.indexOf(e.sn)>-1},a=function(e){return r.some(function(t){return t.sn===e.sn})};e.details.fragments.forEach(function(t){i(t)||t.sn===n||a(t)||(t.trackId=e.id,r.push(t))}),this.nextFrag()}}]),t}(f.default);r.default=h},{34:34,35:35,53:53}],15:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{
default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){for(var t=[],r=0;r<e.length;r++)"subtitles"===e[r].kind&&t.push(e[r]);return t}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e(35),d=n(l),f=e(34),c=n(f),h=e(53),g=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.MEDIA_ATTACHED,d.default.MEDIA_DETACHING,d.default.MANIFEST_LOADING,d.default.MANIFEST_LOADED,d.default.SUBTITLE_TRACK_LOADED));return r.tracks=[],r.trackId=-1,r.media=void 0,r}return o(t,e),u(t,[{key:"destroy",value:function(){c.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){var t=this;this.media=e.media,this.media&&this.media.textTracks.addEventListener("change",function(){if(t.media){for(var e=-1,r=s(t.media.textTracks),n=0;n<r.length;n++)"showing"===r[n].mode&&(e=n);t.subtitleTrack=e}})}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,r=e.subtitles||[],n=!1;this.tracks=r,this.trackId=-1,this.hls.trigger(d.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&&(t.subtitleTrack=e.id,n=!0)})}},{key:"onTick",value:function(){var e=this.trackId,t=this.tracks[e];if(t){var r=t.details;void 0!==r&&r.live!==!0||(h.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(d.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this;e.id<this.tracks.length&&(h.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setSubtitleTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,h.logger.log("switching to subtitle track "+e);var t=this.tracks[e];this.hls.trigger(d.default.SUBTITLE_TRACK_SWITCH,{id:e});var r=t.details;void 0!==r&&r.live!==!0||(h.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(d.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(c.default);r.default=g},{34:34,35:35,53:53}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function u(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function l(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}Object.defineProperty(r,"__esModule",{value:!0});var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=e(35),c=n(f),h=e(34),g=n(h),p=e(49),v=n(p),m=e(57),y=n(m),_=e(53),E=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.FRAG_PARSING_USERDATA,c.default.MANIFEST_LOADING,c.default.MANIFEST_LOADED,c.default.FRAG_LOADED,c.default.LEVEL_SWITCHING,c.default.INIT_PTS_FOUND));if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=void 0,r.cueRanges=[],r.config.enableCEA708Captions){var n=r,o=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},u={newCue:function(e,t,r){if(!n.textTrack1){var i=n.getExistingTrack("1");if(i)n.textTrack1=i,s(n.textTrack1),o(n.textTrack1,n.media);else{var a=n.createTextTrack("captions",n.config.captionsTextTrack1Label,n.config.captionsTextTrack1LanguageCode);a&&(a.textTrack1=!0,n.textTrack1=a)}}n.addCues("textTrack1",e,t,r)}},l={newCue:function(e,t,r){if(!n.textTrack2){var i=n.getExistingTrack("2");if(i)n.textTrack2=i,s(n.textTrack2),o(n.textTrack2,n.media);else{var a=n.createTextTrack("captions",n.config.captionsTextTrack2Label,n.config.captionsTextTrack1LanguageCode);a&&(a.textTrack2=!0,n.textTrack2=a)}}n.addCues("textTrack2",e,t,r)}};r.cea608Parser=new v.default(0,u,l)}return r}return o(t,e),d(t,[{key:"addCues",value:function(e,t,r,n){for(var i=this.cueRanges,a=!1,o=i.length;o--;){var s=i[o],u=l(s[0],s[1],t,r);if(u>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],r),a=!0,u/(r-t)>.5))return}a||i.push([t,r]),this.Cues.newCue(this[e],t,r,n)}},{key:"onInitPtsFound",value:function(e){var t=this;"undefined"==typeof this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r],i="textTrack"+e;if(n[i]===!0)return n}return null}},{key:"createTextTrack",value:function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)}},{key:"destroy",value:function(){g.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){s(this.textTrack1),s(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)s(t[r])}}},{key:"onManifestLoaded",value:function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,n){var i=void 0;if(n<r.length){var a=r[n];u(a,e)&&(i=a)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),i.mode=e.default?"showing":"hidden",t.textTracks.push(i)})}}},{key:"onLevelSwitching",value:function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions}},{key:"onFragLoaded",value:function(e){var t=e.frag,r=e.payload;if("main"===t.type){var n=t.sn;n!==this.lastSn+1&&this.cea608Parser.reset(),this.lastSn=n}else if("subtitle"===t.type)if(r.byteLength){if("undefined"==typeof this.initPTS)return void this.unparsedVttFrags.push(e);var i=this.vttCCs;i[t.cc]||(i[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var a=this.textTracks,o=this.hls;y.default.parse(r,this.initPTS,i,t.cc,function(e){var r=a[t.trackId];e.forEach(function(e){r.cues.getCueById(e.id)||r.addCue(e)}),o.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){_.logger.log("Failed to parse VTT cue: "+e),o.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})}else this.hls.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}}},{key:"extractCea608Data",value:function(e){for(var t,r,n,i,a,o=31&e[0],s=2,u=[],l=0;l<o;l++)t=e[s++],r=127&e[s++],n=127&e[s++],i=0!==(4&t),a=3&t,0===r&&0===n||i&&0===a&&(u.push(r),u.push(n));return u}}]),t}(g.default);r.default=E},{34:34,35:35,49:49,53:53,57:57}],17:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){n(this,e),this.subtle=t,this.aesIV=r}return i(e,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();r.default=a},{}],18:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return i(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],s=this.invSubMix,u=s[0],l=s[1],d=s[2],f=s[3],c=new Uint32Array(256),h=0,g=0,p=0;for(p=0;p<256;p++)p<128?c[p]=p<<1:c[p]=p<<1^283;for(p=0;p<256;p++){var v=g^g<<1^g<<2^g<<3^g<<4;v=v>>>8^255&v^99,e[h]=v,t[v]=h;var m=c[h],y=c[m],_=c[y],E=257*c[v]^16843008*v;n[h]=E<<24|E>>>8,i[h]=E<<16|E>>>16,a[h]=E<<8|E>>>24,o[h]=E,E=16843009*_^65537*y^257*m^16843008*h,u[v]=E<<24|E>>>8,l[v]=E<<16|E>>>16,d[v]=E<<8|E>>>24,f[v]=E,h?(h=m^c[c[c[_^m]]],g^=c[c[g]]):h=g=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a=this.ksRows=4*(i+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(a),l=this.invKeySchedule=new Uint32Array(a),d=this.sBox,f=this.rcon,c=this.invSubMix,h=c[0],g=c[1],p=c[2],v=c[3],m=void 0,y=void 0;for(o=0;o<a;o++)o<i?m=u[o]=t[o]:(y=m,o%i===0?(y=y<<8|y>>>24,y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y],y^=f[o/i|0]<<24):i>6&&o%i===4&&(y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y]),u[o]=m=(u[o-i]^y)>>>0);for(s=0;s<a;s++)o=a-s,y=3&s?u[o]:u[o-4],s<4||o<=4?l[s]=y:l[s]=h[d[y>>>24]]^g[d[y>>>16&255]]^p[d[y>>>8&255]]^v[d[255&y]],l[s]=l[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,r){for(var n,i,a=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,u=this.invSubMix,l=u[0],d=u[1],f=u[2],c=u[3],h=this.uint8ArrayToUint32Array_(r),g=h[0],p=h[1],v=h[2],m=h[3],y=new Int32Array(e),_=new Int32Array(y.length),E=void 0,T=void 0,b=void 0,S=void 0,R=void 0,A=void 0,w=void 0,I=void 0,O=void 0,D=void 0,P=void 0,C=void 0,M=this.networkToHostOrderSwap;t<y.length;){for(O=M(y[t]),D=M(y[t+1]),P=M(y[t+2]),C=M(y[t+3]),R=O^o[0],A=C^o[1],w=P^o[2],I=D^o[3],n=4,i=1;i<a;i++)E=l[R>>>24]^d[A>>16&255]^f[w>>8&255]^c[255&I]^o[n],T=l[A>>>24]^d[w>>16&255]^f[I>>8&255]^c[255&R]^o[n+1],b=l[w>>>24]^d[I>>16&255]^f[R>>8&255]^c[255&A]^o[n+2],S=l[I>>>24]^d[R>>16&255]^f[A>>8&255]^c[255&w]^o[n+3],R=E,A=T,w=b,I=S,n+=4;E=s[R>>>24]<<24^s[A>>16&255]<<16^s[w>>8&255]<<8^s[255&I]^o[n],T=s[A>>>24]<<24^s[w>>16&255]<<16^s[I>>8&255]<<8^s[255&R]^o[n+1],b=s[w>>>24]<<24^s[I>>16&255]<<16^s[R>>8&255]<<8^s[255&A]^o[n+2],S=s[I>>>24]<<24^s[R>>16&255]<<16^s[A>>8&255]<<8^s[255&w]^o[n+3],n+=3,_[t]=M(E^g),_[t+1]=M(S^p),_[t+2]=M(b^v),_[t+3]=M(T^m),g=O,p=D,v=P,m=C,t+=4}return _.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();r.default=a},{}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(17),s=n(o),u=e(20),l=n(u),d=e(18),f=n(d),c=e(33),h=e(53),g=function(){function e(t,r){i(this,e),this.observer=t,this.config=r,this.logEnabled=!0;try{var n=crypto?crypto:self.crypto;this.subtle=n.subtle||n.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return a(e,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(e,t,r,n){var i=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(h.logger.log("JS AES decrypt"),this.logEnabled=!1);var a=this.decryptor;a||(this.decryptor=a=new f.default),a.expandKey(t),n(a.decrypt(e,0,r))}else{this.logEnabled&&(h.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var o=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new l.default(o,t)),this.fastAesKey.expandKey().then(function(a){var u=new s.default(o,r);u.decrypt(e,a).catch(function(a){i.onWebCryptoError(a,e,t,r,n)}).then(function(e){n(e)})}).catch(function(a){i.onWebCryptoError(a,e,t,r,n)})}}},{key:"onWebCryptoError",value:function(e,t,r,n,i){this.config.enableSoftwareAES?(h.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(h.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),e}();r.default=g},{17:17,18:18,20:20,33:33,53:53}],20:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){n(this,e),this.subtle=t,this.key=r}return i(e,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();r.default=a},{}],21:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(22),s=n(o),u=e(53),l=e(27),d=n(l),f=function(){function e(t,r,n){i(this,e),this.observer=t,this.config=n,this.remuxer=r}return a(e,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){var i,a,o,l,f,c,h,g,p,v,m=new d.default(e),y=90*m.timeStamp;for(i=this._audioTrack,c=m.length,p=e.length;c<p-1&&(255!==e[c]||240!==(246&e[c+1]));c++);for(i.samplerate||(a=s.default.getAudioConfig(this.observer,e,c,i.manifestCodec),i.config=a.config,i.samplerate=a.samplerate,i.channelCount=a.channelCount,i.codec=a.codec,u.logger.log("parsed codec:"+i.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)),f=0,l=9216e4/i.samplerate;c+5<p&&(h=1&e[c+1]?7:9,o=(3&e[c+3])<<11|e[c+4]<<3|(224&e[c+5])>>>5,o-=h,o>0&&c+h+o<=p);)for(g=y+f*l,v={unit:e.subarray(c+h,c+h+o),pts:g,dts:g},i.samples.push(v),i.len+=o,c+=o+h,f++;c<p-1&&(255!==e[c]||240!==(246&e[c+1]));c++);this.remuxer.remux(i,{samples:[]},{samples:[{pts:y,dts:y,data:m.payload}],inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=new d.default(e);if(n.hasTimeStamp)for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(255===e[t]&&240===(246&e[t+1]))return!0;return!1}}]),e}();r.default=f},{22:22,27:27,53:53}],22:[function(e,t,r){"use strict";var n=e(53),i=e(33),a={getAudioConfig:function(e,t,r,a){var o,s,u,l,d,f=navigator.userAgent.toLowerCase(),c=a,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return o=((192&t[r+2])>>>6)+1,s=(60&t[r+2])>>>2,s>h.length-1?void e.trigger(Event.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(l=(1&t[r+2])<<2,l|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+l),/firefox/i.test(f)?s>=6?(o=5,d=new Array(4),u=s-3):(o=2,d=new Array(2),u=s):f.indexOf("android")!==-1?(o=2,d=new Array(2),u=s):(o=5,d=new Array(4),a&&(a.indexOf("mp4a.40.29")!==-1||a.indexOf("mp4a.40.5")!==-1)||!a&&s>=6?u=s-3:((a&&a.indexOf("mp4a.40.2")!==-1&&s>=6&&1===l||!a&&1===l)&&(o=2,d=new Array(2)),u=s)),d[0]=o<<3,d[0]|=(14&s)>>1,d[1]|=(1&s)<<7,d[1]|=l<<3,5===o&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:h[s],channelCount:l,codec:"mp4a.40."+o,manifestCodec:c})}};t.exports=a},{33:33,53:53}],23:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(35),s=n(o),u=e(33),l=e(19),d=n(l),f=e(21),c=n(f),h=e(29),g=n(h),p=e(32),v=n(p),m=e(28),y=n(m),_=e(45),E=n(_),T=e(46),b=n(T),S=function(){function e(t,r,n,a){i(this,e),this.observer=t,this.typeSupported=r,this.config=n,this.vendor=a}return a(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,r,n,i,a,o,u,l,f,c,h){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new d.default(this.observer,this.config));var p,v=this;try{p=performance.now()}catch(e){p=Date.now()}g.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var d;try{d=performance.now()}catch(e){d=Date.now()}v.observer.trigger(s.default.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:d}}),v.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,i,a,o,u,l,f,c,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,i,a,o,u,l,f,c,h)}},{key:"pushDecrypted",value:function(e,t,r,n,i,a,o,l,d,f,h,p){var m=this.demuxer;if(!m||o&&!this.probe(e)){var _=this.observer,T=this.typeSupported,S=this.config,R=[{demux:v.default,remux:E.default},{demux:y.default,remux:E.default},{demux:c.default,remux:E.default},{demux:g.default,remux:b.default}];for(var A in R){var w=R[A],I=w.demux.probe;if(I(e)){var O=this.remuxer=new w.remux(_,S,T,this.vendor);m=new w.demux(_,O,S,T),this.probe=I;break}}if(!m)return void _.trigger(s.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=m}var D=this.remuxer;(o||l)&&(m.resetInitSegment(r,n,i,f),D.resetInitSegment()),o&&(m.resetTimeStamp(),D.resetTimeStamp(p)),"function"==typeof m.setDecryptData&&m.setDecryptData(t),m.append(e,a,d,h)}}]),e}();r.default=S},{19:19,21:21,28:28,29:29,32:32,33:33,35:35,45:45,46:46}],24:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e(23),a=n(i),o=e(35),s=n(o),u=e(53),l=e(1),d=n(l),f=function(e){var t=new d.default;t.trigger=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(n))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",function(n){var i=n.data;switch(i.cmd){case"init":var o=JSON.parse(i.config);e.demuxer=new a.default(t,i.typeSupported,o,i.vendor);try{(0,u.enableLogs)(o.debug===!0)}catch(e){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":e.demuxer.push(i.data,i.decryptdata,i.initSegment,i.audioCodec,i.videoCodec,i.timeOffset,i.discontinuity,i.trackSwitch,i.contiguous,i.duration,i.accurateTimeOffset,i.defaultInitPTS)}}),t.on(s.default.FRAG_DECRYPTED,r),t.on(s.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(s.default.FRAG_PARSED,r),t.on(s.default.ERROR,r),t.on(s.default.FRAG_PARSING_METADATA,r),t.on(s.default.FRAG_PARSING_USERDATA,r),t.on(s.default.INIT_PTS_FOUND,r),t.on(s.default.FRAG_PARSING_DATA,function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)})};r.default=f},{1:1,23:23,35:35,53:53}],25:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(35),s=n(o),u=e(23),l=n(u),d=e(24),f=n(d),c=e(53),h=e(33),g=e(1),p=n(g),v=function(){function t(r,n){i(this,t),this.hls=r,this.id=n;var a=this.observer=new p.default,o=r.config;a.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];a.emit.apply(a,[e,e].concat(r))},a.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];a.removeListener.apply(a,[e].concat(r))};var u=function(e,t){t=t||{},t.frag=this.frag,t.id=this.id,r.trigger(e,t)}.bind(this);a.on(s.default.FRAG_DECRYPTED,u),a.on(s.default.FRAG_PARSING_INIT_SEGMENT,u),a.on(s.default.FRAG_PARSING_DATA,u),a.on(s.default.FRAG_PARSED,u),a.on(s.default.ERROR,u),a.on(s.default.FRAG_PARSING_METADATA,u),a.on(s.default.FRAG_PARSING_USERDATA,u),a.on(s.default.INIT_PTS_FOUND,u);var d={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(o.enableWorker&&"undefined"!=typeof Worker){c.logger.log("demuxing in webworker");var v=void 0;try{var m=e(3);v=this.w=m(f.default),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(e){r.trigger(s.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},v.postMessage({cmd:"init",typeSupported:d,vendor:g,id:n,config:JSON.stringify(o)})}catch(e){c.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),v&&URL.revokeObjectURL(v.objectURL),this.demuxer=new l.default(a,d,o,g),this.w=void 0}}else this.demuxer=new l.default(a,d,o,g)}return a(t,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)}},{key:"push",value:function(e,t,r,n,i,a,o,s){var u=this.w,l=isNaN(i.startDTS)?i.start:i.startDTS,d=i.decryptdata,f=this.frag,h=!(f&&i.cc===f.cc),g=!(f&&i.level===f.level),p=f&&i.sn===f.sn+1,v=!g&&p;if(h&&c.logger.log(this.id+":discontinuity detected"),g&&c.logger.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:l,discontinuity:h,trackSwitch:g,contiguous:v,duration:a,accurateTimeOffset:o,defaultInitPTS:s},[e]);else{var m=this.demuxer;m&&m.push(e,d,t,r,n,l,h,g,v,a,o,s)}}},{key:"onWorkerMessage",value:function(e){var t=e.data,r=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}}]),t}();r.default=v},{1:1,23:23,24:24,3:3,33:33,35:35,53:53}],26:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(53),o=function(){function e(t){n(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return i(e,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,r,n=8,i=8;for(t=0;t<e;t++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i}},{key:"readSPS",value:function(){var e,t,r,n,i,a,o,s,u,l=0,d=0,f=0,c=0,h=this.readUByte.bind(this),g=this.readBits.bind(this),p=this.readUEG.bind(this),v=this.readBoolean.bind(this),m=this.skipBits.bind(this),y=this.skipEG.bind(this),_=this.skipUEG.bind(this),E=this.skipScalingList.bind(this);if(h(),e=h(),t=g(5),m(3),r=h(),_(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var T=p();if(3===T&&m(1),_(),_(),m(1),v())for(s=3!==T?8:12,u=0;u<s;u++)v()&&E(u<6?16:64)}_();var b=p();if(0===b)p();else if(1===b)for(m(1),y(),y(),n=p(),u=0;u<n;u++)y();_(),m(1),i=p(),a=p(),o=g(1),0===o&&m(1),m(1),v()&&(l=p(),d=p(),f=p(),c=p());var S=[1,1];if(v()&&v()){var R=h();switch(R){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[h()<<8|h(),h()<<8|h()]}}return{width:Math.ceil(16*(i+1)-2*l-2*d),height:(2-o)*(a+1)*16-(o?2:4)*(f+c),pixelRatio:S}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();r.default=o},{53:53}],27:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(53),o=function(){function e(t){n(this,e),this._hasTimeStamp=!1,this._length=0;for(var r,i,o,s,u,l,d,f,c=0;;)if(d=this.readUTF(t,c,3),c+=3,"ID3"===d)c+=3,r=127&t[c++],i=127&t[c++],o=127&t[c++],s=127&t[c++],u=(r<<21)+(i<<14)+(o<<7)+s,l=c+u,this._parseID3Frames(t,c,l),c=l;else{if("3DI"!==d)return c-=3,f=c,void(f&&(this.hasTimeStamp||a.logger.warn("ID3 tag found, but no timestamp"),this._length=f,this._payload=t.subarray(0,f)));c+=7,a.logger.log("3DI footer found, end: "+c)}}return i(e,[{key:"readUTF",value:function(e,t,r){var n="",i=t,a=t+r;do n+=String.fromCharCode(e[i++]);while(i<a);return n}},{key:"_parseID3Frames",value:function(e,t,r){for(var n,i,o,s,u;t+8<=r;)switch(n=this.readUTF(e,t,4),t+=4,i=e[t++]<<24+e[t++]<<16+e[t++]<<8+e[t++],s=e[t++]<<8+e[t++],o=t,n){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(e,t,44)){t+=44,t+=4;var l=1&e[t++];this._hasTimeStamp=!0,u=((e[t++]<<23)+(e[t++]<<15)+(e[t++]<<7)+e[t++])/45,l&&(u+=47721858.84),u=Math.round(u),a.logger.trace("ID3 timestamp found: "+u),this._timeStamp=u}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),e}();r.default=o},{53:53}],28:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),
Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(27),s=n(o),u=e(30),l=n(u),d=function(){function e(t,r,n){i(this,e),this.observer=t,this.config=n,this.remuxer=r}return a(e,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){var i,a,o=new s.default(e),u=90*o.timeStamp,d=o.length;for(i=d,a=e.length;i<a-1&&(255!==e[i]||224!==(224&e[i+1])||0===(6&e[i+1]));i++);l.default.parse(this._audioTrack,e,o.length,u),this.remuxer.remux(this._audioTrack,{samples:[]},{samples:[{pts:u,dts:u,data:o.payload}],inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=new s.default(e);if(n.hasTimeStamp)for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1]))return!0;return!1}}]),e}();r.default=d},{27:27,30:30}],29:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(35),s=n(o),u=function(){function e(t,r){i(this,e),this.observer=t,this.remuxer=r}return a(e,[{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(t,r,n,i){var a=this.initData=e.parseInitSegment(t),o={};a.audio&&(o.audio={container:"audio/mp4",codec:r,initSegment:t}),a.video&&(o.video={container:"video/mp4",codec:n,initSegment:t}),this.observer.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}},{key:"append",value:function(t,r,n,i){var a=this.initData,o=e.startDTS(a,t);this.remuxer.remux(a.audio,a.video,null,null,o,n,i,t)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(t){if(t.length>=8){var r=e.bin2str(t.subarray(4,8));return["moof","ftyp","styp"].indexOf(r)>=0}return!1}},{key:"bin2str",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"findBox",value:function(t,r){var n,i,a,o,s,u=[];if(!r.length)return null;for(n=0;n<t.byteLength;)i=t[n]<<24,i|=t[n+1]<<16,i|=t[n+2]<<8,i|=t[n+3],a=e.bin2str(t.subarray(n+4,n+8)),o=i>1?n+i:t.byteLength,a===r[0]&&(1===r.length?u.push(t.subarray(n+8,o)):(s=e.findBox(t.subarray(n+8,o),r.slice(1)),s.length&&(u=u.concat(s)))),n=o;return u}},{key:"parseInitSegment",value:function(t){var r=[],n=e.findBox(t,["moov","trak"]);return n.forEach(function(t){var n=e.findBox(t,["tkhd"])[0];if(n){var i=n[0],a=0===i?12:20,o=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3];o=o<0?4294967296+o:o;var s=e.findBox(t,["mdia","mdhd"])[0];if(s){i=s[0],a=0===i?12:20;var u=s[a]<<24|s[a+1]<<16|s[a+2]<<8|s[a+3],l=e.findBox(t,["mdia","hdlr"])[0];if(l){var d=e.bin2str(l.subarray(8,12)),f={soun:"audio",vide:"video"}[d];f&&(r[o]={timescale:u,type:f},r[f]={timescale:u,id:o})}}}}),r}},{key:"startDTS",value:function(t,r){var n,i,a;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map(function(r){return e.findBox(r,["tfhd"]).map(function(n){var i,a,o;return i=n[4]<<24|n[5]<<16|n[6]<<8|n[7],a=t[i].timescale||9e4,o=e.findBox(r,["tfdt"]).map(function(e){var t,r;return t=e[0],r=e[4]<<24|e[5]<<16|e[6]<<8|e[7],1===t&&(r*=Math.pow(2,32),r+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),r})[0],o=o||1/0,o/a})})),a=Math.min.apply(null,i),isFinite(a)?a:0}}]),e}();r.default=u},{35:35}],30:[function(e,t,r){"use strict";var n=e(53),i={onFrame:function(e,t,r,n,i,a,o){var s=10368e4/n,u=o+a*s;e.config=[],e.channelCount=i,e.samplerate=n,e.samples.push({unit:t,pts:u,dts:u}),e.len+=t.length},onNoise:function(e){n.logger.warn("mpeg audio has noise: "+e.length+" bytes")},parseFrames:function(e,t,r,n,i,a){var o=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],s=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];if(r+2>n)return-1;if(255===t[r]||224===(224&t[r+1])){if(r+24>n)return-1;var u=t[r+1]>>3&3,l=t[r+1]>>1&3,d=t[r+2]>>4&15,f=t[r+2]>>2&3,c=!!(2&t[r+2]);if(1!==u&&0!==d&&15!==d&&3!==f){var h=3===u?3-l:3===l?3:4,g=1e3*o[14*h+d-1],p=3===u?0:2===u?1:2,v=s[3*p+f],m=c?1:0,y=t[r+3]>>6===3?1:2,_=3===l?(3===u?12:6)*g/v+m<<2:(3===u?144:72)*g/v+m|0;return r+_>n?-1:(this.onFrame(e,t.subarray(r,r+_),g,v,y,i,a),_)}}for(var E=r+2;E<n;){if(255===t[E-1]&&224===(224&t[E]))return this.onNoise(t.subarray(r,E-1)),E-r-1;E++}return-1},parse:function(e,t,r,n){for(var i,a=t.length,o=0;r<a&&(i=this.parseFrames(e,t,r,a,o++,n))>0;)r+=i}};t.exports=i},{53:53}],31:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(19),s=n(o),u=function(){function e(t,r,n,a){i(this,e),this.decryptdata=n,this.discardEPB=a,this.decrypter=new s.default(t,r)}return a(e,[{key:"decryptBuffer",value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:"decryptAacSample",value:function(e,t,r,n){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new Uint8Array(a),i.set(a,16),n||s.decryptAacSamples(e,t+1,r)})}},{key:"decryptAacSamples",value:function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}}},{key:"getAvcEncryptedData",value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r}},{key:"getAvcDecryptedUnit",value:function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e}},{key:"decryptAvcSample",value:function(e,t,r,n,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,function(s){i.data=u.getAvcDecryptedUnit(o,s),a||u.decryptAvcSamples(e,t,r+1,n)})}},{key:"decryptAvcSamples",value:function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var a=i[r];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,o),!o)return}}}}}]),e}();r.default=u},{19:19}],32:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(22),s=n(o),u=e(30),l=n(u),d=e(35),f=n(d),c=e(26),h=n(c),g=e(31),p=n(g),v=e(53),m=e(33),y=function(){function e(t,r,n,a){i(this,e),this.observer=t,this.config=n,this.typeSupported=a,this.remuxer=r,this.sampleAes=null}return a(e,[{key:"setDecryptData",value:function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new p.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:"resetInitSegment",value:function(e,t,r,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:n,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=n}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){var i,a,o,s,u,l,d=e.length,c=!1;this.contiguous=r;var h=this.pmtParsed,g=this._avcTrack,p=this._audioTrack,y=this._id3Track,_=g.id,E=p.id,T=y.id,b=this._pmtId,S=g.pesData,R=p.pesData,A=y.pesData,w=this._parsePAT,I=this._parsePMT,O=this._parsePES,D=this._parseAVCPES.bind(this),P=this._parseAACPES.bind(this),C=this._parseMPEGPES.bind(this),M=this._parseID3PES.bind(this);for(d-=d%188,i=0;i<d;i+=188)if(71===e[i]){if(a=!!(64&e[i+1]),o=((31&e[i+1])<<8)+e[i+2],s=(48&e[i+3])>>4,s>1){if(u=i+5+e[i+4],u===i+188)continue}else u=i+4;switch(o){case _:a&&(S&&(l=O(S))&&D(l,!1),S={data:[],size:0}),S&&(S.data.push(e.subarray(u,i+188)),S.size+=i+188-u);break;case E:a&&(R&&(l=O(R))&&(p.isAAC?P(l):C(l)),R={data:[],size:0}),R&&(R.data.push(e.subarray(u,i+188)),R.size+=i+188-u);break;case T:a&&(A&&(l=O(A))&&M(l),A={data:[],size:0}),A&&(A.data.push(e.subarray(u,i+188)),A.size+=i+188-u);break;case 0:a&&(u+=e[u]+1),b=this._pmtId=w(e,u);break;case b:a&&(u+=e[u]+1);var L=I(e,u,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,null!=this.sampleAes);_=L.avc,_>0&&(g.id=_),E=L.audio,E>0&&(p.id=E,p.isAAC=L.isAAC),T=L.id3,T>0&&(y.id=T),c&&!h&&(v.logger.log("reparse from beginning"),c=!1,i=-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(f.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(l=O(S))?(D(l,!0),g.pesData=null):g.pesData=S,R&&(l=O(R))?(p.isAAC?P(l):C(l),p.pesData=null):(R&&R.size&&v.logger.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=R),A&&(l=O(A))?(M(l),y.pesData=null):y.pesData=A,null==this.sampleAes?this.remuxer.remux(p,g,y,this._txtTrack,t,r,n):this.decryptAndRemux(p,g,y,this._txtTrack,t,r,n)}},{key:"decryptAndRemux",value:function(e,t,r,n,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,r,n,i,a,o)})}else this.decryptAndRemuxAvc(e,t,r,n,i,a,o)}},{key:"decryptAndRemuxAvc",value:function(e,t,r,n,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,r,n,i,a,o)})}else this.remuxer.remux(e,t,r,n,i,a,o)}},{key:"destroy",value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,r,n){var i,a,o,s,u={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&e[t+1])<<8|e[t+2],a=t+3+i-4,o=(15&e[t+10])<<8|e[t+11],t+=12+o;t<a;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){v.logger.log("unkown stream type:"+e[t]);break}case 15:u.audio===-1&&(u.audio=s);break;case 21:u.id3===-1&&(u.id3=s);break;case 219:if(!n){v.logger.log("unkown stream type:"+e[t]);break}case 27:u.avc===-1&&(u.avc=s);break;case 3:case 4:r?u.audio===-1&&(u.audio=s,u.isAAC=!1):v.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:v.logger.warn("HEVC stream type found, not supported for now");break;default:v.logger.log("unkown stream type:"+e[t])}t+=((15&e[t+3])<<8|e[t+4])+5}return u}},{key:"_parsePES",value:function(e){var t,r,n,i,a,o,s,u,l,d=0,f=e.data;if(!e||0===e.size)return null;for(;f[0].length<19&&f.length>1;){var c=new Uint8Array(f[0].length+f[1].length);c.set(f[0]),c.set(f[1],f[0].length),f[0]=c,f.splice(1,1)}if(t=f[0],n=(t[0]<<16)+(t[1]<<8)+t[2],1===n){if(i=(t[4]<<8)+t[5],i&&i>e.size-6)return null;r=t[7],192&r&&(s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,s>4294967295&&(s-=8589934592),64&r?(u=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,u>4294967295&&(u-=8589934592),s-u>54e5&&(v.logger.warn(Math.round((s-u)/9e4)+"s delta between PTS and DTS, align them"),s=u)):u=s),a=t[8],l=a+9,e.size-=l,o=new Uint8Array(e.size);for(var h=0,g=f.length;h<g;h++){t=f[h];var p=t.byteLength;if(l){if(l>p){l-=p;continue}t=t.subarray(l),p-=l,l=0}o.set(t,d),d+=p}return i&&(i-=a+3),{data:o,pts:s,dts:u,len:i}}return null}},{key:"pushAccesUnit",value:function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||e.key===!0||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&v.logger.log(e.pts+"/"+e.dts+":"+e.debug)}},{key:"_parseAVCPES",value:function(e,t){var r,n,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),u=!1,l=this.avcSample;e.data=null,s.forEach(function(t){switch(t.type){case 1:n=!0,u&&l&&(l.debug+="NDR "),l.frame=!0;var s=t.data;if(s.length>4){var d=new h.default(s).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(l.key=!0)}break;case 5:n=!0,l||(l=a.avcSample=a._createAVCSample(!0,e.pts,e.dts,"")),u&&(l.debug+="IDR "),l.key=!0,l.frame=!0;break;case 6:n=!0,u&&l&&(l.debug+="SEI "),r=new h.default(a.discardEPB(t.data)),r.readUByte();for(var f=0,c=0,g=!1,p=0;!g&&r.bytesAvailable>1;){f=0;do p=r.readUByte(),f+=p;while(255===p);c=0;do p=r.readUByte(),c+=p;while(255===p);if(4===f&&0!==r.bytesAvailable){g=!0;var v=r.readUByte();if(181===v){var m=r.readUShort();if(49===m){var y=r.readUInt();if(1195456820===y){var _=r.readUByte();if(3===_){var E=r.readUByte(),T=r.readUByte(),b=31&E,S=[E,T];for(i=0;i<b;i++)S.push(r.readUByte()),S.push(r.readUByte()),S.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:S})}}}}}else if(c<r.bytesAvailable)for(i=0;i<c;i++)r.readUByte()}break;case 7:if(n=!0,u&&l&&(l.debug+="SPS "),!o.sps){r=new h.default(t.data);var R=r.readSPS();o.width=R.width,o.height=R.height,o.pixelRatio=R.pixelRatio,o.sps=[t.data],o.duration=a._duration;var A=t.data.subarray(1,4),w="avc1.";for(i=0;i<3;i++){var I=A[i].toString(16);I.length<2&&(I="0"+I),w+=I}o.codec=w}break;case 8:n=!0,u&&l&&(l.debug+="PPS "),o.pps||(o.pps=[t.data]);break;case 9:n=!1,l&&a.pushAccesUnit(l,o),l=a.avcSample=a._createAVCSample(!1,e.pts,e.dts,u?"AUD ":"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}if(l&&n){var O=l.units;O.push(t)}}),t&&l&&(this.pushAccesUnit(l,o),this.avcSample=null)}},{key:"_createAVCSample",value:function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}}},{key:"_insertSampleInOrder",value:function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var r=this._avcTrack,n=r.samples;e=n[n.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){var t,r,n,i,a,o=0,s=e.byteLength,u=this._avcTrack,l=u.naluState||0,d=l,f=[],c=-1;for(l===-1&&(c=0,a=31&e[0],l=0,o=1);o<s;)if(t=e[o++],l)if(1!==l)if(t)if(1===t){if(c>=0)n={data:e.subarray(c,o-l-1),type:a},f.push(n);else{var h=this._getLastNalUnit();if(h&&(d&&o<=4-d&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-d)),r=o-l-1,r>0)){var g=new Uint8Array(h.data.byteLength+r);g.set(h.data,0),g.set(e.subarray(0,r),h.data.byteLength),h.data=g}}o<s?(i=31&e[o],c=o,a=i,l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(c>=0&&l>=0&&(n={data:e.subarray(c,s),type:a,state:l},f.push(n)),0===f.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return u.naluState=l,f}},{key:"discardEPB",value:function(e){for(var t,r,n=e.byteLength,i=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),r[a]=e[o];return r}},{key:"_parseAACPES",value:function(e){var t,r,n,i,a,o,u,l,d,c=this._audioTrack,h=e.data,g=e.pts,p=0,y=this.aacOverFlow,_=this.aacLastPTS;if(y){var E=new Uint8Array(y.byteLength+h.byteLength);E.set(y,0),E.set(h,y.byteLength),h=E}for(a=p,l=h.length;a<l-1&&(255!==h[a]||240!==(240&h[a+1]));a++);if(a){var T,b;if(a<l-1?(T="AAC PES did not start with ADTS header,offset:"+a,b=!1):(T="no ADTS header found in AAC PES",b=!0),v.logger.warn("parsing error:"+T),this.observer.trigger(f.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:b,reason:T}),b)return}if(!c.samplerate){var S=this.audioCodec;t=s.default.getAudioConfig(this.observer,h,a,S),c.config=t.config,c.samplerate=t.samplerate,c.channelCount=t.channelCount,c.codec=t.codec,c.manifestCodec=t.manifestCodec,v.logger.log("parsed codec:"+c.codec+",rate:"+t.samplerate+",nb channel:"+t.channelCount)}if(i=0,n=9216e4/c.samplerate,y&&_){var R=_+n;Math.abs(R-g)>1&&(v.logger.log("AAC: align PTS for overlapping frames by "+Math.round((R-g)/90)),g=R)}for(;a+5<l&&(o=1&h[a+1]?7:9,r=(3&h[a+3])<<11|h[a+4]<<3|(224&h[a+5])>>>5,r-=o,r>0&&a+o+r<=l);)for(u=g+i*n,d={unit:h.subarray(a+o,a+o+r),pts:u,dts:u},c.samples.push(d),c.len+=r,a+=r+o,i++;a<l-1&&(255!==h[a]||240!==(240&h[a+1]));a++);y=a<l?h.subarray(a,l):null,this.aacOverFlow=y,this.aacLastPTS=u}},{key:"_parseMPEGPES",value:function(e){l.default.parse(this._audioTrack,e.data,0,e.pts)}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();r.default=y},{22:22,26:26,30:30,31:31,33:33,35:35,53:53}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},{}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e(53),u=e(33),l=e(35),d=n(l),f=function(){function e(t){i(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return o(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===a(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){var r=function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(t){s.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(d.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();r.default=f},{33:33,35:35,53:53}],35:[function(e,t,r){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],36:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return i(e,null,[{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();r.default=a},{}],37:[function(e,t,r){"use strict";var n={isBuffered:function(e,t){if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0;return!1},bufferInfo:function(e,t,r){if(e){var n,i=e.buffered,a=[];for(n=0;n<i.length;n++)a.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(a,t,r)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,r){var n,i,a,o,s,u=[];for(e.sort(function(e,t){var r=e.start-t.start;return r?r:t.end-e.end}),s=0;s<e.length;s++){var l=u.length;if(l){var d=u[l-1].end;e[s].start-d<r?e[s].end>d&&(u[l-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,n=0,i=a=t;s<u.length;s++){var f=u[s].start,c=u[s].end;if(t+r>=f&&t<c)i=f,a=c,n=a-t;else if(t+r<f){o=f;break}}return{len:n,start:i,end:a,nextStart:o}}};t.exports=n},{}],38:[function(e,t,r){"use strict";var n=e(53),i={mergeDetails:function(e,t){var r,a=Math.max(e.startSN,t.startSN)-t.startSN,o=Math.min(e.endSN,t.endSN)-t.startSN,s=t.startSN-e.startSN,u=e.fragments,l=t.fragments,d=0;if(o<a)return void(t.PTSKnown=!1);for(var f=a;f<=o;f++){var c=u[s+f],h=l[f];h&&c&&(d=c.cc-h.cc,isNaN(c.startPTS)||(h.start=h.startPTS=c.startPTS,h.endPTS=c.endPTS,h.duration=c.duration,r=h))}if(d)for(n.logger.log("discontinuity sliding from playlist, take drift into account"),f=0;f<l.length;f++)l[f].cc+=d;if(r)i.updateFragPTSDTS(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(s>=0&&s<u.length){var g=u[s].start;for(f=0;f<l.length;f++)l[f].start+=g}t.PTSKnown=e.PTSKnown},updateFragPTSDTS:function(e,t,r,n,a,o){if(!isNaN(t.startPTS)){var s=Math.abs(t.startPTS-r);isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),r=Math.min(r,t.startPTS),n=Math.max(n,t.endPTS),a=Math.min(a,t.startDTS),o=Math.max(o,t.endDTS)}var u=r-t.start;t.start=t.startPTS=r,t.endPTS=n,t.startDTS=a,t.endDTS=o,t.duration=n-r;var l=t.sn;if(!e||l<e.startSN||l>e.endSN)return 0;var d,f,c;for(d=l-e.startSN,f=e.fragments,t=f[d],c=d;c>0;c--)i.updatePTS(f,c,c-1);for(c=d;c<f.length-1;c++)i.updatePTS(f,c,c+1);return e.PTSKnown=!0,u},updatePTS:function(e,t,r){var i=e[t],a=e[r],o=a.startPTS;isNaN(o)?r>t?a.start=i.start+i.duration:a.start=Math.max(i.start-a.duration,0):r>t?(i.duration=o-i.start,i.duration<0&&n.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(a.duration=i.start-o,a.duration<0&&n.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!"))}};t.exports=i},{53:53}],39:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(2),s=n(o),u=e(35),l=n(u),d=e(33),f=e(43),c=n(f),h=e(41),g=n(h),p=e(42),v=n(p),m=e(13),y=n(m),_=e(12),E=n(_),T=e(11),b=n(T),S=e(53),R=e(1),A=n(R),w=e(4),I=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=e.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in n)a in r||(r[a]=n[a]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,S.enableLogs)(r.debug),this.config=r,this._autoLevelCapping=-1;var o=this.observer=new A.default;o.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];o.emit.apply(o,[e,e].concat(r))},o.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];o.removeListener.apply(o,[e].concat(r))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var s=this.abrController=new r.abrController(this),u=new r.bufferController(this),l=new r.capLevelController(this),d=new r.fpsController(this),f=new c.default(this),h=new g.default(this),p=new v.default(this),m=new b.default(this),_=this.levelController=new E.default(this),T=this.streamController=new y.default(this),R=[_,T],w=r.audioStreamController;w&&R.push(new w(this)),this.networkControllers=R;var I=[f,h,p,s,u,l,d,m];if(w=r.audioTrackController){var O=new w(this);this.audioTrackController=O,I.push(O)}if(w=r.subtitleTrackController){var D=new w(this);this.subtitleTrackController=D,I.push(D)}[r.subtitleStreamController,r.timelineController].forEach(function(e){e&&I.push(new e(t))}),this.coreComponents=I}return a(e,null,[{key:"isSupported",value:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"version",get:function(){return"0.7.7-sportradar.1"}},{key:"Events",get:function(){return l.default}},{key:"ErrorTypes",get:function(){return d.ErrorTypes}},{key:"ErrorDetails",get:function(){return d.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:w.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}]),a(e,[{key:"destroy",value:function(){S.logger.log("destroy"),this.trigger(l.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:function(e){S.logger.log("attachMedia"),this.media=e,this.trigger(l.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){S.logger.log("detachMedia"),this.trigger(l.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){e=s.default.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),S.logger.log("loadSource:"+e),this.url=e,this.trigger(l.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;S.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})}},{key:"stopLoad",value:function(){S.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})}},{key:"swapAudioCodec",value:function(){S.logger.log("swapAudioCodec"),
this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){S.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){S.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){S.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){S.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){S.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){S.logger.log("set startLevel:"+e);var t=this;e!==-1&&(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){S.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this,t=e.levels,r=e.config.minAutoBitrate,n=t?t.length:0,i=0;i<n;i++){var a=t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate;if(a>r)return i}return 0}},{key:"maxAutoLevel",get:function(){var e=this,t=e.levels,r=e.autoLevelCapping,n=void 0;return n=r===-1&&t&&t.length?t.length-1:r}},{key:"nextAutoLevel",get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),e}();r.default=I},{1:1,11:11,12:12,13:13,2:2,33:33,35:35,4:4,41:41,42:42,43:43,53:53}],40:[function(e,t,r){"use strict";t.exports=e(39).default},{39:39}],41:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),d=e(34),f=n(d),c=e(33),h=e(53),g=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FRAG_LOADING));return r.loaders={},r}return o(t,e),s(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var r=e[t];r&&r.destroy()}this.loaders={},f.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,r=t.type,n=this.loaders[r],i=this.hls.config;t.loaded=0,n&&(h.logger.warn("abort previous fragment loader for type:"+r),n.abort()),n=this.loaders[r]=t.loader="undefined"!=typeof i.fLoader?new i.fLoader(i):new i.loader(i);var a=void 0,o=void 0,s=void 0;a={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var u=t.byteRangeStartOffset,l=t.byteRangeEndOffset;isNaN(u)||isNaN(l)||(a.rangeStart=u,a.rangeEnd=l),o={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(a,o,s)}},{key:"loadsuccess",value:function(e,t,r){var n=e.data,i=r.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(l.default.FRAG_LOADED,{payload:n,frag:i,stats:t})}},{key:"loaderror",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag})}},{key:"loadprogress",value:function(e,t,r){var n=t.frag;n.loaded=e.loaded,this.hls.trigger(l.default.FRAG_LOAD_PROGRESS,{frag:n,stats:e})}}]),t}(f.default);r.default=g},{33:33,34:34,35:35,53:53}],42:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),d=e(34),f=n(d),c=e(33),h=e(53),g=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return o(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},f.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,r=t.type,n=this.loaders[r],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;n&&(h.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new o.loader(o),this.decrypturl=a,this.decryptkey=null;var s=void 0,u=void 0,d=void 0;s={url:a,frag:t,responseType:"arraybuffer"},u={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,u,d)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(l.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(l.default.KEY_LOADED,{frag:n})}},{key:"loaderror",value:function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),t}(f.default);r.default=g},{33:33,34:34,35:35,53:53}],43:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(2),l=n(u),d=e(35),f=n(d),c=e(34),h=n(c),g=e(33),p=e(47),v=n(p),m=e(53),y=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,_=/#EXT-X-MEDIA:(.*)/g,E=/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*))?|(?!#)(\S.+)|#EXT-X-BYTERANGE: *(.+)|#EXT-X-PROGRAM-DATE-TIME:(.+)|#.*/g,T=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,b=function(){function e(){o(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return s(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=l.default.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),S=function(){function e(){o(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return s(e,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&(r=new b,r.method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=l.default.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r?r:0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),R=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f.default.MANIFEST_LOADING,f.default.LEVEL_LOADING,f.default.AUDIO_TRACK_LOADING,f.default.SUBTITLE_TRACK_LOADING));return r.loaders={},r}return a(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})}},{key:"load",value:function(e,t){var r=this.loaders[t.type];if(r){var n=r.context;if(n&&n.url===e)return void m.logger.trace("playlist request ongoing");m.logger.warn("abort previous loader for type:"+t.type),r.abort()}var i=this.hls.config,a=void 0,o=void 0,s=void 0,u=void 0;"manifest"===t.type?(a=i.manifestLoadingMaxRetry,o=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,u=i.manifestLoadingMaxRetryTimeout):(a=i.levelLoadingMaxRetry,o=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,u=i.levelLoadingMaxRetryTimeout,m.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),r=this.loaders[t.type]=t.loader="undefined"!=typeof i.pLoader?new i.pLoader(i):new i.loader(i),t.url=e,t.responseType="";var l=void 0,d=void 0;l={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:u},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,l,d)}},{key:"resolve",value:function(e,t){return l.default.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var r=[],n=void 0;for(y.lastIndex=0;null!=(n=y.exec(e));){var i={},a=i.attrs=new v.default(n[1]);i.url=this.resolve(n[2],t);var o=a.decimalResolution("RESOLUTION");o&&(i.width=o.width,i.height=o.height),i.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),i.name=a.NAME;var s=a.CODECS;if(s){s=s.split(/[ ,]+/);for(var u=0;u<s.length;u++){var l=s[u];l.indexOf("avc1")!==-1?i.videoCodec=this.avc1toavcoti(l):i.audioCodec=l}}r.push(i)}return r}},{key:"parseMasterPlaylistMedia",value:function(e,t,r){var n=void 0,i=[],a=0;for(_.lastIndex=0;null!=(n=_.exec(e));){var o={},s=new v.default(n[1]);s.TYPE===r&&(o.groupId=s["GROUP-ID"],o.name=s.NAME,o.type=r,o.default="YES"===s.DEFAULT,o.autoselect="YES"===s.AUTOSELECT,o.forced="YES"===s.FORCED,s.URI&&(o.url=this.resolve(s.URI,t)),o.lang=s.LANGUAGE,o.name||(o.name=o.lang),o.id=a++,i.push(o))}return i}},{key:"avc1toavcoti",value:function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,r,n){var i,a,o=0,s=0,u={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new b,d=0,f=null,c=new S;for(E.lastIndex=0;null!==(i=E.exec(e));){var h=i[1];if(h){c.duration=parseFloat(h);var g=(" "+i[2]).slice(1);c.title=g?g:null,c.tagList.push(g?["INF",h,g]:["INF",h])}else if(i[3]){if(!isNaN(c.duration)){var p=o++;c.type=n,c.start=s,c.levelkey=l,c.sn=p,c.level=r,c.cc=d,c.baseurl=t,c.relurl=(" "+i[3]).slice(1),u.fragments.push(c),f=c,s+=c.duration,c=new S}}else if(i[4]){if(c.rawByteRange=(" "+i[4]).slice(1),f){var y=f.byteRangeEndOffset;y&&(c.lastByteRangeEndOffset=y)}}else if(i[5])c.rawProgramDateTime=(" "+i[5]).slice(1),c.tagList.push(["PROGRAM-DATE-TIME",c.rawProgramDateTime]);else{for(i=i[0].match(T),a=1;a<i.length&&void 0===i[a];a++);var _=(" "+i[a+1]).slice(1),R=(" "+i[a+2]).slice(1);switch(i[a]){case"#":c.tagList.push(R?[_,R]:[_]);break;case"PLAYLIST-TYPE":u.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":o=u.startSN=parseInt(_);break;case"TARGETDURATION":u.targetduration=parseFloat(_);break;case"VERSION":u.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":d++,c.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(_);break;case"KEY":var A=_,w=new v.default(A),I=w.enumeratedString("METHOD"),O=w.URI,D=w.hexadecimalInteger("IV");I&&(l=new b,O&&["AES-128","SAMPLE-AES"].indexOf(I)>=0&&(l.method=I,l.baseuri=t,l.reluri=O,l.key=null,l.iv=D));break;case"START":var P=_,C=new v.default(P),M=C.decimalFloatingPoint("TIME-OFFSET");isNaN(M)||(u.startTimeOffset=M);break;case"MAP":var L=new v.default(_);c.relurl=L.URI,c.rawByteRange=L.BYTERANGE,c.baseurl=t,c.level=r,c.type=n,c.sn="initSegment",u.initSegment=c,c=new S;break;default:m.logger.warn("line parsed but not handled: "+i)}}}return c=f,c&&!c.relurl&&(u.fragments.pop(),s-=c.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=o-1,u}},{key:"loadsuccess",value:function(e,t,r){var n=e.data,i=e.url,a=r.type,o=r.id,s=r.level,u=this.hls;if(this.loaders[a]=void 0,void 0!==i&&0!==i.indexOf("data:")||(i=r.url),t.tload=performance.now(),0===n.indexOf("#EXTM3U"))if(n.indexOf("#EXTINF:")>0){var l="audioTrack"!==a&&"subtitleTrack"!==a,d=isNaN(s)?isNaN(o)?0:o:s,c=this.parseLevelPlaylist(n,i,d,"audioTrack"===a?"audio":"subtitleTrack"===a?"subtitle":"main");c.tload=t.tload,"manifest"===a&&u.trigger(f.default.MANIFEST_LOADED,{levels:[{url:i,details:c}],audioTracks:[],url:i,stats:t}),t.tparsed=performance.now(),c.targetduration?l?u.trigger(f.default.LEVEL_LOADED,{details:c,level:s||0,id:o||0,stats:t}):"audioTrack"===a?u.trigger(f.default.AUDIO_TRACK_LOADED,{details:c,id:o,stats:t}):"subtitleTrack"===a&&u.trigger(f.default.SUBTITLE_TRACK_LOADED,{details:c,id:o,stats:t}):u.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"invalid targetduration"})}else{var h=this.parseMasterPlaylist(n,i);if(h.length){var p=this.parseMasterPlaylistMedia(n,i,"AUDIO"),v=this.parseMasterPlaylistMedia(n,i,"SUBTITLES");if(p.length){var y=!1;p.forEach(function(e){e.url||(y=!0)}),y===!1&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(m.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}u.trigger(f.default.MANIFEST_LOADED,{levels:h,audioTracks:p,subtitles:v,url:i,stats:t})}else u.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no level found in manifest"})}else u.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(e,t){var r,n,i=t.loader;switch(t.type){case"manifest":r=g.ErrorDetails.MANIFEST_LOAD_ERROR,n=!0;break;case"level":r=g.ErrorDetails.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":r=g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,n=!1}i&&(i.abort(),this.loaders[t.type]=void 0),this.hls.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:i.url,loader:i,response:e,context:t})}},{key:"loadtimeout",value:function(e,t){var r,n,i=t.loader;switch(t.type){case"manifest":r=g.ErrorDetails.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":r=g.ErrorDetails.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":r=g.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}i&&(i.abort(),this.loaders[t.type]=void 0),this.hls.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:i.url,loader:i,context:t})}}]),t}(h.default);r.default=R},{2:2,33:33,34:34,35:35,47:47,53:53}],44:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Math.pow(2,32)-1,o=function(){function e(){n(this,e)}return i(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,u,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))}},{key:"box",value:function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;i--;)n+=r[i].byteLength;for(t=new Uint8Array(n),t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<a;i++)t.set(r[i],n),n+=r[i].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,r){r*=t;var n=Math.floor(r/(a+1)),i=Math.floor(r%(a+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))}},{key:"moov",value:function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))}},{key:"mvhd",value:function(t,r){r*=t;var n=Math.floor(r/(a+1)),i=Math.floor(r%(a+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)}},{key:"sdtp",value:function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var r,n,i,a=[],o=[];for(r=0;r<t.sps.length;r++)n=t.sps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)n=t.pps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),u=t.width,l=t.height,d=t.pixelRatio[0],f=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,f>>24,f>>16&255,f>>8&255,255&f])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var r=t.id,n=t.duration*t.timescale,i=t.width,o=t.height,s=Math.floor(n/(a+1)),u=Math.floor(n%(a+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))}},{key:"traf",value:function(t,r){var n=e.sdtp(t),i=t.id,o=Math.floor(r/(a+1)),s=Math.floor(r%(a+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,n.length+16+20+8+16+8+8),n)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,r){var n,i,a,o,s,u,l=t.samples||[],d=l.length,f=12+16*d,c=new Uint8Array(f);for(r+=8+f,c.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<d;n++)i=l[n],a=i.duration,o=i.size,s=i.flags,u=i.cts,c.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return e.box(e.types.trun,c)}},{key:"initSegment",value:function(t){e.types||e.init();var r,n=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+n.byteLength),r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r}}]),e}();r.default=o},{}],45:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(36),s=n(o),u=e(35),l=n(u),d=e(53),f=e(44),c=n(f),h=e(33),g=function(){function e(t,r,n,a){i(this,e),this.observer=t,this.config=r,this.typeSupported=n;var o=navigator.userAgent;this.isSafari=a&&a.indexOf("Apple")>-1&&o&&!o.match("CriOS"),this.ISGenerated=!1}return a(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(e){this._initPTS=this._initDTS=e}},{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,n,i,a,o){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated)if(e.samples.length){e.timescale||(d.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var s=this.remuxAudio(e,i,a,o);if(t.samples.length){var u=void 0;s&&(u=s.endPTS-s.startPTS),t.timescale||(d.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,i,a,u)}}else{var f=void 0;t.samples.length&&(f=this.remuxVideo(t,i,a)),f&&e.codec&&this.remuxEmptyAudio(e,i,a,f)}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(l.default.FRAG_PARSED)}},{key:"generateIS",value:function(e,t,r){var n,i,a=this.observer,o=e.samples,s=t.samples,u=this.typeSupported,f="audio/mp4",g={},p={tracks:g},v=void 0===this._initPTS;if(v&&(n=i=1/0),e.config&&o.length&&(e.timescale=e.samplerate,d.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(u.mpeg?(f="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),g.audio={container:f,codec:e.codec,initSegment:!e.isAAC&&u.mpeg?new Uint8Array:c.default.initSegment([e]),metadata:{channelCount:e.channelCount}},v&&(n=i=o[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&s.length){var m=t.inputTimeScale;t.timescale=m,g.video={container:"video/mp4",codec:t.codec,initSegment:c.default.initSegment([t]),metadata:{width:t.width,height:t.height}},v&&(n=Math.min(n,s[0].pts-m*r),i=Math.min(i,s[0].dts-m*r),this.observer.trigger(l.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(g).length?(a.trigger(l.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,v&&(this._initPTS=n,this._initDTS=i)):a.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,r,n){var i,a,o,s,u,f,g,p,v=8,m=e.timescale,y=e.samples,_=[],E=y.length,T=this._PTSNormalize,b=this._initDTS;y.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r?r:n?n:e.id-t.id});var S=y.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(S<0){d.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(S/90)+" ms to overcome this issue");for(var R=0;R<y.length;R++)y[R].dts+=S}var A=void 0;A=r?this.nextAvcDts:t*m;var w=y[0];u=Math.max(T(w.dts-b,A),0),s=Math.max(T(w.pts-b,A),0);var I=Math.round((u-A)/90);r&&I&&(I>1?d.logger.log("AVC:"+I+" ms hole between fragments detected,filling it"):I<-1&&d.logger.log("AVC:"+-I+" ms overlapping between fragments detected"),u=A,y[0].dts=u+b,s=Math.max(s-I,A),y[0].pts=s+b,d.logger.log("Video/PTS/DTS adjusted: "+Math.round(s/90)+"/"+Math.round(u/90)+",delta:"+I+" ms")),f=u,w=y[y.length-1],p=Math.max(T(w.dts-b,A),0),g=Math.max(T(w.pts-b,A),0),g=Math.max(g,p);var O=this.isSafari;O&&(i=Math.round((p-u)/(y.length-1)));for(var D=0,P=0,C=0;C<E;C++){for(var M=y[C],L=M.units,k=L.length,x=0,N=0;N<k;N++)x+=L[N].data.length;P+=x,D+=k,M.length=x,O?M.dts=u+C*i:M.dts=Math.max(T(M.dts-b,A),u),M.pts=Math.max(T(M.pts-b,A),M.dts)}var F=P+4*D+8;try{a=new Uint8Array(F)}catch(e){return void this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var U=new DataView(a.buffer);U.setUint32(0,F),a.set(c.default.types.mdat,4);for(var B=0;B<E;B++){for(var j=y[B],G=j.units,H=0,V=void 0,K=0,q=G.length;K<q;K++){var Y=G[K],z=Y.data,W=Y.data.byteLength;U.setUint32(v,W),v+=4,a.set(z,v),v+=W,H+=4+W}if(O)V=Math.max(0,i*Math.round((j.pts-j.dts)/i));else{if(B<E-1)i=y[B+1].dts-j.dts;else{var Q=this.config,X=j.dts-y[B>0?B-1:B].dts;if(Q.stretchShortVideoTrack){var $=Q.maxBufferHole,J=Q.maxSeekHole,Z=Math.floor(Math.min($,J)*m),ee=(n?s+n*m:this.nextAudioPts)-j.pts;ee>Z?(i=ee-X,i<0&&(i=X),d.logger.log("It is approximately "+ee/90+" ms to the next segment; using duration "+i/90+" ms for the last video frame.")):i=X;
}else i=X}V=Math.round(j.pts-j.dts)}_.push({size:H,duration:i,cts:V,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:j.key?2:1,isNonSync:j.key?0:1}})}this.nextAvcDts=p+i;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,_.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var re=_[0].flags;re.dependsOn=2,re.isNonSync=0}e.samples=_,o=c.default.moof(e.sequenceNumber++,u,e),e.samples=[];var ne={data1:o,data2:a,startPTS:s/m,endPTS:(g+i)/m,startDTS:u/m,endDTS:this.nextAvcDts/m,type:"video",nb:_.length,dropped:te};return this.observer.trigger(l.default.FRAG_PARSING_DATA,ne),ne}},{key:"remuxAudio",value:function(e,t,r,n){var i,a,o,u,f,g,p,v,m,y,_,E,T,b,S,R,A=e.inputTimeScale,w=e.timescale,I=A/w,O=e.isAAC?1024:1152,D=O*I,P=this._PTSNormalize,C=this._initDTS,M=!e.isAAC&&this.typeSupported.mpeg,L=M?0:8,k=[],x=[];if(e.samples.sort(function(e,t){return e.pts-t.pts}),x=e.samples,R=this.nextAudioPts,r|=x.length&&R&&(n&&Math.abs(t-R/A)<.1||Math.abs(x[0].pts-R-C)<20*D),r||(R=t*A),n&&e.isAAC)for(var N=0,F=R;N<x.length;){var U=x[N],B=P(U.pts-C,R),j=B-F;if(j<=-D)d.logger.warn("Dropping audio frame @ "+(F/A).toFixed(3)+"s due to "+Math.round(Math.abs(1e3*j/A))+" ms overlap."),x.splice(N,1),e.len-=U.unit.length;else if(j>=D&&F){var G=Math.round(j/D);d.logger.warn("Injecting "+G+" audio frame @ "+(F/A).toFixed(3)+"s due to "+Math.round(1e3*j/A)+" ms gap.");for(var H=0;H<G;H++)S=F+C,S=Math.max(S,C),b=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),b||(d.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),b=U.unit.subarray()),x.splice(N,0,{unit:b,pts:S,dts:S}),e.len+=b.length,F+=D,N+=1;U.pts=U.dts=F+C,F+=D,N+=1}else Math.abs(j)>.1*D,F+=D,0===N?U.pts=U.dts=C+R:U.pts=U.dts=x[N-1].pts+D,N+=1}for(var V=0,K=x.length;V<K;V++){if(a=x[V],u=a.unit,y=a.pts-C,_=a.dts-C,void 0!==m)E=P(y,m),T=P(_,m),o.duration=Math.round((T-m)/I);else{E=P(y,R),T=P(_,R);var q=Math.round(1e3*(E-R)/A),Y=0;if(r&&e.isAAC&&q){if(q>0)Y=Math.round((E-R)/D),d.logger.log(q+" ms hole between AAC samples detected,filling it"),Y>0&&(b=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),b||(b=u.subarray()),e.len+=Y*b.length);else if(q<-12){d.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(R/A).toFixed(3)+"s/"+(E/A).toFixed(3)+"s/"+-q+"ms"),e.len-=u.byteLength;continue}E=T=R}if(p=Math.max(0,E),v=Math.max(0,T),!(e.len>0))return;var z=M?e.len:e.len+8;try{f=new Uint8Array(z)}catch(e){return void this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating audio mdat "+z})}M||(i=new DataView(f.buffer),i.setUint32(0,z),f.set(c.default.types.mdat,4));for(var W=0;W<Y;W++)S=E-(Y-W)*D,b=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),b||(d.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),b=u.subarray()),f.set(b,L),L+=b.byteLength,o={size:b.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(o)}f.set(u,L);var Q=u.byteLength;L+=Q,o={size:Q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(o),m=T}var X=0,$=k.length;if($>=2&&(X=k[$-2].duration,o.duration=X),$){this.nextAudioPts=E+I*X,e.len=0,e.samples=k,g=M?new Uint8Array:c.default.moof(e.sequenceNumber++,v/I,e),e.samples=[];var J={data1:g,data2:f,startPTS:p/A,endPTS:this.nextAudioPts/A,startDTS:v/A,endDTS:(T+I*X)/A,type:"audio",nb:$};return this.observer.trigger(l.default.FRAG_PARSING_DATA,J),J}return null}},{key:"remuxEmptyAudio",value:function(e,t,r,n){var i=e.inputTimeScale,a=e.samplerate?e.samplerate:i,o=i/a,u=this.nextAudioPts,l=(void 0!==u?u:n.startDTS*i)+this._initDTS,f=n.endDTS*i+this._initDTS,c=1024,h=o*c,g=Math.ceil((f-l)/h),p=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(d.logger.warn("remux empty Audio"),!p)return void d.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var v=[],m=0;m<g;m++){var y=l+m*h;v.push({unit:p,pts:y,dts:y}),e.len+=p.length}e.samples=v,this.remuxAudio(e,t,r)}},{key:"remuxID3",value:function(e,t){var r,n=e.samples.length,i=e.inputTimeScale,a=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)r=e.samples[s],r.pts=(r.pts-a)/i,r.dts=(r.dts-o)/i;this.observer.trigger(l.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var r,n=e.samples.length,i=e.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++)r=e.samples[o],r.pts=(r.pts-a)/i;this.observer.trigger(l.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}}]),e}();r.default=g},{33:33,35:35,36:36,44:44,53:53}],46:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(35),s=n(o),u=function(){function e(t){i(this,e),this.observer=t}return a(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,r,n,i,a,o,u){var l=this.observer,d="";e&&(d+="audio"),t&&(d+="video"),l.trigger(s.default.FRAG_PARSING_DATA,{data1:u,startPTS:i,startDTS:i,type:d,nb:1,dropped:0}),l.trigger(s.default.FRAG_PARSED)}}]),e}();r.default=u},{35:35}],47:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function e(t){n(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r])}return i(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=a.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,r={};for(o.lastIndex=0;null!==(t=o.exec(e));){var n=t[2],i='"';0===n.indexOf(i)&&n.lastIndexOf(i)===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r}}]),e}();r.default=s},{}],48:[function(e,t,r){"use strict";var n={search:function(e,t){for(var r=0,n=e.length-1,i=null,a=null;r<=n;){i=(r+n)/2|0,a=e[i];var o=t(a);if(o>0)r=i+1;else{if(!(o<0))return a;n=i-1}}return null}};t.exports=n},{}],49:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},s=15,u=100,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},d={17:2,18:4,21:6,22:8,23:10,19:13,20:15},f={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],g={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var r=this.verboseFilter[e];this.verboseLevel>=r&&console.log(this.time+" ["+e+"] "+t)}},p=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},v=function(){function e(t,r,i,a,o){n(this,e),this.foreground=t||"white",this.underline=r||!1,this.italics=i||!1,this.background=a||"black",this.flash=o||!1}return i(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),m=function(){function e(t,r,i,a,o,s){n(this,e),this.uchar=t||" ",this.penState=new v(r,i,a,o,s)}return i(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),y=function(){function e(){n(this,e),this.chars=[];for(var t=0;t<u;t++)this.chars.push(new m);this.pos=0,this.currPenState=new v}return i(e,[{key:"equals",value:function(e){for(var t=!0,r=0;r<u;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<u;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<u;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(g.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(g.log("ERROR","Too large cursor position "+this.pos),this.pos=u)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=o(e);return this.pos>=u?void g.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))}},{key:"clearFromPos",value:function(e){var t;for(t=e;t<u;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,r=0;r<u;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}}]),e}(),_=function(){function e(){n(this,e),this.rows=[];for(var t=0;t<s;t++)this.rows.push(new y);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return i(e,[{key:"reset",value:function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=s-1}},{key:"equals",value:function(e){for(var t=!0,r=0;r<s;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){var e=this.rows[this.currRow];e.backSpace()}},{key:"clearToEndOfRow",value:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()}},{key:"insertChar",value:function(e){var t=this.rows[this.currRow];t.insertChar(e)}},{key:"setPen",value:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)}},{key:"moveCursor",value:function(e){var t=this.rows[this.currRow];t.moveCursor(e)}},{key:"setCursor",value:function(e){g.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)}},{key:"setPAC",value:function(e){g.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<s;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime;if(a&&a<g.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[n+o])}}this.currRow=t;var u=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,d=Math.max(l-1,0);u.setCursor(e.indent),e.color=u.chars[d].penState.foreground}var f={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(f)}},{key:"setBkgData",value:function(e){g.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void g.log("DEBUG","roll_up but nrRollUpRows not set yet");g.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),g.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<s;i++){var a=this.rows[i].getTextString();a&&(n=i+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),E=function(){function e(t,r){n(this,e),this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new _,this.nonDisplayedMemory=new _,this.lastOutputScreen=new _,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return i(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,g.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";g.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(g.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){g.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){g.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){g.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){g.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){g.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){g.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){g.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){g.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){g.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){g.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){g.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(g.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,g.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){g.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}g.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=g.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),T=function(){function e(t,r,i){n(this,e),this.field=t||1,this.outputs=[r,i],this.channels=[new E(1,r),new E(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return i(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var r,n,i,a=!1;this.lastTime=e,g.setTime(e);for(var o=0;o<t.length;o+=2)if(n=127&t[o],i=127&t[o+1],0!==n||0!==i){if(g.log("DATA","["+p([t[o],t[o+1]])+"] -> ("+p([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(a=this.parseChars(n,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else g.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,g.log("WARNING","Couldn't parse cleaned data "+p([n,i])+" orig: "+p([t[o],t[o+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var r=null,n=(20===e||28===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!n&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,g.log("DEBUG","Repeated command ("+p([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var a=this.channels[r-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"parseMidrow",value:function(e,t){var r=null;if((17===e||25===e)&&32<=t&&t<=47){if(r=17===e?1:2,r!==this.currChNr)return g.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[r-1];return n.ccMIDROW(t),g.log("DEBUG","MIDROW ("+p([e,t])+")"),!0}return!1}},{key:"parsePAC",value:function(e,t){var r=null,n=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,a=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!a)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,n=64<=t&&t<=95?1===r?l[e]:f[e]:1===r?d[e]:c[e];var o=this.interpretPAC(n,t),s=this.channels[r-1];return s.setPAC(o),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"interpretPAC",value:function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1===(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n}},{key:"parseChars",value:function(e,t){var r=null,n=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),17<=i&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,g.log("INFO","Special char '"+o(a)+"' in channel "+r),n=[a]}else 32<=e&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var s=p(n);g.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n}},{key:"parseBackgroundAttributes",value:function(e,t){var r,n,i,a,o=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!o&&!s)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=h[n],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,a=this.channels[i-1],a.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();r.default=T},{}],50:[function(e,t,r){"use strict";var n=e(56),i={newCue:function(e,t,r,i){for(var a,o,s,u,l,d=window.VTTCue||window.TextTrackCue,f=0;f<i.rows.length;f++)if(a=i.rows[f],s=!0,u=0,l="",!a.isEmpty()){for(var c=0;c<a.chars.length;c++)a.chars[c].uchar.match(/\s/)&&s?u++:(l+=a.chars[c].uchar,s=!1);a.cueStartTime=t,t===r&&(r+=1e-4),o=new d(t,r,(0,n.fixLineBreaks)(l.trim())),u>=16?u--:u++,navigator.userAgent.match(/Firefox\//)?o.line=f+1:o.line=f>7?f-2:f+1,o.align="left",o.position=Math.max(0,Math.min(100,100*(u/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(o)}}};t.exports=i},{56:56}],51:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(52),s=n(o),u=function(){function e(t,r,n,a){i(this,e),this.hls=t,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new s.default(r),this.fast_=new s.default(n)}return a(e,[{key:"sample",value:function(e,t){e=Math.max(e,this.minDelayMs_);var r=8e3*t/e,n=e/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();r.default=u},{52:52}],52:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return i(e,[{key:"sample",value:function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();r.default=a},{}],53:[function(e,t,r){"use strict";function n(){}function i(e,t){return t="["+e+"] > "+t}function a(e){var t=self.console[e];return t?function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];n[0]&&(n[0]=i(e,n[0])),t.apply(self.console,n)}:n}function o(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach(function(t){l[t]=e[t]?e[t].bind(e):a(t)})}Object.defineProperty(r,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={trace:n,debug:n,log:n,warn:n,info:n,error:n},l=u;r.enableLogs=function(e){if(e===!0||"object"===("undefined"==typeof e?"undefined":s(e))){o(e,"debug","log","info","warn","error");try{l.log()}catch(e){l=u}}else l=u},r.logger=l},{}],54:[function(e,t,r){"use strict";var n={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}};t.exports=n},{}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function e(e){if("string"!=typeof e)return!1;var t=a[e.toLowerCase()];return!!t&&e.toLowerCase()}function t(e){if("string"!=typeof e)return!1;var t=o[e.toLowerCase()];return!!t&&e.toLowerCase()}function r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function n(n,a,o){var s=this,u=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var d="",f=!1,c=n,h=a,g=o,p=null,v="",m=!0,y="auto",_="start",E=50,T="middle",b=50,S="middle";if(Object.defineProperty(s,"id",r({},l,{get:function(){return d},set:function(e){d=""+e}})),Object.defineProperty(s,"pauseOnExit",r({},l,{get:function(){return f},set:function(e){f=!!e}})),Object.defineProperty(s,"startTime",r({},l,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},l,{get:function(){return g},set:function(e){g=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},l,{get:function(){return v},set:function(t){var r=e(t);if(r===!1)throw new SyntaxError("An invalid or illegal string was specified.");v=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},l,{get:function(){return y},set:function(e){if("number"!=typeof e&&e!==i)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},l,{get:function(){return _},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");_=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},l,{get:function(){return T},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");T=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},l,{get:function(){return S},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");S=r,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",a={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){var e=window.WebVTT;return e.convertCueToDOMTree(window,this.text)},n}()},{}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new c,this.regionList=[]}function a(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function o(){this.values=Object.create(null)}function s(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(r);if(2===o.length){var s=o[0],u=o[1];t(s,u)}}}function u(e,t,r){function n(){var t=a(e);if(null===t)throw new Error("Malformed timestamp: "+l);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(e,t){var n=new o;s(e,function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",g,"end"]);
break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",g,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",g,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&h.line===-1&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",g);var a=n.get("position","auto");"auto"===a&&50===h.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}function u(){e=e.replace(/^\s+/,"")}var l=e;if(u(),t.startTime=n(),u(),"-->"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+l);e=e.substr(3),u(),t.endTime=n(),u(),i(e,t)}function l(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Object.defineProperty(r,"__esModule",{value:!0}),r.fixLineBreaks=void 0;var d=e(55),f=n(d),c=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};o.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var r;return!!((r=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var h=new f.default(0,0,0),g="middle"===h.align?"middle":"center";i.prototype={parse:function(e){function t(){var e=n.buffer,t=0;for(e=l(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}function r(e){s(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/)}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;i=t();var a=i.match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:i=t(),n.state){case"HEADER":/:/.test(i)?r(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new f.default(0,0,""),n.state="CUE",i.indexOf("-->")===-1){n.cue.id=i;continue}case"CUE":try{u(i,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var d=i.indexOf("-->")!==-1;if(!i||d&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i;continue;case"BADCUE":i||(n.state="ID");continue}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}},r.fixLineBreaks=l,r.default=i},{55:55}],57:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=e(56),a=n(i),o=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(r)||isNaN(n)||isNaN(i)?-1:(t+=1e3*r,t+=6e4*n,t+=36e5*i)},s=function e(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()},u=function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC];e.presentationOffset=r},l={parse:function(e,t,r,n,i,l){var d=/\r\n|\n\r|\n|\r/g,f=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(d,"\n").split("\n"),c="00:00.000",h=0,g=0,p=0,v=[],m=void 0,y=!0,_=new a.default;_.oncue=function(e){var t=r[n],i=r.ccOffset;t&&t.new&&(g?i=r.ccOffset=t.start:u(r,n,p)),p&&!g&&(i=p+r.ccOffset-r.presentationOffset),e.startTime+=i-g,e.endTime+=i-g,e.id=s(e.startTime)+s(e.endTime)+s(e.text),e.text=decodeURIComponent(escape(e.text)),e.endTime>0&&v.push(e)},_.onparsingerror=function(e){m=e},_.onflush=function(){return m&&l?void l(m):void i(v)},f.forEach(function(e){if(y){if(e.startsWith("X-TIMESTAMP-MAP=")){y=!1,e.substr(16).split(",").forEach(function(e){e.startsWith("LOCAL:")?c=e.substr(6):e.startsWith("MPEGTS:")&&(h=parseInt(e.substr(7)))});try{t=t<0?t+8589934592:t,h-=t,g=o(c)/1e3,p=h/9e4,g===-1&&(m=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){m=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(y=!1)}_.parse(e+"\n")}),_.flush()}};t.exports=l},{56:56}],58:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(53),o=function(){function e(t){n(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return i(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0),t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,i=this.context,o=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest)),4===r){var s=t.status;if(s>=200&&s<300){n.tload=Math.max(n.tfirst,performance.now());var u=void 0,l=void 0;"arraybuffer"===i.responseType?(u=t.response,l=u.byteLength):(u=t.responseText,l=u.length),n.loaded=n.total=l;var d={url:t.responseURL,data:u};this.callbacks.onSuccess(d,n,i)}else n.retry>=o.maxRetry||s>=400&&s<499?(a.logger.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:t.statusText},i)):(a.logger.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)}},{key:"loadtimeout",value:function(){a.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);var r=this.callbacks.onProgress;r&&r(t,this.context,null)}}]),e}();r.default=o},{53:53}]},{},[40])(40)})},function(e,t){/*! npm.im/intervalometer */
"use strict";function r(e,t,r,n){function i(r){a=t(i,n),e(r-(o||r)),o=r}var a,o;return{start:function(){a||i(0)},stop:function(){r(a),a=null,o=0}}}function n(e){return r(e,requestAnimationFrame,cancelAnimationFrame)}function i(e,t){return r(e,setTimeout,clearTimeout,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.intervalometer=r,t.frameIntervalometer=n,t.timerIntervalometer=i},function(e,t,r){/*! npm.im/iphone-inline-video 2.2.0 */
"use strict";function n(e,t,r){function n(n){r&&!r(e,t)||n.stopImmediatePropagation()}return e.addEventListener(t,n),n}function i(e,t,r,n){function i(){return r[t]}function a(e){r[t]=e}n&&a(e[t]),Object.defineProperty(e,t,{get:i,set:a})}function a(e,t,r){r.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function o(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}function s(e){var t=new Audio;return a(e,"play",t),a(e,"playing",t),a(e,"pause",t),t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}function u(e,t,r){(m||0)+200<Date.now()&&(e[T]=!0,m=Date.now()),r||(e.currentTime=t),R[++A%3]=100*t|0}function l(e){return e.driver.currentTime>=e.video.duration}function d(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&l(t)&&(t.driver.currentTime=0)),u(t.video,t.driver.currentTime)):t.video.networkState===t.video.NETWORK_IDLE&&0===t.video.buffered.length&&t.video.load(),t.video.ended&&(delete t.video[T],t.video.pause(!0))}function f(){var e=this,t=e[E];return e.webkitDisplayingFullscreen?void e[b]():("data:"!==t.driver.src&&t.driver.src!==e.src&&(u(e,0,!0),t.driver.src=e.src),void(e.paused&&(t.paused=!1,0===e.buffered.length&&e.load(),t.driver.play(),t.updater.start(),t.hasAudio||(o(e,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&o(e,"playing")))))}function c(e){var t=this,r=t[E];r.driver.pause(),r.updater.stop(),t.webkitDisplayingFullscreen&&t[S](),r.paused&&!e||(r.paused=!0,r.hasAudio||o(t,"pause"),t.ended&&!t.webkitDisplayingFullscreen&&(t[T]=!0,o(t,"ended")))}function h(e,t){var r={};e[E]=r,r.paused=!0,r.hasAudio=t,r.video=e,r.updater=y.frameIntervalometer(d.bind(r)),t?r.driver=s(e):(e.addEventListener("canplay",function(){e.paused||o(e,"playing")}),r.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){r.driver.paused=!0},play:function(){r.driver.paused=!1,l(r)&&u(e,0)},get ended(){return l(r)}}),e.addEventListener("emptied",function(){var n=!r.driver.src||"data:"===r.driver.src;r.driver.src&&r.driver.src!==e.src&&(u(e,0,!0),r.driver.src=e.src,n||!t&&e.autoplay?r.driver.play():r.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?t&&0===r.driver.buffered.length&&r.driver.load():(e.pause(),e[b]())}),t&&(e.addEventListener("webkitendfullscreen",function(){r.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){R.indexOf(100*e.currentTime|0)<0&&(r.driver.currentTime=e.currentTime)}))}function g(e){var t=e[T];return delete e[T],!e.webkitDisplayingFullscreen&&!t}function p(e){var t=e[E];e[b]=e.play,e[S]=e.pause,e.play=f,e.pause=c,i(e,"paused",t.driver),i(e,"muted",t.driver,!0),i(e,"playbackRate",t.driver,!0),i(e,"ended",t.driver),i(e,"loop",t.driver,!0),n(e,"seeking",function(e){return!e.webkitDisplayingFullscreen}),n(e,"seeked",function(e){return!e.webkitDisplayingFullscreen}),n(e,"timeupdate",g),n(e,"ended",g)}function v(e,t){if(void 0===t&&(t={}),!e[E]){if(!t.everywhere){if(!_)return;if(!(t.iPad||t.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}e.pause();var r=e.autoplay;e.autoplay=!1,h(e,!e.muted),p(e),e.classList.add("IIV"),e.muted&&r&&(e.play(),e.addEventListener("playing",function t(){e.autoplay=!0,e.removeEventListener("playing",t)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}var m,y=r(217),_="object"==typeof document&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,E="bfred-it:iphone-inline-video",T="bfred-it:iphone-inline-video:event",b="bfred-it:iphone-inline-video:nativeplay",S="bfred-it:iphone-inline-video:nativepause",R=[],A=0;e.exports=v},function(e,t,r){"use strict";e.exports=r(223)},function(e,t,r){"use strict";var n=r(20);e.exports=n,n.prototype.done=function(e,t){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,r){"use strict";function n(e){var t=new i(i._61);return t._65=1,t._55=e,t}var i=r(20);e.exports=i;var a=n(!0),o=n(!1),s=n(null),u=n(void 0),l=n(0),d=n("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return u;if(e===!0)return a;if(e===!1)return o;if(0===e)return l;if(""===e)return d;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,r){r(e)})}return n(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,r){function n(o,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._65;)s=s._55;return 1===s._65?n(o,s._55):(2===s._65&&r(s._55),void s.then(function(e){n(o,e)},r))}var u=s.then;if("function"==typeof u){var l=new i(u.bind(s));return void l.then(function(e){n(o,e)},r)}}t[o]=s,0===--a&&e(t)}if(0===t.length)return e([]);for(var a=t.length,o=0;o<t.length;o++)n(o,t[o])})},i.reject=function(e){return new i(function(t,r){r(e)})},i.race=function(e){return new i(function(t,r){e.forEach(function(e){i.resolve(e).then(t,r)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,r){"use strict";var n=r(20);e.exports=n,n.prototype.finally=function(e){return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})}},function(e,t,r){"use strict";e.exports=r(20),r(220),r(222),r(221),r(224),r(225)},function(e,t,r){"use strict";function n(e,t){for(var r=[],n=0;n<t;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(r).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(a,e)}function i(e){for(var t=Math.max(e.length-1,3),r=[],n=0;n<t;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",r.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(r.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(a,e)}var a=r(20),o=r(83);e.exports=a,a.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?n(e,t):i(e)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";a.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),r="function"==typeof t[t.length-1]?t.pop():null,n=this;try{return e.apply(this,arguments).nodeify(r,n)}catch(e){if(null===r||"undefined"==typeof r)return new a(function(t,r){r(e)});o(function(){r.call(n,e)})}}},a.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(r){o(function(){e.call(t,null,r)})},function(r){o(function(){e.call(t,r)})})}},function(e,t,r){"use strict";var n=r(20);e.exports=n,n.enableSynchronous=function(){n.prototype.isPending=function(){return 0==this.getState()},n.prototype.isFulfilled=function(){return 1==this.getState()},n.prototype.isRejected=function(){return 2==this.getState()},n.prototype.getValue=function(){if(3===this._65)return this._55.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._55},n.prototype.getReason=function(){if(3===this._65)return this._55.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._55},n.prototype.getState=function(){return 3===this._65?this._55.getState():this._65===-1||this._65===-2?0:this._65}},n.disableSynchronous=function(){n.prototype.isPending=void 0,n.prototype.isFulfilled=void 0,n.prototype.isRejected=void 0,n.prototype.getValue=void 0,n.prototype.getReason=void 0,n.prototype.getState=void 0}},function(e,t){var r=t.decimalAdjust=function(e,t,r){return"undefined"==typeof r||0===+r?Math[e](t):(t=+t,r=+r,isNaN(t)||"number"!=typeof r||r%1!==0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-r:-r))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+r:r))))};e.exports={round10:function(e,t){return r("round",e,t)},floor10:function(e,t){return r("floor",e,t)},ceil10:function(e,t){return r("ceil",e,t)}},e.exports.polyfill=function(){Math.round10||(Math.round10=e.exports.round10),Math.floor10||(Math.floor10=e.exports.floor10),Math.ceil10||(Math.ceil10=e.exports.ceil10)}},function(e,t){function r(e){for(var t=1;t<arguments.length;t++)for(var r=arguments[t],n=Object.keys(r),i=0;i<n.length;i++){var a=n[i];e[a]=r[a]}return e}e.exports=r}])});